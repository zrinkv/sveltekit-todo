import"../chunks/DsnmJJEf.js";import{i as Xh}from"../chunks/DR_yl4T_.js";import{aD as Zh,p as Kh,i as Gl,k as zl,l as Qh,b3 as Jh,Q as td,s as Ft,j as ed,aU as nd,m as ut,t as rd,ba as id,B as Wl,g as ko,n as ht,ab as tn}from"../chunks/ClbkhMnk.js";import{a as od,s as fr}from"../chunks/BwCUC5PO.js";import{l as Rr,p as ce,b as ad,s as sd}from"../chunks/CfGuPw0X.js";import{c as ld,o as cd,a as ud,b as hd}from"../chunks/DMjH6Hay.js";function Ei(t,e){var n=t.$$events?.[e.type],r=Zh(n)?n.slice():n==null?[]:[n];for(var i of r)i.call(this,e)}const pr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20height='24px'%20viewBox='0%20-960%20960%20960'%20width='24px'%20fill='%23e3e3e3'%3e%3cpath%20d='M560-80v-123l221-220q9-9%2020-13t22-4q12%200%2023%204.5t20%2013.5l37%2037q8%209%2012.5%2020t4.5%2022q0%2011-4%2022.5T903-300L683-80H560Zm300-263-37-37%2037%2037ZM620-140h38l121-122-18-19-19-18-122%20121v38ZM240-80q-33%200-56.5-23.5T160-160v-640q0-33%2023.5-56.5T240-880h320l240%20240v120h-80v-80H520v-200H240v640h240v80H240Zm280-400Zm241%20199-19-18%2037%2037-18-19Z'/%3e%3c/svg%3e";var ql=(t=>(t.RENDER_FINISHED="render-finished",t.RESIZE="chart-resize",t.MOUSEOVER="chart-mouseover",t.MOUSEOUT="chart-mouseout",t))(ql||{}),Yl=(t=>(t.SHOW="show-modal",t.HIDE="hide-modal",t))(Yl||{}),Xl=(t=>(t.UPDATE="model-update",t))(Xl||{}),Zl=(t=>(t.SHOW_OVERFLOW_MENU="show-toolbar-overflow-menu",t.HIDE_OVERFLOW_MENU="hide-toolbar-overflow-menu",t.BUTTON_CLICK="toolbar-button-click",t.SHOW_TOOLTIP="toolbar-show-tooltip",t.HIDE_TOOLTIP="toolbar-hide-tooltip",t))(Zl||{}),Kl=(t=>(t.UPDATE="zoom-bar-update",t.SELECTION_START="zoom-bar-selection-start",t.SELECTION_IN_PROGRESS="zoom-bar-selection-in-progress",t.SELECTION_END="zoom-bar-selection-end",t))(Kl||{}),Ql=(t=>(t.CHANGE="zoom-domain-change",t))(Ql||{}),Jl=(t=>(t.CANVAS_ZOOM_IN="canvas-zoom-in",t.CANVAS_ZOOM_OUT="canvas-zoom-out",t))(Jl||{}),tc=(t=>(t.LABEL_MOUSEOVER="axis-label-mouseover",t.LABEL_MOUSEMOVE="axis-label-mousemove",t.LABEL_CLICK="axis-label-click",t.LABEL_MOUSEOUT="axis-label-mouseout",t.LABEL_FOCUS="axis-label-focus",t.LABEL_BLUR="axis-label-blur",t.RENDER_COMPLETE="axis-render-complete",t))(tc||{}),ec=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(ec||{}),nc=(t=>(t.WORD_MOUSEOVER="wordcloud-word-mouseover",t.WORD_MOUSEMOVE="wordcloud-word-mousemove",t.WORD_CLICK="wordcloud-word-click",t.WORD_MOUSEOUT="wordcloud-word-mouseout",t))(nc||{}),rc=(t=>(t.SLICE_MOUSEOVER="pie-slice-mouseover",t.SLICE_MOUSEMOVE="pie-slice-mousemove",t.SLICE_CLICK="pie-slice-click",t.SLICE_MOUSEOUT="pie-slice-mouseout",t))(rc||{}),ic=(t=>(t.ARC_MOUSEOVER="gauge-arc-mouseover",t.ARC_MOUSEMOVE="gauge-arc-mousemove",t.ARC_CLICK="gauge-arc-click",t.ARC_MOUSEOUT="gauge-arc-mouseout",t))(ic||{}),oc=(t=>(t.BAR_MOUSEOVER="bar-mouseover",t.BAR_MOUSEMOVE="bar-mousemove",t.BAR_CLICK="bar-click",t.BAR_MOUSEOUT="bar-mouseout",t))(oc||{}),ac=(t=>(t.BOX_MOUSEOVER="box-mouseover",t.BOX_MOUSEMOVE="box-mousemove",t.BOX_CLICK="box-click",t.BOX_MOUSEOUT="box-mouseout",t.OUTLIER_MOUSEOVER="outlier-mouseover",t.OUTLIER_MOUSEMOVE="outlier-mousemove",t.OUTLIER_CLICK="outlier-click",t.OUTLIER_MOUSEOUT="outlier-mouseout",t))(ac||{}),sc=(t=>(t.SCATTER_MOUSEOVER="scatter-mouseover",t.SCATTER_MOUSEMOVE="scatter-mousemove",t.SCATTER_CLICK="scatter-click",t.SCATTER_MOUSEOUT="scatter-mouseout",t))(sc||{}),lc=(t=>(t.POINT_MOUSEOVER="scatter-mouseover",t.POINT_MOUSEMOVE="scatter-mousemove",t.POINT_CLICK="scatter-click",t.POINT_MOUSEOUT="scatter-mouseout",t))(lc||{}),cc=(t=>(t.X_AXIS_MOUSEOVER="radar-x-axis-mouseover",t.X_AXIS_MOUSEMOVE="radar-x-axis-mousemove",t.X_AXIS_CLICK="radar-x-axis-click",t.X_AXIS_MOUSEOUT="radar-x-axis-mouseout",t))(cc||{}),uc=(t=>(t.NODE_MOUSEOVER="tree-node-mouseover",t.NODE_CLICK="tree-node-click",t.NODE_MOUSEOUT="tree-node-mouseout",t))(uc||{}),hc=(t=>(t.LEAF_MOUSEOVER="leaf-mouseover",t.LEAF_MOUSEMOVE="leaf-mousemove",t.LEAF_CLICK="leaf-click",t.LEAF_MOUSEOUT="leaf-mouseout",t))(hc||{}),dc=(t=>(t.SHOW="show-tooltip",t.MOVE="move-tooltip",t.HIDE="hide-tooltip",t))(dc||{}),fc=(t=>(t.SHOW="show-threshold",t.HIDE="hide-threshold",t))(fc||{}),pc=(t=>(t.ITEM_HOVER="legend-item-onhover",t.ITEM_CLICK="legend-item-onclick",t.ITEM_MOUSEOUT="legend-item-onmouseout",t.ITEMS_UPDATE="legend-items-update",t))(pc||{}),gc=(t=>(t.CIRCLE_MOUSEOVER="circle-leaf-mouseover",t.CIRCLE_CLICK="circle-leaf-click",t.CIRCLE_MOUSEOUT="circle-leaf-mouseout",t.CIRCLE_MOUSEMOVE="circle-leaf-mousemove",t))(gc||{}),mc=(t=>(t.NODE_MOUSEOVER="alluvial-node-mouseover",t.NODE_CLICK="alluvial-node-click",t.NODE_MOUSEOUT="alluvial-node-mouseout",t.NODE_MOUSEMOVE="alluvial-node-mousemove",t.LINE_MOUSEOVER="alluvial-line-mouseover",t.LINE_CLICK="alluvial-line-click",t.LINE_MOUSEOUT="alluvial-line-mouseout",t.LINE_MOUSEMOVE="alluvial-line-mousemove",t))(mc||{}),vc=(t=>(t.METER_MOUSEOVER="meter-mouseover",t.METER_CLICK="meter-click",t.METER_MOUSEOUT="meter-mouseout",t.METER_MOUSEMOVE="meter-mousemove",t))(vc||{}),yc=(t=>(t.HEATMAP_MOUSEOVER="heatmap-mouseover",t.HEATMAP_CLICK="heatmap-click",t.HEATMAP_MOUSEOUT="heatmap-mouseout",t.HEATMAP_MOUSEMOVE="hetmap-mousemove",t))(yc||{}),_c=(t=>(t.CHOROPLETH_MOUSEOVER="choropleth-mouseover",t.CHOROPLETH_CLICK="choropleth-click",t.CHOROPLETH_MOUSEOUT="choropleth-mouseout",t.CHOROPLETH_MOUSEMOVE="choropleth-mousemove",t))(_c||{});const dd=Object.freeze(Object.defineProperty({__proto__:null,Alluvial:mc,Area:ec,Axis:tc,Bar:oc,Boxplot:ac,CanvasZoom:Jl,Chart:ql,Choropleth:_c,CirclePack:gc,Gauge:ic,Heatmap:yc,Legend:pc,Line:lc,Meter:vc,Modal:Yl,Model:Xl,Pie:rc,Radar:cc,Scatter:sc,Threshold:fc,Toolbar:Zl,Tooltip:dc,Tree:uc,Treemap:hc,WordCloud:nc,ZoomBar:Kl,ZoomDomain:Ql},Symbol.toStringTag,{value:"Module"})),O=dd;var ct=(t=>(t.HTML="html",t.SVG="svg",t))(ct||{}),bc=(t=>(t.WHITE="white",t.G100="g100",t.G90="g90",t.G10="g10",t))(bc||{}),kt=(t=>(t.BACKGROUND="background",t.FILL="fill",t.STROKE="stroke",t.TOOLTIP="tooltip",t))(kt||{}),Nr=(t=>(t.GRAPH_VIEW="graph_view",t.SLIDER_VIEW="slider_view",t))(Nr||{}),ue=(t=>(t.END_LINE="end_line",t.MID_LINE="mid_line",t.FRONT_LINE="front_line",t.NONE="none",t))(ue||{}),de=(t=>(t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t))(de||{}),be=(t=>(t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio",t))(be||{}),wc=(t=>(t.RIGHT="right",t.LEFT="left",t.TOP="top",t.BOTTOM="bottom",t))(wc||{}),Se=(t=>(t.LEFT="left",t.CENTER="center",t.RIGHT="right",t))(Se||{}),Ji=(t=>(t.HORIZONTAL="horizontal",t.VERTICAL="vertical",t))(Ji||{}),Ec=(t=>(t.TREE="tree",t.DENDROGRAM="dendrogram",t))(Ec||{}),Vt=(t=>(t.ROW="row",t.COLUMN="column",t.ROW_REVERSE="row-reverse",t.COLUMN_REVERSE="column-reverse",t))(Vt||{}),bt=(t=>(t.FIXED="fixed",t.PREFERRED="preferred",t.STRETCH="stretch",t))(bt||{}),Io=(t=>(t.CENTER="center",t))(Io||{}),Tc=(t=>(t.SEMI="semi",t.FULL="full",t))(Tc||{}),Tr=(t=>(t.SUCCESS="success",t.WARNING="warning",t.DANGER="danger",t))(Tr||{}),Ae=(t=>(t.SCATTER="scatter",t.LINE="line",t.SIMPLE_BAR="simple-bar",t.STACKED_BAR="stacked-bar",t.GROUPED_BAR="grouped-bar",t.AREA="area",t.STACKED_AREA="stacked-area",t))(Ae||{}),at=(t=>(t.EXPORT_CSV="Export as CSV",t.EXPORT_PNG="Export as PNG",t.EXPORT_JPG="Export as JPG",t.ZOOM_IN="Zoom in",t.ZOOM_OUT="Zoom out",t.RESET_ZOOM="Reset zoom",t.MAKE_FULLSCREEN="Make fullscreen",t.EXIT_FULLSCREEN="Exit fullscreen",t.SHOW_AS_DATATABLE="Show as data-table",t.CUSTOM="Custom",t))(at||{}),St=(t=>(t.CHECKBOX="checkbox",t.RADIUS="radius",t.AREA="area",t.SIZE="size",t.LINE="line",t.QUARTILE="quartile",t.ZOOM="zoom",t))(St||{}),Sc=(t=>(t.ON="on",t.AUTO="auto",t.OFF="off",t))(Sc||{}),Oc=(t=>(t.geoEqualEarth="geoEqualEarth",t.geoAlbers="geoAlbers",t.geoConicEqualArea="geoConicEqualArea",t.geoConicEquidistant="geoConicEquidistant",t.geoEquirectangular="geoEquirectangular",t.geoMercator="geoMercator",t.geoNaturalEarth1="geoNaturalEarth1",t))(Oc||{});function Ti(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}function xn(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,s=n!=null&&n.width?String(n.width):a;i=t.formattingValues[s]||t.formattingValues[a]}else{const a=t.defaultWidth,s=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[s]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return i[o]}}function Mn(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(i);if(!o)return null;const a=o[0],s=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(s)?pd(s,h=>h.test(a)):fd(s,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function fd(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function pd(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function gd(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const s=e.slice(i.length);return{value:a,rest:s}}}const md={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},vd=(t,e,n)=>{let r;const i=md[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},yd={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_d=(t,e,n,r)=>yd[t],bd={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wd={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Ed={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Td={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Sd={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Od={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xd=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Md={ordinalNumber:xd,era:xn({values:bd,defaultWidth:"wide"}),quarter:xn({values:wd,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xn({values:Ed,defaultWidth:"wide"}),day:xn({values:Td,defaultWidth:"wide"}),dayPeriod:xn({values:Sd,defaultWidth:"wide",formattingValues:Od,defaultFormattingWidth:"wide"})},Cd=/^(\d+)(th|st|nd|rd)?/i,$d=/\d+/i,Ad={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ld={any:[/^b/i,/^(a|c)/i]},Dd={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},kd={any:[/1/i,/2/i,/3/i,/4/i]},Id={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Rd={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Nd={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ud={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pd={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Hd={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fd={ordinalNumber:gd({matchPattern:Cd,parsePattern:$d,valueCallback:t=>parseInt(t,10)}),era:Mn({matchPatterns:Ad,defaultMatchWidth:"wide",parsePatterns:Ld,defaultParseWidth:"any"}),quarter:Mn({matchPatterns:Dd,defaultMatchWidth:"wide",parsePatterns:kd,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mn({matchPatterns:Id,defaultMatchWidth:"wide",parsePatterns:Rd,defaultParseWidth:"any"}),day:Mn({matchPatterns:Nd,defaultMatchWidth:"wide",parsePatterns:Ud,defaultParseWidth:"any"}),dayPeriod:Mn({matchPatterns:Pd,defaultMatchWidth:"any",parsePatterns:Hd,defaultParseWidth:"any"})},Vd={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Bd={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},jd={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Gd={date:Ti({formats:Vd,defaultWidth:"full"}),time:Ti({formats:Bd,defaultWidth:"full"}),dateTime:Ti({formats:jd,defaultWidth:"full"})},zd={code:"en-US",formatDistance:vd,formatLong:Gd,formatRelative:_d,localize:Md,match:Fd,options:{weekStartsOn:0,firstWeekContainsDate:1}};var xc=typeof global=="object"&&global&&global.Object===Object&&global,Wd=typeof self=="object"&&self&&self.Object===Object&&self,ae=xc||Wd||Function("return this")(),Kt=ae.Symbol,Mc=Object.prototype,qd=Mc.hasOwnProperty,Yd=Mc.toString,Cn=Kt?Kt.toStringTag:void 0;function Xd(t){var e=qd.call(t,Cn),n=t[Cn];try{t[Cn]=void 0;var r=!0}catch{}var i=Yd.call(t);return r&&(e?t[Cn]=n:delete t[Cn]),i}var Zd=Object.prototype,Kd=Zd.toString;function Qd(t){return Kd.call(t)}var Jd="[object Null]",tf="[object Undefined]",Fa=Kt?Kt.toStringTag:void 0;function ze(t){return t==null?t===void 0?tf:Jd:Fa&&Fa in Object(t)?Xd(t):Qd(t)}function fe(t){return t!=null&&typeof t=="object"}var ef="[object Symbol]";function ni(t){return typeof t=="symbol"||fe(t)&&ze(t)==ef}function Cc(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var Nt=Array.isArray,Va=Kt?Kt.prototype:void 0,Ba=Va?Va.toString:void 0;function $c(t){if(typeof t=="string")return t;if(Nt(t))return Cc(t,$c)+"";if(ni(t))return Ba?Ba.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Qt(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Ro(t){return t}var nf="[object AsyncFunction]",rf="[object Function]",of="[object GeneratorFunction]",af="[object Proxy]";function No(t){if(!Qt(t))return!1;var e=ze(t);return e==rf||e==of||e==nf||e==af}var Si=ae["__core-js_shared__"],ja=(function(){var t=/[^.]+$/.exec(Si&&Si.keys&&Si.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function sf(t){return!!ja&&ja in t}var lf=Function.prototype,cf=lf.toString;function We(t){if(t!=null){try{return cf.call(t)}catch{}try{return t+""}catch{}}return""}var uf=/[\\^$.*+?()[\]{}|]/g,hf=/^\[object .+?Constructor\]$/,df=Function.prototype,ff=Object.prototype,pf=df.toString,gf=ff.hasOwnProperty,mf=RegExp("^"+pf.call(gf).replace(uf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vf(t){if(!Qt(t)||sf(t))return!1;var e=No(t)?mf:hf;return e.test(We(t))}function yf(t,e){return t?.[e]}function qe(t,e){var n=yf(t,e);return vf(n)?n:void 0}var to=qe(ae,"WeakMap"),Ga=Object.create,_f=(function(){function t(){}return function(e){if(!Qt(e))return{};if(Ga)return Ga(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function bf(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function wf(){}function Ac(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var Ef=800,Tf=16,Sf=Date.now;function Of(t){var e=0,n=0;return function(){var r=Sf(),i=Tf-(r-n);if(n=r,i>0){if(++e>=Ef)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function xf(t){return function(){return t}}var Ur=(function(){try{var t=qe(Object,"defineProperty");return t({},"",{}),t}catch{}})(),Mf=Ur?function(t,e){return Ur(t,"toString",{configurable:!0,enumerable:!1,value:xf(e),writable:!0})}:Ro,Lc=Of(Mf);function Cf(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function $f(t,e,n,r){for(var i=t.length,o=n+-1;++o<i;)if(e(t[o],o,t))return o;return-1}function Af(t){return t!==t}function Lf(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Df(t,e,n){return e===e?Lf(t,e,n):$f(t,Af,n)}function kf(t,e){var n=t==null?0:t.length;return!!n&&Df(t,e,0)>-1}var If=9007199254740991,Rf=/^(?:0|[1-9]\d*)$/;function Uo(t,e){var n=typeof t;return e=e??If,!!e&&(n=="number"||n!="symbol"&&Rf.test(t))&&t>-1&&t%1==0&&t<e}function ri(t,e,n){e=="__proto__"&&Ur?Ur(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function tr(t,e){return t===e||t!==t&&e!==e}var Nf=Object.prototype,Uf=Nf.hasOwnProperty;function Dc(t,e,n){var r=t[e];(!(Uf.call(t,e)&&tr(r,n))||n===void 0&&!(e in t))&&ri(t,e,n)}function wn(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=void 0;l===void 0&&(l=t[s]),i?ri(n,s,l):Dc(n,s,l)}return n}var za=Math.max;function kc(t,e,n){return e=za(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=za(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),bf(t,this,s)}}function Po(t,e){return Lc(kc(t,e,Ro),t+"")}var Pf=9007199254740991;function Ho(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Pf}function er(t){return t!=null&&Ho(t.length)&&!No(t)}function Hf(t,e,n){if(!Qt(n))return!1;var r=typeof e;return(r=="number"?er(n)&&Uo(e,n.length):r=="string"&&e in n)?tr(n[e],t):!1}function Ff(t){return Po(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(i--,o):void 0,a&&Hf(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}var Vf=Object.prototype;function Fo(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Vf;return t===n}function Bf(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var jf="[object Arguments]";function Wa(t){return fe(t)&&ze(t)==jf}var Ic=Object.prototype,Gf=Ic.hasOwnProperty,zf=Ic.propertyIsEnumerable,Gn=Wa((function(){return arguments})())?Wa:function(t){return fe(t)&&Gf.call(t,"callee")&&!zf.call(t,"callee")};function Wf(){return!1}var Rc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qa=Rc&&typeof module=="object"&&module&&!module.nodeType&&module,qf=qa&&qa.exports===Rc,Ya=qf?ae.Buffer:void 0,Yf=Ya?Ya.isBuffer:void 0,zn=Yf||Wf,Xf="[object Arguments]",Zf="[object Array]",Kf="[object Boolean]",Qf="[object Date]",Jf="[object Error]",tp="[object Function]",ep="[object Map]",np="[object Number]",rp="[object Object]",ip="[object RegExp]",op="[object Set]",ap="[object String]",sp="[object WeakMap]",lp="[object ArrayBuffer]",cp="[object DataView]",up="[object Float32Array]",hp="[object Float64Array]",dp="[object Int8Array]",fp="[object Int16Array]",pp="[object Int32Array]",gp="[object Uint8Array]",mp="[object Uint8ClampedArray]",vp="[object Uint16Array]",yp="[object Uint32Array]",ft={};ft[up]=ft[hp]=ft[dp]=ft[fp]=ft[pp]=ft[gp]=ft[mp]=ft[vp]=ft[yp]=!0;ft[Xf]=ft[Zf]=ft[lp]=ft[Kf]=ft[cp]=ft[Qf]=ft[Jf]=ft[tp]=ft[ep]=ft[np]=ft[rp]=ft[ip]=ft[op]=ft[ap]=ft[sp]=!1;function _p(t){return fe(t)&&Ho(t.length)&&!!ft[ze(t)]}function Vo(t){return function(e){return t(e)}}var Nc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Bn=Nc&&typeof module=="object"&&module&&!module.nodeType&&module,bp=Bn&&Bn.exports===Nc,Oi=bp&&xc.process,fn=(function(){try{var t=Bn&&Bn.require&&Bn.require("util").types;return t||Oi&&Oi.binding&&Oi.binding("util")}catch{}})(),Xa=fn&&fn.isTypedArray,Bo=Xa?Vo(Xa):_p,wp=Object.prototype,Ep=wp.hasOwnProperty;function Uc(t,e){var n=Nt(t),r=!n&&Gn(t),i=!n&&!r&&zn(t),o=!n&&!r&&!i&&Bo(t),a=n||r||i||o,s=a?Bf(t.length,String):[],l=s.length;for(var c in t)(e||Ep.call(t,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Uo(c,l)))&&s.push(c);return s}function Pc(t,e){return function(n){return t(e(n))}}var Tp=Pc(Object.keys,Object),Sp=Object.prototype,Op=Sp.hasOwnProperty;function xp(t){if(!Fo(t))return Tp(t);var e=[];for(var n in Object(t))Op.call(t,n)&&n!="constructor"&&e.push(n);return e}function nr(t){return er(t)?Uc(t):xp(t)}function Mp(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Cp=Object.prototype,$p=Cp.hasOwnProperty;function Ap(t){if(!Qt(t))return Mp(t);var e=Fo(t),n=[];for(var r in t)r=="constructor"&&(e||!$p.call(t,r))||n.push(r);return n}function rr(t){return er(t)?Uc(t,!0):Ap(t)}var Lp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dp=/^\w*$/;function jo(t,e){if(Nt(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||ni(t)?!0:Dp.test(t)||!Lp.test(t)||e!=null&&t in Object(e)}var Wn=qe(Object,"create");function kp(){this.__data__=Wn?Wn(null):{},this.size=0}function Ip(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Rp="__lodash_hash_undefined__",Np=Object.prototype,Up=Np.hasOwnProperty;function Pp(t){var e=this.__data__;if(Wn){var n=e[t];return n===Rp?void 0:n}return Up.call(e,t)?e[t]:void 0}var Hp=Object.prototype,Fp=Hp.hasOwnProperty;function Vp(t){var e=this.__data__;return Wn?e[t]!==void 0:Fp.call(e,t)}var Bp="__lodash_hash_undefined__";function jp(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Wn&&e===void 0?Bp:e,this}function Fe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Fe.prototype.clear=kp;Fe.prototype.delete=Ip;Fe.prototype.get=Pp;Fe.prototype.has=Vp;Fe.prototype.set=jp;function Gp(){this.__data__=[],this.size=0}function ii(t,e){for(var n=t.length;n--;)if(tr(t[n][0],e))return n;return-1}var zp=Array.prototype,Wp=zp.splice;function qp(t){var e=this.__data__,n=ii(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Wp.call(e,n,1),--this.size,!0}function Yp(t){var e=this.__data__,n=ii(e,t);return n<0?void 0:e[n][1]}function Xp(t){return ii(this.__data__,t)>-1}function Zp(t,e){var n=this.__data__,r=ii(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function Ce(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ce.prototype.clear=Gp;Ce.prototype.delete=qp;Ce.prototype.get=Yp;Ce.prototype.has=Xp;Ce.prototype.set=Zp;var qn=qe(ae,"Map");function Kp(){this.size=0,this.__data__={hash:new Fe,map:new(qn||Ce),string:new Fe}}function Qp(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function oi(t,e){var n=t.__data__;return Qp(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Jp(t){var e=oi(this,t).delete(t);return this.size-=e?1:0,e}function tg(t){return oi(this,t).get(t)}function eg(t){return oi(this,t).has(t)}function ng(t,e){var n=oi(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function $e(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}$e.prototype.clear=Kp;$e.prototype.delete=Jp;$e.prototype.get=tg;$e.prototype.has=eg;$e.prototype.set=ng;var rg="Expected a function";function Go(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(rg);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Go.Cache||$e),n}Go.Cache=$e;var ig=500;function og(t){var e=Go(t,function(r){return n.size===ig&&n.clear(),r}),n=e.cache;return e}var ag=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sg=/\\(\\)?/g,lg=og(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(ag,function(n,r,i,o){e.push(i?o.replace(sg,"$1"):r||n)}),e});function cg(t){return t==null?"":$c(t)}function ai(t,e){return Nt(t)?t:jo(t,e)?[t]:lg(cg(t))}function ir(t){if(typeof t=="string"||ni(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function zo(t,e){e=ai(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[ir(e[n++])];return n&&n==r?t:void 0}function Hc(t,e,n){var r=t==null?void 0:zo(t,e);return r===void 0?n:r}function Wo(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Za=Kt?Kt.isConcatSpreadable:void 0;function ug(t){return Nt(t)||Gn(t)||!!(Za&&t&&t[Za])}function Fc(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=ug),i||(i=[]);++o<a;){var s=t[o];n(s)?Wo(i,s):r||(i[i.length]=s)}return i}var qo=Pc(Object.getPrototypeOf,Object),hg="[object Object]",dg=Function.prototype,fg=Object.prototype,Vc=dg.toString,pg=fg.hasOwnProperty,gg=Vc.call(Object);function Bc(t){if(!fe(t)||ze(t)!=hg)return!1;var e=qo(t);if(e===null)return!0;var n=pg.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Vc.call(n)==gg}function mg(){this.__data__=new Ce,this.size=0}function vg(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function yg(t){return this.__data__.get(t)}function _g(t){return this.__data__.has(t)}var bg=200;function wg(t,e){var n=this.__data__;if(n instanceof Ce){var r=n.__data__;if(!qn||r.length<bg-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new $e(r)}return n.set(t,e),this.size=n.size,this}function oe(t){var e=this.__data__=new Ce(t);this.size=e.size}oe.prototype.clear=mg;oe.prototype.delete=vg;oe.prototype.get=yg;oe.prototype.has=_g;oe.prototype.set=wg;function Eg(t,e){return t&&wn(e,nr(e),t)}function Tg(t,e){return t&&wn(e,rr(e),t)}var jc=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ka=jc&&typeof module=="object"&&module&&!module.nodeType&&module,Sg=Ka&&Ka.exports===jc,Qa=Sg?ae.Buffer:void 0,Ja=Qa?Qa.allocUnsafe:void 0;function Gc(t,e){if(e)return t.slice();var n=t.length,r=Ja?Ja(n):new t.constructor(n);return t.copy(r),r}function Og(t,e){for(var n=-1,r=t==null?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function zc(){return[]}var xg=Object.prototype,Mg=xg.propertyIsEnumerable,ts=Object.getOwnPropertySymbols,Yo=ts?function(t){return t==null?[]:(t=Object(t),Og(ts(t),function(e){return Mg.call(t,e)}))}:zc;function Cg(t,e){return wn(t,Yo(t),e)}var $g=Object.getOwnPropertySymbols,Wc=$g?function(t){for(var e=[];t;)Wo(e,Yo(t)),t=qo(t);return e}:zc;function Ag(t,e){return wn(t,Wc(t),e)}function qc(t,e,n){var r=e(t);return Nt(t)?r:Wo(r,n(t))}function eo(t){return qc(t,nr,Yo)}function Yc(t){return qc(t,rr,Wc)}var no=qe(ae,"DataView"),ro=qe(ae,"Promise"),hn=qe(ae,"Set"),es="[object Map]",Lg="[object Object]",ns="[object Promise]",rs="[object Set]",is="[object WeakMap]",os="[object DataView]",Dg=We(no),kg=We(qn),Ig=We(ro),Rg=We(hn),Ng=We(to),ne=ze;(no&&ne(new no(new ArrayBuffer(1)))!=os||qn&&ne(new qn)!=es||ro&&ne(ro.resolve())!=ns||hn&&ne(new hn)!=rs||to&&ne(new to)!=is)&&(ne=function(t){var e=ze(t),n=e==Lg?t.constructor:void 0,r=n?We(n):"";if(r)switch(r){case Dg:return os;case kg:return es;case Ig:return ns;case Rg:return rs;case Ng:return is}return e});var Ug=Object.prototype,Pg=Ug.hasOwnProperty;function Hg(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Pg.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Pr=ae.Uint8Array;function Xo(t){var e=new t.constructor(t.byteLength);return new Pr(e).set(new Pr(t)),e}function Fg(t,e){var n=e?Xo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Vg=/\w*$/;function Bg(t){var e=new t.constructor(t.source,Vg.exec(t));return e.lastIndex=t.lastIndex,e}var as=Kt?Kt.prototype:void 0,ss=as?as.valueOf:void 0;function jg(t){return ss?Object(ss.call(t)):{}}function Xc(t,e){var n=e?Xo(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Gg="[object Boolean]",zg="[object Date]",Wg="[object Map]",qg="[object Number]",Yg="[object RegExp]",Xg="[object Set]",Zg="[object String]",Kg="[object Symbol]",Qg="[object ArrayBuffer]",Jg="[object DataView]",tm="[object Float32Array]",em="[object Float64Array]",nm="[object Int8Array]",rm="[object Int16Array]",im="[object Int32Array]",om="[object Uint8Array]",am="[object Uint8ClampedArray]",sm="[object Uint16Array]",lm="[object Uint32Array]";function cm(t,e,n){var r=t.constructor;switch(e){case Qg:return Xo(t);case Gg:case zg:return new r(+t);case Jg:return Fg(t,n);case tm:case em:case nm:case rm:case im:case om:case am:case sm:case lm:return Xc(t,n);case Wg:return new r;case qg:case Zg:return new r(t);case Yg:return Bg(t);case Xg:return new r;case Kg:return jg(t)}}function Zc(t){return typeof t.constructor=="function"&&!Fo(t)?_f(qo(t)):{}}var um="[object Map]";function hm(t){return fe(t)&&ne(t)==um}var ls=fn&&fn.isMap,dm=ls?Vo(ls):hm,fm="[object Set]";function pm(t){return fe(t)&&ne(t)==fm}var cs=fn&&fn.isSet,gm=cs?Vo(cs):pm,mm=1,vm=2,ym=4,Kc="[object Arguments]",_m="[object Array]",bm="[object Boolean]",wm="[object Date]",Em="[object Error]",Qc="[object Function]",Tm="[object GeneratorFunction]",Sm="[object Map]",Om="[object Number]",Jc="[object Object]",xm="[object RegExp]",Mm="[object Set]",Cm="[object String]",$m="[object Symbol]",Am="[object WeakMap]",Lm="[object ArrayBuffer]",Dm="[object DataView]",km="[object Float32Array]",Im="[object Float64Array]",Rm="[object Int8Array]",Nm="[object Int16Array]",Um="[object Int32Array]",Pm="[object Uint8Array]",Hm="[object Uint8ClampedArray]",Fm="[object Uint16Array]",Vm="[object Uint32Array]",dt={};dt[Kc]=dt[_m]=dt[Lm]=dt[Dm]=dt[bm]=dt[wm]=dt[km]=dt[Im]=dt[Rm]=dt[Nm]=dt[Um]=dt[Sm]=dt[Om]=dt[Jc]=dt[xm]=dt[Mm]=dt[Cm]=dt[$m]=dt[Pm]=dt[Hm]=dt[Fm]=dt[Vm]=!0;dt[Em]=dt[Qc]=dt[Am]=!1;function jn(t,e,n,r,i,o){var a,s=e&mm,l=e&vm,c=e&ym;if(n&&(a=i?n(t,r,i,o):n(t)),a!==void 0)return a;if(!Qt(t))return t;var u=Nt(t);if(u){if(a=Hg(t),!s)return Ac(t,a)}else{var h=ne(t),f=h==Qc||h==Tm;if(zn(t))return Gc(t,s);if(h==Jc||h==Kc||f&&!i){if(a=l||f?{}:Zc(t),!s)return l?Ag(t,Tg(a,t)):Cg(t,Eg(a,t))}else{if(!dt[h])return i?t:{};a=cm(t,h,s)}}o||(o=new oe);var d=o.get(t);if(d)return d;o.set(t,a),gm(t)?t.forEach(function(m){a.add(jn(m,e,n,m,t,o))}):dm(t)&&t.forEach(function(m,b){a.set(b,jn(m,e,n,b,t,o))});var p=c?l?Yc:eo:l?rr:nr,E=u?void 0:p(t);return Cf(E||t,function(m,b){E&&(b=m,m=t[b]),Dc(a,b,jn(m,e,n,b,t,o))}),a}var Bm=1,jm=4;function io(t){return jn(t,Bm|jm)}var Gm="__lodash_hash_undefined__";function zm(t){return this.__data__.set(t,Gm),this}function Wm(t){return this.__data__.has(t)}function Yn(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new $e;++e<n;)this.add(t[e])}Yn.prototype.add=Yn.prototype.push=zm;Yn.prototype.has=Wm;function tu(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function eu(t,e){return t.has(e)}var qm=1,Ym=2;function nu(t,e,n,r,i,o){var a=n&qm,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var h=-1,f=!0,d=n&Ym?new Yn:void 0;for(o.set(t,e),o.set(e,t);++h<s;){var p=t[h],E=e[h];if(r)var m=a?r(E,p,h,e,t,o):r(p,E,h,t,e,o);if(m!==void 0){if(m)continue;f=!1;break}if(d){if(!tu(e,function(b,S){if(!eu(d,S)&&(p===b||i(p,b,n,r,o)))return d.push(S)})){f=!1;break}}else if(!(p===E||i(p,E,n,r,o))){f=!1;break}}return o.delete(t),o.delete(e),f}function Xm(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Zo(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Zm=1,Km=2,Qm="[object Boolean]",Jm="[object Date]",tv="[object Error]",ev="[object Map]",nv="[object Number]",rv="[object RegExp]",iv="[object Set]",ov="[object String]",av="[object Symbol]",sv="[object ArrayBuffer]",lv="[object DataView]",us=Kt?Kt.prototype:void 0,xi=us?us.valueOf:void 0;function cv(t,e,n,r,i,o,a){switch(n){case lv:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case sv:return!(t.byteLength!=e.byteLength||!o(new Pr(t),new Pr(e)));case Qm:case Jm:case nv:return tr(+t,+e);case tv:return t.name==e.name&&t.message==e.message;case rv:case ov:return t==e+"";case ev:var s=Xm;case iv:var l=r&Zm;if(s||(s=Zo),t.size!=e.size&&!l)return!1;var c=a.get(t);if(c)return c==e;r|=Km,a.set(t,e);var u=nu(s(t),s(e),r,i,o,a);return a.delete(t),u;case av:if(xi)return xi.call(t)==xi.call(e)}return!1}var uv=1,hv=Object.prototype,dv=hv.hasOwnProperty;function fv(t,e,n,r,i,o){var a=n&uv,s=eo(t),l=s.length,c=eo(e),u=c.length;if(l!=u&&!a)return!1;for(var h=l;h--;){var f=s[h];if(!(a?f in e:dv.call(e,f)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var E=!0;o.set(t,e),o.set(e,t);for(var m=a;++h<l;){f=s[h];var b=t[f],S=e[f];if(r)var _=a?r(S,b,f,e,t,o):r(b,S,f,t,e,o);if(!(_===void 0?b===S||i(b,S,n,r,o):_)){E=!1;break}m||(m=f=="constructor")}if(E&&!m){var y=t.constructor,g=e.constructor;y!=g&&"constructor"in t&&"constructor"in e&&!(typeof y=="function"&&y instanceof y&&typeof g=="function"&&g instanceof g)&&(E=!1)}return o.delete(t),o.delete(e),E}var pv=1,hs="[object Arguments]",ds="[object Array]",gr="[object Object]",gv=Object.prototype,fs=gv.hasOwnProperty;function mv(t,e,n,r,i,o){var a=Nt(t),s=Nt(e),l=a?ds:ne(t),c=s?ds:ne(e);l=l==hs?gr:l,c=c==hs?gr:c;var u=l==gr,h=c==gr,f=l==c;if(f&&zn(t)){if(!zn(e))return!1;a=!0,u=!1}if(f&&!u)return o||(o=new oe),a||Bo(t)?nu(t,e,n,r,i,o):cv(t,e,l,n,r,i,o);if(!(n&pv)){var d=u&&fs.call(t,"__wrapped__"),p=h&&fs.call(e,"__wrapped__");if(d||p){var E=d?t.value():t,m=p?e.value():e;return o||(o=new oe),i(E,m,n,r,o)}}return f?(o||(o=new oe),fv(t,e,n,r,i,o)):!1}function si(t,e,n,r,i){return t===e?!0:t==null||e==null||!fe(t)&&!fe(e)?t!==t&&e!==e:mv(t,e,n,r,si,i)}var vv=1,yv=2;function _v(t,e,n,r){var i=n.length,o=i;if(t==null)return!o;for(t=Object(t);i--;){var a=n[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){a=n[i];var s=a[0],l=t[s],c=a[1];if(a[2]){if(l===void 0&&!(s in t))return!1}else{var u=new oe,h;if(!(h===void 0?si(c,l,vv|yv,r,u):h))return!1}}return!0}function ru(t){return t===t&&!Qt(t)}function bv(t){for(var e=nr(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ru(i)]}return e}function iu(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function wv(t){var e=bv(t);return e.length==1&&e[0][2]?iu(e[0][0],e[0][1]):function(n){return n===t||_v(n,t,e)}}function Ev(t,e){return t!=null&&e in Object(t)}function Tv(t,e,n){e=ai(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=ir(e[r]);if(!(o=t!=null&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=t==null?0:t.length,!!i&&Ho(i)&&Uo(a,i)&&(Nt(t)||Gn(t)))}function Sv(t,e){return t!=null&&Tv(t,e,Ev)}var Ov=1,xv=2;function Mv(t,e){return jo(t)&&ru(e)?iu(ir(t),e):function(n){var r=Hc(n,t);return r===void 0&&r===e?Sv(n,t):si(e,r,Ov|xv)}}function Cv(t){return function(e){return e?.[t]}}function $v(t){return function(e){return zo(e,t)}}function Av(t){return jo(t)?Cv(ir(t)):$v(t)}function Ko(t){return typeof t=="function"?t:t==null?Ro:typeof t=="object"?Nt(t)?Mv(t[0],t[1]):wv(t):Av(t)}function Lv(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[++i];if(n(o[l],l,o)===!1)break}return e}}var ou=Lv();function oo(t,e,n){(n!==void 0&&!tr(t[e],n)||n===void 0&&!(e in t))&&ri(t,e,n)}function ao(t){return fe(t)&&er(t)}function so(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Dv(t){return wn(t,rr(t))}function kv(t,e,n,r,i,o,a){var s=so(t,n),l=so(e,n),c=a.get(l);if(c){oo(t,n,c);return}var u=o?o(s,l,n+"",t,e,a):void 0,h=u===void 0;if(h){var f=Nt(l),d=!f&&zn(l),p=!f&&!d&&Bo(l);u=l,f||d||p?Nt(s)?u=s:ao(s)?u=Ac(s):d?(h=!1,u=Gc(l,!0)):p?(h=!1,u=Xc(l,!0)):u=[]:Bc(l)||Gn(l)?(u=s,Gn(s)?u=Dv(s):(!Qt(s)||No(s))&&(u=Zc(l))):h=!1}h&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),oo(t,n,u)}function au(t,e,n,r,i){t!==e&&ou(e,function(o,a){if(i||(i=new oe),Qt(o))kv(t,e,a,n,au,r,i);else{var s=r?r(so(t,a),o,a+"",t,e,i):void 0;s===void 0&&(s=o),oo(t,a,s)}},rr)}function su(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var K=Ff(function(t,e,n){au(t,e,n)}),Iv=1/0,Rv=hn&&1/Zo(new hn([,-0]))[1]==Iv?function(t){return new hn(t)}:wf,Nv=200;function lu(t,e,n){var r=-1,i=kf,o=t.length,a=!0,s=[],l=s;if(o>=Nv){var c=e?null:Rv(t);if(c)return Zo(c);a=!1,i=eu,l=new Yn}else l=e?[]:s;t:for(;++r<o;){var u=t[r],h=e?e(u):u;if(u=u!==0?u:0,a&&h===h){for(var f=l.length;f--;)if(l[f]===h)continue t;e&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}var Uv=Po(function(t){var e=su(t);return ao(e)&&(e=void 0),lu(Fc(t,1,ao,!0),Ko(e))});function lo(t){return t&&t.length?lu(t):[]}function Sr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Pv(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Qo(t){let e,n,r;t.length!==2?(e=Sr,n=(s,l)=>Sr(t(s),l),r=(s,l)=>t(s)-l):(e=t===Sr||t===Pv?t:Hv,n=t,r=t);function i(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(s[h],l)<0?c=h+1:u=h}while(c<u)}return c}function o(s,l,c=0,u=s.length){if(c<u){if(e(l,l)!==0)return u;do{const h=c+u>>>1;n(s[h],l)<=0?c=h+1:u=h}while(c<u)}return c}function a(s,l,c=0,u=s.length){const h=i(s,l,c,u-1);return h>c&&r(s[h-1],l)>-r(s[h],l)?h-1:h}return{left:i,center:a,right:o}}function Hv(){return 0}function Fv(t){return t===null?NaN:+t}const Vv=Qo(Sr),cu=Vv.right;Qo(Fv).center;function Mi(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let o of t)(o=e(o,++i,t))!=null&&(n===void 0?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}let ps=class extends Map{constructor(e,n=Gv){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(gs(this,e))}has(e){return super.has(gs(this,e))}set(e,n){return super.set(Bv(this,e),n)}delete(e){return super.delete(jv(this,e))}};function gs({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Bv({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function jv({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Gv(t){return t!==null&&typeof t=="object"?t.valueOf():t}const zv=Math.sqrt(50),Wv=Math.sqrt(10),qv=Math.sqrt(2);function Hr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=zv?10:o>=Wv?5:o>=qv?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?Hr(t,e,n*2):[s,l,c]}function uu(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?Hr(e,t,n):Hr(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function pn(t,e,n){return e=+e,t=+t,n=+n,Hr(t,e,n)[2]}function co(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?pn(e,t,n):pn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}var Yv={value:()=>{}};function Jo(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Or(n)}function Or(t){this._=t}function Xv(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Or.prototype=Jo.prototype={constructor:Or,on:function(t,e){var n=this._,r=Xv(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=Zv(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=ms(n[i],t.name,e);else if(e==null)for(i in n)n[i]=ms(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Or(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function Zv(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function ms(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Yv,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var uo="http://www.w3.org/1999/xhtml";const vs={svg:"http://www.w3.org/2000/svg",xhtml:uo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function li(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),vs.hasOwnProperty(e)?{space:vs[e],local:t}:t}function Kv(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===uo&&e.documentElement.namespaceURI===uo?e.createElement(t):e.createElementNS(n,t)}}function Qv(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function hu(t){var e=li(t);return(e.local?Qv:Kv)(e)}function Jv(){}function ta(t){return t==null?Jv:function(){return this.querySelector(t)}}function ty(t){typeof t!="function"&&(t=ta(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=o[u])&&(c=t.call(l,l.__data__,u,o))&&("__data__"in l&&(c.__data__=l.__data__),s[u]=c);return new qt(r,this._parents)}function ey(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ny(){return[]}function du(t){return t==null?ny:function(){return this.querySelectorAll(t)}}function ry(t){return function(){return ey(t.apply(this,arguments))}}function iy(t){typeof t=="function"?t=ry(t):t=du(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&(r.push(t.call(l,l.__data__,c,a)),i.push(l));return new qt(r,i)}function fu(t){return function(){return this.matches(t)}}function pu(t){return function(e){return e.matches(t)}}var oy=Array.prototype.find;function ay(t){return function(){return oy.call(this.children,t)}}function sy(){return this.firstElementChild}function ly(t){return this.select(t==null?sy:ay(typeof t=="function"?t:pu(t)))}var cy=Array.prototype.filter;function uy(){return Array.from(this.children)}function hy(t){return function(){return cy.call(this.children,t)}}function dy(t){return this.selectAll(t==null?uy:hy(typeof t=="function"?t:pu(t)))}function fy(t){typeof t!="function"&&(t=fu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&s.push(l);return new qt(r,this._parents)}function gu(t){return new Array(t.length)}function py(){return new qt(this._enter||this._groups.map(gu),this._parents)}function Fr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Fr.prototype={constructor:Fr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function gy(t){return function(){return t}}function my(t,e,n,r,i,o){for(var a=0,s,l=e.length,c=o.length;a<c;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Fr(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function vy(t,e,n,r,i,o,a){var s,l,c=new Map,u=e.length,h=o.length,f=new Array(u),d;for(s=0;s<u;++s)(l=e[s])&&(f[s]=d=a.call(l,l.__data__,s,e)+"",c.has(d)?i[s]=l:c.set(d,l));for(s=0;s<h;++s)d=a.call(t,o[s],s,o)+"",(l=c.get(d))?(r[s]=l,l.__data__=o[s],c.delete(d)):n[s]=new Fr(t,o[s]);for(s=0;s<u;++s)(l=e[s])&&c.get(f[s])===l&&(i[s]=l)}function yy(t){return t.__data__}function _y(t,e){if(!arguments.length)return Array.from(this,yy);var n=e?vy:my,r=this._parents,i=this._groups;typeof t!="function"&&(t=gy(t));for(var o=i.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=r[c],h=i[c],f=h.length,d=by(t.call(u,u&&u.__data__,c,r)),p=d.length,E=s[c]=new Array(p),m=a[c]=new Array(p),b=l[c]=new Array(f);n(u,h,E,m,b,d,e);for(var S=0,_=0,y,g;S<p;++S)if(y=E[S]){for(S>=_&&(_=S+1);!(g=m[_])&&++_<p;);y._next=g||null}}return a=new qt(a,r),a._enter=s,a._exit=l,a}function by(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function wy(){return new qt(this._exit||this._groups.map(gu),this._parents)}function Ey(t,e,n){var r=this.enter(),i=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?o.remove():n(o),r&&i?r.merge(i).order():i}function Ty(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],h=c.length,f=s[l]=new Array(h),d,p=0;p<h;++p)(d=c[p]||u[p])&&(f[p]=d);for(;l<i;++l)s[l]=n[l];return new qt(s,this._parents)}function Sy(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&a.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(a,o),o=a);return this}function Oy(t){t||(t=xy);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],s=a.length,l=i[o]=new Array(s),c,u=0;u<s;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new qt(i,this._parents).order()}function xy(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function My(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Cy(){return Array.from(this)}function $y(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function Ay(){let t=0;for(const e of this)++t;return t}function Ly(){return!this.node()}function Dy(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,s;o<a;++o)(s=i[o])&&t.call(s,s.__data__,o,i);return this}function ky(t){return function(){this.removeAttribute(t)}}function Iy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ry(t,e){return function(){this.setAttribute(t,e)}}function Ny(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Uy(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Py(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Hy(t,e){var n=li(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Iy:ky:typeof e=="function"?n.local?Py:Uy:n.local?Ny:Ry)(n,e))}function mu(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Fy(t){return function(){this.style.removeProperty(t)}}function Vy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function By(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function jy(t,e,n){return arguments.length>1?this.each((e==null?Fy:typeof e=="function"?By:Vy)(t,e,n??"")):gn(this.node(),t)}function gn(t,e){return t.style.getPropertyValue(e)||mu(t).getComputedStyle(t,null).getPropertyValue(e)}function Gy(t){return function(){delete this[t]}}function zy(t,e){return function(){this[t]=e}}function Wy(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function qy(t,e){return arguments.length>1?this.each((e==null?Gy:typeof e=="function"?Wy:zy)(t,e)):this.node()[t]}function vu(t){return t.trim().split(/^|\s+/)}function ea(t){return t.classList||new yu(t)}function yu(t){this._node=t,this._names=vu(t.getAttribute("class")||"")}yu.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function _u(t,e){for(var n=ea(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function bu(t,e){for(var n=ea(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Yy(t){return function(){_u(this,t)}}function Xy(t){return function(){bu(this,t)}}function Zy(t,e){return function(){(e.apply(this,arguments)?_u:bu)(this,t)}}function Ky(t,e){var n=vu(t+"");if(arguments.length<2){for(var r=ea(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Zy:e?Yy:Xy)(n,e))}function Qy(){this.textContent=""}function Jy(t){return function(){this.textContent=t}}function t1(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function e1(t){return arguments.length?this.each(t==null?Qy:(typeof t=="function"?t1:Jy)(t)):this.node().textContent}function n1(){this.innerHTML=""}function r1(t){return function(){this.innerHTML=t}}function i1(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function o1(t){return arguments.length?this.each(t==null?n1:(typeof t=="function"?i1:r1)(t)):this.node().innerHTML}function a1(){this.nextSibling&&this.parentNode.appendChild(this)}function s1(){return this.each(a1)}function l1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function c1(){return this.each(l1)}function u1(t){var e=typeof t=="function"?t:hu(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function h1(){return null}function d1(t,e){var n=typeof t=="function"?t:hu(t),r=e==null?h1:typeof e=="function"?e:ta(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function f1(){var t=this.parentNode;t&&t.removeChild(this)}function p1(){return this.each(f1)}function g1(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function m1(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function v1(t){return this.select(t?m1:g1)}function y1(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _1(t){return function(e){t.call(this,e,this.__data__)}}function b1(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function w1(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function E1(t,e,n){return function(){var r=this.__on,i,o=_1(e);if(r){for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),i.value=e;return}}this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function T1(t,e,n){var r=b1(t+""),i,o=r.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,c=s.length,u;l<c;++l)for(i=0,u=s[l];i<o;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(s=e?E1:w1,i=0;i<o;++i)this.each(s(r[i],e,n));return this}function wu(t,e,n){var r=mu(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function S1(t,e){return function(){return wu(this,t,e)}}function O1(t,e){return function(){return wu(this,t,e.apply(this,arguments))}}function x1(t,e){return this.each((typeof e=="function"?O1:S1)(t,e))}function*M1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}var Eu=[null];function qt(t,e){this._groups=t,this._parents=e}function or(){return new qt([[document.documentElement]],Eu)}function C1(){return this}qt.prototype=or.prototype={constructor:qt,select:ty,selectAll:iy,selectChild:ly,selectChildren:dy,filter:fy,data:_y,enter:py,exit:wy,join:Ey,merge:Ty,selection:C1,order:Sy,sort:Oy,call:My,nodes:Cy,node:$y,size:Ay,empty:Ly,each:Dy,attr:Hy,style:jy,property:qy,classed:Ky,text:e1,html:o1,raise:s1,lower:c1,append:u1,insert:d1,remove:p1,clone:v1,datum:y1,on:T1,dispatch:x1,[Symbol.iterator]:M1};function $1(t){let e;for(;e=t.sourceEvent;)t=e;return t}function mn(t,e){if(t=$1(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}function na(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Tu(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ar(){}var Xn=.7,Vr=1/Xn,dn="\\s*([+-]?\\d+)\\s*",Zn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",he="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",A1=/^#([0-9a-f]{3,8})$/,L1=new RegExp(`^rgb\\(${dn},${dn},${dn}\\)$`),D1=new RegExp(`^rgb\\(${he},${he},${he}\\)$`),k1=new RegExp(`^rgba\\(${dn},${dn},${dn},${Zn}\\)$`),I1=new RegExp(`^rgba\\(${he},${he},${he},${Zn}\\)$`),R1=new RegExp(`^hsl\\(${Zn},${he},${he}\\)$`),N1=new RegExp(`^hsla\\(${Zn},${he},${he},${Zn}\\)$`),ys={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};na(ar,Ve,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_s,formatHex:_s,formatHex8:U1,formatHsl:P1,formatRgb:bs,toString:bs});function _s(){return this.rgb().formatHex()}function U1(){return this.rgb().formatHex8()}function P1(){return Su(this).formatHsl()}function bs(){return this.rgb().formatRgb()}function Ve(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=A1.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ws(e):n===3?new Bt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?mr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?mr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=L1.exec(t))?new Bt(e[1],e[2],e[3],1):(e=D1.exec(t))?new Bt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=k1.exec(t))?mr(e[1],e[2],e[3],e[4]):(e=I1.exec(t))?mr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=R1.exec(t))?Ss(e[1],e[2]/100,e[3]/100,1):(e=N1.exec(t))?Ss(e[1],e[2]/100,e[3]/100,e[4]):ys.hasOwnProperty(t)?ws(ys[t]):t==="transparent"?new Bt(NaN,NaN,NaN,0):null}function ws(t){return new Bt(t>>16&255,t>>8&255,t&255,1)}function mr(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bt(t,e,n,r)}function H1(t){return t instanceof ar||(t=Ve(t)),t?(t=t.rgb(),new Bt(t.r,t.g,t.b,t.opacity)):new Bt}function ho(t,e,n,r){return arguments.length===1?H1(t):new Bt(t,e,n,r??1)}function Bt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}na(Bt,ho,Tu(ar,{brighter(t){return t=t==null?Vr:Math.pow(Vr,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xn:Math.pow(Xn,t),new Bt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bt(He(this.r),He(this.g),He(this.b),Br(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Es,formatHex:Es,formatHex8:F1,formatRgb:Ts,toString:Ts}));function Es(){return`#${Pe(this.r)}${Pe(this.g)}${Pe(this.b)}`}function F1(){return`#${Pe(this.r)}${Pe(this.g)}${Pe(this.b)}${Pe((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ts(){const t=Br(this.opacity);return`${t===1?"rgb(":"rgba("}${He(this.r)}, ${He(this.g)}, ${He(this.b)}${t===1?")":`, ${t})`}`}function Br(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function He(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pe(t){return t=He(t),(t<16?"0":"")+t.toString(16)}function Ss(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ie(t,e,n,r)}function Su(t){if(t instanceof ie)return new ie(t.h,t.s,t.l,t.opacity);if(t instanceof ar||(t=Ve(t)),!t)return new ie;if(t instanceof ie)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new ie(a,s,l,t.opacity)}function V1(t,e,n,r){return arguments.length===1?Su(t):new ie(t,e,n,r??1)}function ie(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}na(ie,V1,Tu(ar,{brighter(t){return t=t==null?Vr:Math.pow(Vr,t),new ie(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xn:Math.pow(Xn,t),new ie(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bt(Ci(t>=240?t-240:t+120,i,r),Ci(t,i,r),Ci(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ie(Os(this.h),vr(this.s),vr(this.l),Br(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Br(this.opacity);return`${t===1?"hsl(":"hsla("}${Os(this.h)}, ${vr(this.s)*100}%, ${vr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Os(t){return t=(t||0)%360,t<0?t+360:t}function vr(t){return Math.max(0,Math.min(1,t||0))}function Ci(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ra=t=>()=>t;function B1(t,e){return function(n){return t+n*e}}function j1(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function G1(t){return(t=+t)==1?Ou:function(e,n){return n-e?j1(e,n,t):ra(isNaN(e)?n:e)}}function Ou(t,e){var n=e-t;return n?B1(t,n):ra(isNaN(t)?e:t)}const jr=(function t(e){var n=G1(e);function r(i,o){var a=n((i=ho(i)).r,(o=ho(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),c=Ou(i.opacity,o.opacity);return function(u){return i.r=a(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function z1(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function W1(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function q1(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=ci(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function Y1(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function re(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function X1(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ci(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var fo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$i=new RegExp(fo.source,"g");function Z1(t){return function(){return t}}function K1(t){return function(e){return t(e)+""}}function xu(t,e){var n=fo.lastIndex=$i.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(t=t+"",e=e+"";(r=fo.exec(t))&&(i=$i.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:re(r,i)})),n=$i.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?K1(l[0].x):Z1(e):(e=l.length,function(c){for(var u=0,h;u<e;++u)s[(h=l[u]).i]=h.x(c);return s.join("")})}function ci(t,e){var n=typeof e,r;return e==null||n==="boolean"?ra(e):(n==="number"?re:n==="string"?(r=Ve(e))?(e=r,jr):xu:e instanceof Ve?jr:e instanceof Date?Y1:W1(e)?z1:Array.isArray(e)?q1:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?X1:re)(t,e)}function Q1(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var xs=180/Math.PI,Mu={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Cu(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*xs,skewX:Math.atan(l)*xs,scaleX:a,scaleY:s}}var yr;function J1(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Mu:Cu(e.a,e.b,e.c,e.d,e.e,e.f)}function t0(t){return t==null||(yr||(yr=document.createElementNS("http://www.w3.org/2000/svg","g")),yr.setAttribute("transform",t),!(t=yr.transform.baseVal.consolidate()))?Mu:(t=t.matrix,Cu(t.a,t.b,t.c,t.d,t.e,t.f))}function $u(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function o(c,u,h,f,d,p){if(c!==h||u!==f){var E=d.push("translate(",null,e,null,n);p.push({i:E-4,x:re(c,h)},{i:E-2,x:re(u,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function a(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:re(c,u)})):u&&h.push(i(h)+"rotate("+u+r)}function s(c,u,h,f){c!==u?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:re(c,u)}):u&&h.push(i(h)+"skewX("+u+r)}function l(c,u,h,f,d,p){if(c!==h||u!==f){var E=d.push(i(d)+"scale(",null,",",null,")");p.push({i:E-4,x:re(c,h)},{i:E-2,x:re(u,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=t(c),u=t(u),o(c.translateX,c.translateY,u.translateX,u.translateY,h,f),a(c.rotate,u.rotate,h,f),s(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(d){for(var p=-1,E=f.length,m;++p<E;)h[(m=f[p]).i]=m.x(d);return h.join("")}}}var e0=$u(J1,"px, ","px)","deg)"),n0=$u(t0,", ",")",")"),vn=0,Hn=0,$n=0,Au=1e3,Gr,Fn,zr=0,Be=0,ui=0,Kn=typeof performance=="object"&&performance.now?performance:Date,Lu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ia(){return Be||(Lu(r0),Be=Kn.now()+ui)}function r0(){Be=0}function Wr(){this._call=this._time=this._next=null}Wr.prototype=Du.prototype={constructor:Wr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ia():+n)+(e==null?0:+e),!this._next&&Fn!==this&&(Fn?Fn._next=this:Gr=this,Fn=this),this._call=t,this._time=n,po()},stop:function(){this._call&&(this._call=null,this._time=1/0,po())}};function Du(t,e,n){var r=new Wr;return r.restart(t,e,n),r}function i0(){ia(),++vn;for(var t=Gr,e;t;)(e=Be-t._time)>=0&&t._call.call(void 0,e),t=t._next;--vn}function Ms(){Be=(zr=Kn.now())+ui,vn=Hn=0;try{i0()}finally{vn=0,a0(),Be=0}}function o0(){var t=Kn.now(),e=t-zr;e>Au&&(ui-=e,zr=t)}function a0(){for(var t,e=Gr,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Gr=n);Fn=t,po(r)}function po(t){if(!vn){Hn&&(Hn=clearTimeout(Hn));var e=t-Be;e>24?(t<1/0&&(Hn=setTimeout(Ms,t-Kn.now()-ui)),$n&&($n=clearInterval($n))):($n||(zr=Kn.now(),$n=setInterval(o0,Au)),vn=1,Lu(Ms))}}function Cs(t,e,n){var r=new Wr;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var s0=Jo("start","end","cancel","interrupt"),l0=[],ku=0,$s=1,go=2,xr=3,As=4,mo=5,Mr=6;function hi(t,e,n,r,i,o){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;c0(t,n,{name:e,index:r,group:i,on:s0,tween:l0,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:ku})}function oa(t,e){var n=se(t,e);if(n.state>ku)throw new Error("too late; already scheduled");return n}function pe(t,e){var n=se(t,e);if(n.state>xr)throw new Error("too late; already running");return n}function se(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function c0(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Du(o,0,n.time);function o(c){n.state=$s,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,h,f,d;if(n.state!==$s)return l();for(u in r)if(d=r[u],d.name===n.name){if(d.state===xr)return Cs(a);d.state===As?(d.state=Mr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[u]):+u<e&&(d.state=Mr,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[u])}if(Cs(function(){n.state===xr&&(n.state=As,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=go,n.on.call("start",t,t.__data__,n.index,n.group),n.state===go){for(n.state=xr,i=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function s(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=mo,1),h=-1,f=i.length;++h<f;)i[h].call(t,u);n.state===mo&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Mr,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function vo(t,e){var n=t.__transition,r,i,o=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){o=!1;continue}i=r.state>go&&r.state<mo,r.state=Mr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}o&&delete t.__transition}}function u0(t){return this.each(function(){vo(this,t)})}function h0(t,e){var n,r;return function(){var i=pe(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function d0(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var o=pe(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function f0(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=se(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?h0:d0)(n,t,e))}function aa(t,e,n){var r=t._id;return t.each(function(){var i=pe(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return se(i,r).value[e]}}function Iu(t,e){var n;return(typeof e=="number"?re:e instanceof Ve?jr:(n=Ve(e))?(e=n,jr):xu)(t,e)}function p0(t){return function(){this.removeAttribute(t)}}function g0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m0(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function v0(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function y0(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function _0(t,e,n){var r,i,o;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=s+"",a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s)))}}function b0(t,e){var n=li(t),r=n==="transform"?n0:Iu;return this.attrTween(t,typeof e=="function"?(n.local?_0:y0)(n,r,aa(this,"attr."+t,e)):e==null?(n.local?g0:p0)(n):(n.local?v0:m0)(n,r,e))}function w0(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function E0(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function T0(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&E0(t,o)),n}return i._value=e,i}function S0(t,e){var n,r;function i(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&w0(t,o)),n}return i._value=e,i}function O0(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=li(t);return this.tween(n,(r.local?T0:S0)(r,e))}function x0(t,e){return function(){oa(this,t).delay=+e.apply(this,arguments)}}function M0(t,e){return e=+e,function(){oa(this,t).delay=e}}function C0(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?x0:M0)(e,t)):se(this.node(),e).delay}function $0(t,e){return function(){pe(this,t).duration=+e.apply(this,arguments)}}function A0(t,e){return e=+e,function(){pe(this,t).duration=e}}function L0(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$0:A0)(e,t)):se(this.node(),e).duration}function D0(t,e){if(typeof e!="function")throw new Error;return function(){pe(this,t).ease=e}}function k0(t){var e=this._id;return arguments.length?this.each(D0(e,t)):se(this.node(),e).ease}function I0(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;pe(this,t).ease=n}}function R0(t){if(typeof t!="function")throw new Error;return this.each(I0(this._id,t))}function N0(t){typeof t!="function"&&(t=fu(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,s=r[i]=[],l,c=0;c<a;++c)(l=o[c])&&t.call(l,l.__data__,c,o)&&s.push(l);return new Oe(r,this._parents,this._name,this._id)}function U0(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l=e[s],c=n[s],u=l.length,h=a[s]=new Array(u),f,d=0;d<u;++d)(f=l[d]||c[d])&&(h[d]=f);for(;s<r;++s)a[s]=e[s];return new Oe(a,this._parents,this._name,this._id)}function P0(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function H0(t,e,n){var r,i,o=P0(e)?oa:pe;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function F0(t,e){var n=this._id;return arguments.length<2?se(this.node(),n).on.on(t):this.each(H0(n,t,e))}function V0(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function B0(){return this.on("end.remove",V0(this._id))}function j0(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ta(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s=r[a],l=s.length,c=o[a]=new Array(l),u,h,f=0;f<l;++f)(u=s[f])&&(h=t.call(u,u.__data__,f,s))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,hi(c[f],e,n,f,c,se(u,n)));return new Oe(o,this._parents,e,n)}function G0(t){var e=this._name,n=this._id;typeof t!="function"&&(t=du(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l=r[s],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=t.call(u,u.__data__,h,l),d,p=se(u,n),E=0,m=f.length;E<m;++E)(d=f[E])&&hi(d,e,n,E,f,p);o.push(f),a.push(u)}return new Oe(o,a,e,n)}var z0=or.prototype.constructor;function W0(){return new z0(this._groups,this._parents)}function q0(t,e){var n,r,i;return function(){var o=gn(this,t),a=(this.style.removeProperty(t),gn(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function Ru(t){return function(){this.style.removeProperty(t)}}function Y0(t,e,n){var r,i=n+"",o;return function(){var a=gn(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function X0(t,e,n){var r,i,o;return function(){var a=gn(this,t),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(t),gn(this,t))),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}function Z0(t,e){var n,r,i,o="style."+e,a="end."+o,s;return function(){var l=pe(this,t),c=l.on,u=l.value[o]==null?s||(s=Ru(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function K0(t,e,n){var r=(t+="")=="transform"?e0:Iu;return e==null?this.styleTween(t,q0(t,r)).on("end.style."+t,Ru(t)):typeof e=="function"?this.styleTween(t,X0(t,r,aa(this,"style."+t,e))).each(Z0(this._id,t)):this.styleTween(t,Y0(t,r,e),n).on("end.style."+t,null)}function Q0(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function J0(t,e,n){var r,i;function o(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Q0(t,a,n)),r}return o._value=e,o}function t_(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,J0(t,e,n??""))}function e_(t){return function(){this.textContent=t}}function n_(t){return function(){var e=t(this);this.textContent=e??""}}function r_(t){return this.tween("text",typeof t=="function"?n_(aa(this,"text",t)):e_(t==null?"":t+""))}function i_(t){return function(e){this.textContent=t.call(this,e)}}function o_(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&i_(i)),e}return r._value=t,r}function a_(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,o_(t))}function s_(){for(var t=this._name,e=this._id,n=Nu(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,c=0;c<s;++c)if(l=a[c]){var u=se(l,e);hi(l,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Oe(r,this._parents,t,n)}function l_(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){--i===0&&o()}};n.each(function(){var c=pe(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),c.on=e}),i===0&&o()})}var c_=0;function Oe(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Nu(){return++c_}var ye=or.prototype;Oe.prototype={constructor:Oe,select:j0,selectAll:G0,selectChild:ye.selectChild,selectChildren:ye.selectChildren,filter:N0,merge:U0,selection:W0,transition:s_,call:ye.call,nodes:ye.nodes,node:ye.node,size:ye.size,empty:ye.empty,each:ye.each,on:F0,attr:b0,attrTween:O0,style:K0,styleTween:t_,text:r_,textTween:a_,remove:B0,tween:f0,delay:C0,duration:L0,ease:k0,easeVarying:R0,end:l_,[Symbol.iterator]:ye[Symbol.iterator]};function Uu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var u_={time:null,delay:0,duration:250,ease:Uu};function h_(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function d_(t){var e,n;t instanceof Oe?(e=t._id,t=t._name):(e=Nu(),(n=u_).time=ia(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],s=a.length,l,c=0;c<s;++c)(l=a[c])&&hi(l,t,e,c,a,n||h_(l,e));return new Oe(r,this._parents,t,e)}or.prototype.interrupt=u0;or.prototype.transition=d_;function f_(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function qr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function yn(t){return t=qr(Math.abs(t)),t?t[1]:NaN}function p_(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function g_(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var m_=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Yr(t){if(!(e=m_.exec(t)))throw new Error("invalid format: "+t);var e;return new sa({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Yr.prototype=sa.prototype;function sa(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}sa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function v_(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Pu;function y_(t,e){var n=qr(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Pu=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+qr(t,Math.max(0,e+o-1))[0]}function Ls(t,e){var n=qr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ds={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:f_,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Ls(t*100,e),r:Ls,s:y_,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ks(t){return t}var Is=Array.prototype.map,Rs=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function __(t){var e=t.grouping===void 0||t.thousands===void 0?ks:p_(Is.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?ks:g_(Is.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(h){h=Yr(h);var f=h.fill,d=h.align,p=h.sign,E=h.symbol,m=h.zero,b=h.width,S=h.comma,_=h.precision,y=h.trim,g=h.type;g==="n"?(S=!0,g="g"):Ds[g]||(_===void 0&&(_=12),y=!0,g="g"),(m||f==="0"&&d==="=")&&(m=!0,f="0",d="=");var w=E==="$"?n:E==="#"&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",M=E==="$"?r:/[%p]/.test(g)?a:"",$=Ds[g],G=/[defgprs%]/.test(g);_=_===void 0?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function F(C){var tt=w,V=M,q,nt,W;if(g==="c")V=$(C)+V,C="";else{C=+C;var Q=C<0||1/C<0;if(C=isNaN(C)?l:$(Math.abs(C),_),y&&(C=v_(C)),Q&&+C==0&&p!=="+"&&(Q=!1),tt=(Q?p==="("?p:s:p==="-"||p==="("?"":p)+tt,V=(g==="s"?Rs[8+Pu/3]:"")+V+(Q&&p==="("?")":""),G){for(q=-1,nt=C.length;++q<nt;)if(W=C.charCodeAt(q),48>W||W>57){V=(W===46?i+C.slice(q+1):C.slice(q))+V,C=C.slice(0,q);break}}}S&&!m&&(C=e(C,1/0));var U=tt.length+C.length+V.length,X=U<b?new Array(b-U+1).join(f):"";switch(S&&m&&(C=e(X+C,X.length?b-V.length:1/0),X=""),d){case"<":C=tt+C+V+X;break;case"=":C=tt+X+C+V;break;case"^":C=X.slice(0,U=X.length>>1)+tt+C+V+X.slice(U);break;default:C=X+tt+C+V;break}return o(C)}return F.toString=function(){return h+""},F}function u(h,f){var d=c((h=Yr(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(yn(f)/3)))*3,E=Math.pow(10,-p),m=Rs[8+p/3];return function(b){return d(E*b)+m}}return{format:c,formatPrefix:u}}var _r,Hu,Fu;b_({thousands:",",grouping:[3],currency:["$",""]});function b_(t){return _r=__(t),Hu=_r.format,Fu=_r.formatPrefix,_r}function w_(t){return Math.max(0,-yn(Math.abs(t)))}function E_(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yn(e)/3)))*3-yn(Math.abs(t)))}function T_(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,yn(e)-yn(t))+1}function di(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const Ns=Symbol("implicit");function la(){var t=new ps,e=[],n=[],r=Ns;function i(o){let a=t.get(o);if(a===void 0){if(r!==Ns)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new ps;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return la(e,n).unknown(r)},di.apply(i,arguments),i}function S_(t){return function(){return t}}function O_(t){return+t}var Us=[0,1];function ln(t){return t}function yo(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:S_(isNaN(e)?NaN:.5)}function x_(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function M_(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=yo(i,r),o=n(a,o)):(r=yo(r,i),o=n(o,a)),function(s){return o(r(s))}}function C_(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=yo(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var l=cu(t,s,1,r)-1;return o[l](i[l](s))}}function Vu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function $_(){var t=Us,e=Us,n=ci,r,i,o,a=ln,s,l,c;function u(){var f=Math.min(t.length,e.length);return a!==ln&&(a=x_(t[0],t[f-1])),s=f>2?C_:M_,l=c=null,h}function h(f){return f==null||isNaN(f=+f)?o:(l||(l=s(t.map(r),e,n)))(r(a(f)))}return h.invert=function(f){return a(i((c||(c=s(e,t.map(r),re)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,O_),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=Q1,u()},h.clamp=function(f){return arguments.length?(a=f?!0:ln,u()):a!==ln},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(o=f,h):o},function(f,d){return r=f,i=d,u()}}function Bu(){return $_()(ln,ln)}function A_(t,e,n,r){var i=co(t,e,n),o;switch(r=Yr(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=E_(i,a))&&(r.precision=o),Fu(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=T_(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=w_(i))&&(r.precision=o-(r.type==="%")*2);break}}return Hu(r)}function L_(t){var e=t.domain;return t.ticks=function(n){var r=e();return uu(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return A_(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],l,c,u=10;for(s<a&&(c=a,a=s,s=c,c=i,i=o,o=c);u-- >0;){if(c=pn(a,s,n),c===l)return r[i]=a,r[o]=s,e(r);if(c>0)a=Math.floor(a/c)*c,s=Math.ceil(s/c)*c;else if(c<0)a=Math.ceil(a*c)/c,s=Math.floor(s*c)/c;else break;l=c}return t},t}function ju(){var t=Bu();return t.copy=function(){return Vu(t,ju())},di.apply(t,arguments),L_(t)}function Vn(t,e,n){this.k=t,this.x=e,this.y=n}Vn.prototype={constructor:Vn,scale:function(t){return t===1?this:new Vn(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Vn(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Vn.prototype;const Wt="cds",we={opacity:{unselected:.05,selected:.4}},Ps={duration:1e3,ease:Uu},D_={circles:{fillOpacity:.3,hover:{stroke:"#FFF"}},padding:{mainGroup:4,children:2},depth:2},k_={pairingOptions:{"1-color":4,"2-color":5,"3-color":5,"4-color":3,"5-color":2,"14-color":1}},I_={defaultBins:10},Mt={items:{status:{ACTIVE:1,DISABLED:0},horizontalSpace:12,verticalSpace:24,textYOffset:8,spaceAfter:4},checkbox:{radius:6.5},radius:{iconData:[{cx:7,cy:7,r:6.5},{cx:7,cy:10,r:3.5}],fill:null,stroke:"#8c8c8c"},line:{yPosition:6,width:24,strokeWidth:1.4,fill:null,stroke:"#999999"},area:{width:24,height:14,fill:"#6f6f6f",stroke:null},size:{iconData:[{width:23,height:12},{width:13,height:6}],fill:null,stroke:"#8D8D8D"},quartile:{iconData:[{x:0,y:0,width:24,height:13},{x:11,y:4,width:1,height:4}]},zoom:{iconData:[{x:0,y:0,width:12,height:12}],color:"#8D8D8D"},color:{barWidth:300,barHeight:8,axisYTranslation:10}},Ai={opacity:{unselected:.3,selected:1}},$t={statusBar:{paddingRight:5},status:{indicatorSize:16,paddingLeft:15},total:{paddingLeft:36,paddingRight:24},height:{default:8,proportional:16},dividerWidth:2},Hs={default:{size:24}},Fs={defaultOffset:4,horizontalOffset:10},Vs={default:{duration:300},pie_slice_mouseover:{duration:100},pie_slice_mouseout:{duration:100},pie_chart_titles:{duration:375},graph_element_mouseover_fill_update:{duration:100},graph_element_mouseout_fill_update:{duration:100}},Bs={height:{[Nr.GRAPH_VIEW]:32,[Nr.SLIDER_VIEW]:10},spacerHeight:8},R_=[{type:St.RADIUS,name:"Radius"},{type:St.AREA,name:"Poor area"},{type:St.AREA,name:"Satisfactory area"},{type:St.AREA,name:"Great area"},{type:St.QUARTILE,name:"Quartiles"}],cn={type:ue.END_LINE,threshold:16,numCharacter:14},N_={code:typeof navigator<"u"&&navigator?.language||"en-US",number:(t,e=navigator?.language||"en-US")=>t.toLocaleString(e),date:(t,e=navigator?.language||"en-US",n={},r=null)=>r||t.toLocaleDateString(e,n),time:(t,e=navigator?.language||"en-US",n={},r=null)=>r||t.toLocaleTimeString(e,n),optionsObject:{"15seconds":{primary:{"MMM d, pp":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"MMM d, h:mm:ss.SSS a":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},secondary:{pp:{hour:"numeric",minute:"2-digit",second:"2-digit",hourCycle:"h12"},"h:mm:ss.SSS a":{hour:"numeric",minute:"2-digit",fractionalSecondDigits:3,hourCycle:"h12"}},type:"time"},minute:{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},"30minutes":{primary:{"MMM d, p":{month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hourCycle:"h12"}},secondary:{p:{hour:"numeric",minute:"2-digit",hourCycle:"h12"}},type:"time"},hourly:{primary:{"MMM d, hh a":{month:"short",day:"numeric",hour:"2-digit",hourCycle:"h12"}},secondary:{"hh a":{hour:"2-digit",hourCycle:"h12"}},type:"time"},daily:{primary:{"MMM d":{month:"short",day:"numeric"}},secondary:{d:{day:"numeric"}},type:"date"},weekly:{primary:{"eee, MMM d":{weekday:"short",month:"short",day:"numeric"}},secondary:{eee:{weekday:"short"}},type:"date"},monthly:{primary:{"MMM yyyy":{month:"short",year:"numeric"}},secondary:{MMM:{month:"short"}},type:"date"},quarterly:{primary:{},secondary:{},type:"date"},yearly:{primary:{yyyy:{year:"numeric"}},secondary:{yyyy:{year:"numeric"}},type:"date"}},translations:{group:"Group",total:"Total",meter:{title:""},tabularRep:{title:"Tabular representation",downloadAsCSV:"Download as CSV"},toolbar:{exportAsCSV:"Export to CSV",exportAsJPG:"Export to JPG",exportAsPNG:"Export to PNG",zoomIn:"Zoom in",zoomOut:"Zoom out",resetZoom:"Reset zoom",moreOptions:"More options",makeFullScreen:"Make fullscreen",exitFullScreen:"Exit fullscreen",showAsTable:"Show as table"}}},U_={enabled:!0,position:wc.BOTTOM,clickable:!0,truncation:cn,alignment:Se.LEFT,order:null,additionalItems:[]},P_={x:{enabled:!0,numberOfTicks:15,alignWithAxisTicks:!1},y:{enabled:!0,numberOfTicks:5,alignWithAxisTicks:!1}},H_={enabled:!0},Gu={enabled:!0,showTotal:!0,truncation:cn,groupLabel:"Group"},zu={top:{visible:!0,includeZero:!0,truncation:cn},bottom:{visible:!0,includeZero:!0,truncation:cn},left:{visible:!0,includeZero:!0,truncation:cn},right:{visible:!0,includeZero:!0,truncation:cn}},fi={addSpaceOnEdges:1,showDayName:!1,localeObject:zd,timeIntervalFormats:{"15seconds":{primary:"MMM d, pp",secondary:"pp"},minute:{primary:"MMM d, p",secondary:"p"},"30minutes":{primary:"MMM d, p",secondary:"p"},hourly:{primary:"MMM d, hh a",secondary:"hh a"},daily:{primary:"MMM d",secondary:"d"},weekly:{primary:"eee, MMM d",secondary:"eee"},monthly:{primary:"MMM yyyy",secondary:"MMM"},quarterly:{primary:"QQQ ''yy",secondary:"QQQ"},yearly:{primary:"yyyy",secondary:"yyyy"}}};let Wu=!1;try{Wu=typeof document<"u"&&(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}catch(t){console.warn("Fullscreen capabilities check failed: ",t.message)}const Ut={width:null,height:null,resizable:!0,theme:bc.WHITE,tooltip:Gu,legend:U_,locale:N_,style:{prefix:"cc"},data:{groupMapsTo:"group",loading:!1,selectedGroups:[]},color:{scale:null,pairing:{numberOfVariants:null,option:1},gradient:{enabled:!1}},toolbar:{enabled:!0,numberOfIcons:3,controls:[{type:at.SHOW_AS_DATATABLE},...Wu?[{type:at.MAKE_FULLSCREEN}]:[],{type:at.EXPORT_CSV},{type:at.EXPORT_PNG},{type:at.EXPORT_JPG}]}},F_=K({},Ut,{thematic:{projection:Oc.geoNaturalEarth1}}),pi=K({},Ut,{axes:zu,timeScale:fi,grid:P_,ruler:H_,zoomBar:{zoomRatio:.4,minZoomRatio:.01,top:{enabled:!1,type:Nr.GRAPH_VIEW}}}),je=K({},pi,{bars:{maxWidth:16,spacingFactor:.25},timeScale:K(fi,{addSpaceOnEdges:1})});K({},je,{});K({},je,{});K({},je,{bars:K({},je.bars,{dividerSize:1.5})});K({},je,{});const V_=K({},pi,{points:{radius:4,fillOpacity:.3,filled:!0,enabled:!0}}),B_=K({},V_,{points:{radius:3,filled:!1,enabled:!0}});K({},B_,{timeScale:K(fi,{addSpaceOnEdges:0})});K({},pi,{bubble:{radiusMapsTo:"radius",radiusLabel:"Radius",radiusRange:t=>{const e=Math.min(t.width,t.height);return[e*3/400,e*25/400]},fillOpacity:.2,enabled:!0},points:{filled:!0},legend:{additionalItems:[{type:St.RADIUS,name:"Radius"}]}});K({},pi,{bullet:{performanceAreaTitles:["Poor","Satisfactory","Great"]},grid:{x:{enabled:!1},y:{enabled:!1}},legend:{additionalItems:[{type:St.AREA,name:"Poor area"},{type:St.AREA,name:"Satisfactory area"},{type:St.AREA,name:"Great area"},{type:St.QUARTILE,name:"Quartiles"}]}});K({},je,{bars:{dividerSize:1.5},timeScale:K(fi,{addSpaceOnEdges:0})});K({},Ut,{tooltip:K({},Gu,{wordLabel:"Word",valueLabel:"Value"}),wordCloud:{fontSizeMapsTo:"value",fontSizeRange:t=>{const e=Math.min(t.width,t.height);return[e*20/400,e*75/400]},wordMapsTo:"word"}});const j_=K({},Ut,{pie:{labels:{formatter:null,enabled:!0},alignment:Se.LEFT,sortFunction:null,valueMapsTo:"value"}});K({},Ut,{legend:{enabled:!1},gauge:{type:Tc.SEMI,arcWidth:16,deltaArrow:{size:t=>t/8,enabled:!0},showPercentageSymbol:!0,status:null,numberSpacing:10,deltaFontSize:t=>t/8,valueFontSize:t=>t/2.5,alignment:Se.LEFT}});K({},j_,{donut:{center:{numberFontSize:t=>`${Math.min(t/100*24,24)}px`,titleFontSize:t=>`${Math.min(t/100*15,15)}px`,titleYPosition:t=>Math.min(t/80*20,20)},alignment:Se.LEFT}});const qu=K({},Ut,{legend:{enabled:!1,clickable:!1},meter:{showLabels:!0,proportional:null,statusBar:{percentageIndicator:{enabled:!0}}}}),G_=K({},qu,{legend:{enabled:!0}});K({},Ut,{radar:{axes:{angle:"key",value:"value"},alignment:Se.LEFT},tooltip:{gridline:{enabled:!0}}});K({},je,{comboChartTypes:[]});K({tree:{type:Ec.TREE}},Ut,{});K({},Ut,{data:K(Ut.data,{groupMapsTo:"name"})});K({},Ut,D_,{data:K(Ut.data,{groupMapsTo:"name"})});K({},Ut,{alluvial:{data:K(Ut.data,{groupMapsTo:"source"}),nodeAlignment:Se.CENTER,nodePadding:24,monochrome:!1,nodes:[]}});K({},Ut,{axes:zu,heatmap:{divider:{state:Sc.AUTO},colorLegend:{type:"linear"}}});K({},F_,{choropleth:{colorLegend:{type:"linear"}}});const js={meterChart:qu,proportionalMeterChart:G_};function z_(t,e,n){let r=null;return function(...i){const o=this;o.mousePosition=mn(i[0],n),clearTimeout(r),r=setTimeout(function(){t.apply(o,i)},e)}}function _o(t,e,n){if(n>t.length)return t;if(e===ue.MID_LINE)return t.substr(0,n/2)+"..."+t.substr(-n/2);if(e===ue.FRONT_LINE)return"..."+t.substr(-n);if(e===ue.END_LINE)return t.substr(0,n)+"..."}function W_(t,e){const n=T(t,"legend","additionalItems"),r=T(e,"legend","additionalItems");if(n&&r){const i=r.map(s=>s.type),o=n.map(s=>s.type),a=R_.filter(s=>o.includes(s.type)&&!i.includes(s.type));t.legend.additionalItems=a,e.legend.additionalItems=Uv(a,r,"name")}}const T=(t,...e)=>{let n=t;if(n){for(const r of e)if(n[r]!==null&&n[r]!==void 0)n=n[r];else return null;return n}return null},Yu=(t,e)=>e===de.HORIZONTAL?{y0:t.x0,y1:t.x1,x0:t.y0,x1:t.y1}:t,ca=(t,e)=>{const{x0:n,x1:r,y0:i,y1:o}=Yu(t,e);return`M${n},${i}L${n},${o}L${r},${o}L${r},${i}L${n},${i}`};function Cr(t,e,n){return n===de.VERTICAL?[t,e]:[e,t]}function Gs(t){return t===void 0?"":t.toISOString()}var wt=(t=>(t.GRAPHICS_DOCUMENT="graphics-document",t.GRAPHICS_OBJECT="graphics-object",t.GRAPHICS_SYMBOL="graphics-symbol",t.GROUP="group",t.DOCUMENT="document",t.CHECKBOX="checkbox",t.BUTTON="button",t.MENU="menu",t.MENU_ITEM="menuitem",t.IMG="img",t))(wt||{});function q_(t,e){return t&&ou(t,e,nr)}function Y_(t,e){return function(n,r){if(n==null)return n;if(!er(n))return t(n,r);for(var i=n.length,o=-1,a=Object(n);++o<i&&r(a[o],o,a)!==!1;);return n}}var Xu=Y_(q_);function yt(t){return function(){return t}}function ua(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function X_(t,e,n,r){for(var i=-1,o=t==null?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Z_(t,e,n,r){return Xu(t,function(i,o,a){e(r,i,n(i),a)}),r}function K_(t,e){return function(n,r){var i=Nt(n)?X_:Z_,o={};return i(n,t,Ko(r),o)}}function Q_(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}var J_=Object.prototype,tb=J_.hasOwnProperty,eb=K_(function(t,e,n){tb.call(t,n)?t[n].push(e):ri(t,n,[e])});function nb(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function rb(t){return t}var ib=Array.prototype,ob=ib.slice;function Li(t){return()=>t}function ab(t,e,n){let r;for(;;){const i=pn(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function sb(t){return Math.max(1,Math.ceil(Math.log(nb(t))/Math.LN2)+1)}function lb(){var t=rb,e=Mi,n=sb;function r(i){Array.isArray(i)||(i=Array.from(i));var o,a=i.length,s,l,c=new Array(a);for(o=0;o<a;++o)c[o]=t(i[o],o,i);var u=e(c),h=u[0],f=u[1],d=n(c,h,f);if(!Array.isArray(d)){const _=f,y=+d;if(e===Mi&&([h,f]=ab(h,f,y)),d=uu(h,f,y),d[0]<=h&&(l=pn(h,f,y)),d[d.length-1]>=f)if(_>=f&&e===Mi){const g=pn(h,f,y);isFinite(g)&&(g>0?f=(Math.floor(f/g)+1)*g:g<0&&(f=(Math.ceil(f*-g)+1)/-g))}else d.pop()}for(var p=d.length,E=0,m=p;d[E]<=h;)++E;for(;d[m-1]>f;)--m;(E||m<p)&&(d=d.slice(E,m),p=m-E);var b=new Array(p+1),S;for(o=0;o<=p;++o)S=b[o]=[],S.x0=o>0?d[o-1]:h,S.x1=o<p?d[o]:f;if(isFinite(l)){if(l>0)for(o=0;o<a;++o)(s=c[o])!=null&&h<=s&&s<=f&&b[Math.min(p,Math.floor((s-h)/l))].push(i[o]);else if(l<0){for(o=0;o<a;++o)if((s=c[o])!=null&&h<=s&&s<=f){const _=Math.floor((h-s)*l);b[Math.min(p,_+(d[_]<=s))].push(i[o])}}}else for(o=0;o<a;++o)(s=c[o])!=null&&h<=s&&s<=f&&b[cu(d,s,0,p)].push(i[o]);return b}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:Li(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:Li([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:Li(Array.isArray(i)?ob.call(i):i),r):n},r}function zs(t,e){if((a=t.length)>1)for(var n=1,r,i,o=t[e[0]],a,s=o.length;n<a;++n)for(i=o,o=t[e[n]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ws(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function cb(t,e){return t[e]}function ub(t){const e=[];return e.key=t,e}function Di(){var t=yt([]),e=Ws,n=zs,r=cb;function i(o){var a=Array.from(t.apply(this,arguments),ub),s,l=a.length,c=-1,u;for(const h of o)for(s=0,++c;s<l;++s)(a[s][c]=[0,+r(h,a[s].key,c,o)]).data=h;for(s=0,u=ua(e(a));s<l;++s)a[u[s]].index=s;return n(a,u),a}return i.keys=function(o){return arguments.length?(t=typeof o=="function"?o:yt(Array.from(o)),i):t},i.value=function(o){return arguments.length?(r=typeof o=="function"?o:yt(+o),i):r},i.order=function(o){return arguments.length?(e=o==null?Ws:typeof o=="function"?o:yt(Array.from(o)),i):e},i.offset=function(o){return arguments.length?(n=o??zs,i):n},i}function hb(t,e){if((l=t.length)>0)for(var n,r=0,i,o,a,s,l,c=t[e[0]].length;r<c;++r)for(a=s=0,n=0;n<l;++n)(o=(i=t[e[n]][r])[1]-i[0])>0?(i[0]=a,i[1]=a+=o):o<0?(i[1]=s,i[0]=s+=o):(i[0]=0,i[1]=o)}function db(t){const e=t.trim();return["=","+","-","@","	","\r"].includes(e.charAt(0))?`${e}`:/[,\"\n]/.test(e)?`"${e}"`:e}let Zu=class{constructor(e){this.state={options:{}},this.colorScale={},this.colorClassNames={},this.services=e}formatTable({headers:e,cells:n}){const r=this.getOptions(),{code:i,date:o,number:a}=T(r,"locale"),s=T(r,"tabularRepModal","tableHeadingFormatter"),l=T(r,"tabularRepModal","tableCellFormatter"),{cartesianScales:c}=this.services,u=c?.getDomainAxisScaleType();let h;return u===be.TIME&&(h=f=>o(f,i,{month:"short",day:"numeric",year:"numeric"})),[typeof s=="function"?s(e):e,...typeof l=="function"?l(n):n.map(f=>{h&&(f[1]=h(f[1]));for(const d in f){const p=f[d];typeof p=="number"&&(f[d]=a(p,i))}return f})]}getAllDataFromDomain(e){if(!this.getData())return null;const n=this.getOptions();let r=this.getData();const i=this.getDataGroups(),{groupMapsTo:o}=T(n,"data"),a=T(n,"axes");return e&&(r=r.filter(s=>e.includes(s[o]))),a&&Object.keys(a).forEach(s=>{const l=a[s].mapsTo,c=a[s].scaleType;if((c===be.LINEAR||c===be.LOG)&&(r=r.map(u=>({...u,[l]:u[l]===null?u[l]:Number(u[l])}))),l&&a[s].domain)if(c===be.LABELS)r=r.filter(u=>a[s].domain.includes(u[l]));else{const[u,h]=a[s].domain;r=r.filter(f=>!(l in f)||f[l]>=u&&f[l]<=h)}}),r.filter(s=>i.find(l=>l.name===s[o]))}getDisplayData(e){if(!this.get("data"))return null;const{ACTIVE:n}=Mt.items.status,r=this.getDataGroups(e),{groupMapsTo:i}=this.getOptions().data;return this.getAllDataFromDomain(e).filter(o=>r.find(a=>a.name===o[i]&&a.status===n))}getData(){return this.get("data")}isDataEmpty(){return!this.getData().length}setData(e){const n=this.sanitize(io(e)),r=this.generateDataGroups(n);return this.set({data:n,dataGroups:r}),n}getDataGroups(e){return T(this.getOptions(),"data","loading")?[]:e?this.get("dataGroups").filter(n=>e.includes(n.name)):this.get("dataGroups")}getActiveDataGroups(e){const{ACTIVE:n}=Mt.items.status;return this.getDataGroups(e).filter(r=>r.status===n)}getDataGroupNames(e){return this.getDataGroups(e).map(n=>n.name)}getActiveDataGroupNames(e){return this.getActiveDataGroups(e).map(n=>n.name)}aggregateBinDataByGroup(e){return eb(e,"group")}getBinConfigurations(){const e=this.getDisplayData(),n=this.getOptions(),r=this.services.cartesianScales.getMainXAxisPosition(),i=this.services.cartesianScales.getDomainIdentifier(),o=n.axes[r],{groupMapsTo:a}=n.data,{bins:s=I_.defaultBins}=o,l=Array.isArray(s),c=lb().value(d=>d[i]).thresholds(s)(e);if(l)c[c.length-1].x1=s[s.length-1];else{const d=c[0].x1-c[0].x0;c[c.length-1].x1=+c[c.length-1].x0+d}const u=l?[s[0],s[s.length-1]]:[c[0].x0,c[c.length-1].x1],h=Array.from(new Set(e.map(d=>d[a]))),f=[];return c.forEach(d=>{const p=`${d.x0}-${d.x1}`,E=this.aggregateBinDataByGroup(d);h.forEach(m=>{f.push({group:m,key:p,value:E[m]||0,bin:d.x0})})}),{bins:c,binsDomain:u}}getBinnedStackedData(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this.getActiveDataGroupNames(),{bins:i}=this.getBinConfigurations(),o=this.getDataValuesGroupedByKeys({bins:i});return Di().keys(r)(o).map((a,s)=>Object.keys(a).filter(l=>!isNaN(l)).map(l=>{const c=a[l];return c[n]=r[s],c}))}getGroupedData(e){const n=this.getDisplayData(e),r={},{groupMapsTo:i}=this.getOptions().data;return n.map(o=>{const a=o[i];r[a]!==null&&r[a]!==void 0?r[a].push(o):r[a]=[o]}),Object.keys(r).map(o=>({name:o,data:r[o]}))}getStackKeys({bins:e=null,groups:n=null}={bins:null,groups:null}){const r=this.getOptions(),i=this.getDisplayData(n);let o;e?o=e.map(l=>`${l.x0}:${l.x1}`):o=lo(i.map(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return l[c]instanceof Date?Gs(l[c]):l[c]&&typeof l[c].toString=="function"?l[c].toString():l[c]}));const a=this.services.cartesianScales.domainAxisPosition,s=r.axes[a].scaleType;return s===be.TIME?o.sort((l,c)=>{const u=new Date(l),h=new Date(c);return u-h}):(s===be.LOG||s===be.LINEAR)&&o.sort((l,c)=>l-c),o}getDataValuesGroupedByKeys({bins:e=null,groups:n=null}){const r=this.getOptions(),{groupMapsTo:i}=r.data,o=this.getDisplayData(n),a=this.getDataGroupNames(),s=this.getStackKeys({bins:e,groups:n});return e?s.map(l=>{const[c,u]=l.split(":"),h={x0:c,x1:u},f=e.find(d=>d.x0.toString()===c.toString());return a.forEach(d=>{h[d]=f.filter(p=>p[i]===d).length}),h}):s.map(l=>{const c={sharedStackKey:l};return a.forEach(u=>{const h=o.find(d=>{const p=this.services.cartesianScales.getDomainIdentifier(d);return d[i]===u&&Object.prototype.hasOwnProperty.call(d,p)&&(d[p]instanceof Date?Gs(d[p])===l:d[p].toString()===l)}),f=this.services.cartesianScales.getRangeIdentifier(c);c[u]=h?h[f]:null}),c})}getStackedData({percentage:e=!1,groups:n=null,divergent:r=!1}){const i=this.getOptions(),{groupMapsTo:o}=i.data,a=this.getActiveDataGroupNames(n),s=this.getDataValuesGroupedByKeys({groups:n});if(e){const l=Q_(s.map(c=>[c.sharedStackKey,0]));s.forEach(c=>{a.forEach(u=>{l[c.sharedStackKey]+=c[u]})}),s.forEach(c=>{a.forEach(u=>{const h=l[c.sharedStackKey];l[c.sharedStackKey]?c[u]=c[u]/h*100:c[u]=0})})}return(r?Di().offset(hb):Di()).keys(a)(s).map((l,c)=>Object.keys(l).filter(u=>!isNaN(u)).map(u=>{const h=l[u];return h[o]=a[c],h}))}getOptions(){return this.state.options}set(e,n){this.state=Object.assign({},this.state,e);const r=Object.assign({skipUpdate:!1,animate:!0},n);r.skipUpdate||this.update(r.animate)}get(e){return e?this.state[e]:this.state}setOptions(e){const n=this.getOptions();W_(n,e),this.set({options:K(n,e)})}update(e=!0){this.getDisplayData()&&(this.updateAllDataGroups(),this.setCustomColorScale(),this.setColorClassNames(),this.services.events.dispatchEvent(O.Model.UPDATE,{animate:e}))}toggleDataLabel(e){const{ACTIVE:n,DISABLED:r}=Mt.items.status,i=this.getDataGroups(),o=i.some(c=>c.status===r),a=i.filter(c=>c.status===n);if(o)if(a.length===1&&a[0].name===e)i.forEach((c,u)=>{i[u].status=n});else{const c=i.findIndex(u=>u.name===e);i[c].status=i[c].status===r?n:r}else i.forEach((c,u)=>{i[u].status=c.name===e?n:r});const s=i.filter(c=>c.status===n),l=this.getOptions();i.some(c=>c.status===r)?l.data.selectedGroups=s.map(c=>c.name):l.data.selectedGroups=[],this.services.events.dispatchEvent(O.Legend.ITEMS_UPDATE,{dataGroups:i}),this.set({dataGroups:i})}getIsFilled(e,n,r,i){const o=this.getOptions();return o.getIsFilled?o.getIsFilled(e,n,r,i):i}getFillColor(e,n,r){const i=this.getOptions(),o=T(this.colorScale,e);return i.getFillColor?i.getFillColor(e,n,r,o):o}getStrokeColor(e,n,r){const i=this.getOptions(),o=T(this.colorScale,e);return i.getStrokeColor?i.getStrokeColor(e,n,r,o):o}isUserProvidedColorScaleValid(){const e=T(this.getOptions(),"color","scale"),n=this.getDataGroups();return e==null||Object.keys(e).length==0?!1:n.some(r=>Object.keys(e).includes(r.name))}getColorClassName(e){const n=this.colorClassNames(e.dataGroupName);let r=e.originalClassName;return e.classNameTypes.forEach(i=>r=e.originalClassName?`${r} ${i}-${n}`:`${i}-${n}`),r||""}getStatus(){return null}getAllDataGroupsNames(){return this.allDataGroups}transformToTabularData(e){console.warn("We've updated the charting data format to be tabular by default. The current format you're using is deprecated and will be removed in v1.0, read more here https://charts.carbondesignsystem.com/");const n=[],{datasets:r,labels:i}=e;return r.forEach(o=>{o.data.forEach((a,s)=>{let l;const c=T(o,"label");if(c===null){const h=T(i,s);h?l=h:l="Ungrouped"}else l=c;const u={group:l,key:i[s]};isNaN(a)?(u.value=a.value,u.date=a.date):u.value=a,n.push(u)})}),n}getTabularDataArray(){return[]}exportToCSV(){const e=this.getTabularDataArray().map(o=>o.map(a=>`"${(a==="&ndash;"?"":a).split(/[,;'"`]/).map(s=>db(s)).join("")}"`)).map(o=>o.join(",")).join(`
`),n=this.getOptions();let r="myChart";const i=T(n,"fileDownload","fileName");typeof i=="function"?r=i("csv"):typeof i=="string"&&(r=i),this.services.files.downloadCSV(e,`${r}.csv`)}getTabularData(e){return Array.isArray(e)?e:this.transformToTabularData(e)}sanitize(e){return e=this.getTabularData(e),e}updateAllDataGroups(){this.allDataGroups?this.getDataGroupNames().forEach(e=>{this.allDataGroups.indexOf(e)===-1&&this.allDataGroups.push(e)}):this.allDataGroups=this.getDataGroupNames()}generateDataGroups(e){const{groupMapsTo:n}=this.getOptions().data,{ACTIVE:r,DISABLED:i}=Mt.items.status,o=this.getOptions(),a=lo(e.map(l=>l[n]));o.data.selectedGroups.length&&(o.data.selectedGroups.every(l=>a.includes(l))||(o.data.selectedGroups=[]));const s=l=>!o.data.selectedGroups.length||o.data.selectedGroups.includes(l)?r:i;return a.map(l=>({name:l,status:s(l)}))}setCustomColorScale(){if(!this.isUserProvidedColorScaleValid())return;const e=this.getOptions(),n=T(e,"color","scale");Object.keys(n).forEach(r=>{this.allDataGroups.includes(r)||console.warn(`"${r}" does not exist in data groups.`)}),this.allDataGroups.filter(r=>n[r]).forEach(r=>this.colorScale[r]=n[r])}setColorClassNames(){const e=T(this.getOptions(),"color","pairing");let n=T(e,"numberOfVariants");(!n||n<this.allDataGroups.length)&&(n=this.allDataGroups.length);let r=T(e,"option");const i=k_.pairingOptions,o=n>5?14:n,a=`${o}-color`;r=r<=i[a]?r:1;const s=this.allDataGroups.map((l,c)=>`${o}-${r}-${c%14+1}`);this.colorClassNames=la().range(s).domain(this.allDataGroups)}};class fb extends Zu{constructor(e){super(e)}getMaximumDomain(e){return e.reduce((n,r)=>n+r.value,0)}getFillColor(e){const n=this.getOptions(),r=T(n,"color","scale"),i=this.getStatus();return r||!i?super.getFillColor(e):null}getStatus(){const e=this.getOptions(),n=T(this.getDisplayData()),r=n?.reduce((a,s)=>a+s.value,0)??0,i=T(e,"meter","proportional")?r:r>100?100:r,o=T(e,"meter","status","ranges");if(o){const a=o.filter(s=>s.range[0]<=i&&i<=s.range[1]);if(a.length>0)return a[0].status}return null}getTabularDataArray(){const e=this.getDisplayData(),n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getStatus(),o=T(n,"meter","proportional"),{number:a,code:s}=T(this.getOptions(),"locale");let l=[],c=[],u;if(o===null){u=100;const h=e[0];l=["Group","Value",...i?["Status"]:[]],c=[[h[r],h.value===null?"&ndash;":a(h.value,s),...i?[i]:[]]]}else u=T(o,"total")||this.getMaximumDomain(e),l=["Group","Value","Percentage of total"],c=[...e.map(f=>{let d;f.value!==null&&f.value!==void 0?d=Number(f.value):d=0;const p=Number((f.value/u*100).toFixed(2));return[f[r],f.value===null?"&ndash;":a(d,s),a(p,s)+" %"]})];return super.formatTable({headers:l,cells:c})}}var pb=/\s/;function gb(t){for(var e=t.length;e--&&pb.test(t.charAt(e)););return e}var mb=/^\s+/;function vb(t){return t&&t.slice(0,gb(t)+1).replace(mb,"")}var qs=NaN,yb=/^[-+]0x[0-9a-f]+$/i,_b=/^0b[01]+$/i,bb=/^0o[0-7]+$/i,wb=parseInt;function bo(t){if(typeof t=="number")return t;if(ni(t))return qs;if(Qt(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Qt(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=vb(t);var n=_b.test(t);return n||bb.test(t)?wb(t.slice(2),n?2:8):yb.test(t)?qs:+t}var ki=function(){return ae.Date.now()},Eb="Expected a function",Tb=Math.max,Sb=Math.min;function Ob(t,e,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(Eb);e=bo(e)||0,Qt(n)&&(u=!!n.leading,h="maxWait"in n,o=h?Tb(bo(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f);function d(w){var M=r,$=i;return r=i=void 0,c=w,a=t.apply($,M),a}function p(w){return c=w,s=setTimeout(b,e),u?d(w):a}function E(w){var M=w-l,$=w-c,G=e-M;return h?Sb(G,o-$):G}function m(w){var M=w-l,$=w-c;return l===void 0||M>=e||M<0||h&&$>=o}function b(){var w=ki();if(m(w))return S(w);s=setTimeout(b,E(w))}function S(w){return s=void 0,f&&r?d(w):(r=i=void 0,a)}function _(){s!==void 0&&clearTimeout(s),c=0,r=l=i=s=void 0}function y(){return s===void 0?a:S(ki())}function g(){var w=ki(),M=m(w);if(r=arguments,i=this,l=w,M){if(s===void 0)return p(l);if(h)return clearTimeout(s),s=setTimeout(b,e),d(l)}return s===void 0&&(s=setTimeout(b,e)),a}return g.cancel=_,g.flush=y,g}function xb(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,o=new Array(i);++r<i;)o[r]=t+r*n;return o}function I(t){return typeof t=="string"?new qt([[document.querySelector(t)]],[document.documentElement]):new qt([[t]],Eu)}function Ku(){var t=la().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,s=!1,l=0,c=0,u=.5;delete t.unknown;function h(){var f=e().length,d=i<r,p=d?i:r,E=d?r:i;o=(E-p)/Math.max(1,f-l+c*2),s&&(o=Math.floor(o)),p+=(E-p-o*(f-l))*u,a=o*(1-l),s&&(p=Math.round(p),a=Math.round(a));var m=xb(f).map(function(b){return p+o*b});return n(d?m.reverse():m)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,h()):[r,i]},t.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,h()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(f){return arguments.length?(s=!!f,h()):s},t.padding=function(f){return arguments.length?(l=Math.min(1,c=+f),h()):l},t.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),h()):l},t.paddingOuter=function(f){return arguments.length?(c=+f,h()):c},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return Ku(e(),[r,i]).round(s).paddingInner(l).paddingOuter(c).align(u)},di.apply(h(),arguments)}function Mb(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}const Ii=new Date,Ri=new Date;function Et(t,e,n,r){function i(o){return t(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(t(o=new Date(+o)),o),i.ceil=o=>(t(o=new Date(o-1)),e(o,1),t(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(e(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let c;do l.push(c=new Date(+o)),e(o,s),t(o);while(c<o&&o<a);return l},i.filter=o=>Et(a=>{if(a>=a)for(;t(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;e(a,-1),!o(a););else for(;--s>=0;)for(;e(a,1),!o(a););}),n&&(i.count=(o,a)=>(Ii.setTime(+o),Ri.setTime(+a),t(Ii),t(Ri),Math.floor(n(Ii,Ri))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const Xr=Et(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Xr.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Et(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Xr);Xr.range;const Ee=1e3,Zt=Ee*60,Te=Zt*60,xe=Te*24,ha=xe*7,Ys=xe*30,Ni=xe*365,un=Et(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ee)},(t,e)=>(e-t)/Ee,t=>t.getUTCSeconds());un.range;const da=Et(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ee)},(t,e)=>{t.setTime(+t+e*Zt)},(t,e)=>(e-t)/Zt,t=>t.getMinutes());da.range;const Cb=Et(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Zt)},(t,e)=>(e-t)/Zt,t=>t.getUTCMinutes());Cb.range;const fa=Et(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ee-t.getMinutes()*Zt)},(t,e)=>{t.setTime(+t+e*Te)},(t,e)=>(e-t)/Te,t=>t.getHours());fa.range;const $b=Et(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Te)},(t,e)=>(e-t)/Te,t=>t.getUTCHours());$b.range;const sr=Et(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Zt)/xe,t=>t.getDate()-1);sr.range;const pa=Et(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xe,t=>t.getUTCDate()-1);pa.range;const Ab=Et(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/xe,t=>Math.floor(t/xe));Ab.range;function Ye(t){return Et(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Zt)/ha)}const gi=Ye(0),Zr=Ye(1),Lb=Ye(2),Db=Ye(3),_n=Ye(4),kb=Ye(5),Ib=Ye(6);gi.range;Zr.range;Lb.range;Db.range;_n.range;kb.range;Ib.range;function Xe(t){return Et(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/ha)}const Qu=Xe(0),Kr=Xe(1),Rb=Xe(2),Nb=Xe(3),bn=Xe(4),Ub=Xe(5),Pb=Xe(6);Qu.range;Kr.range;Rb.range;Nb.range;bn.range;Ub.range;Pb.range;const ga=Et(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());ga.range;const Hb=Et(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());Hb.range;const Me=Et(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Me.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Et(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Me.range;const Ge=Et(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ge.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Et(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ge.range;function Fb(t,e,n,r,i,o){const a=[[un,1,Ee],[un,5,5*Ee],[un,15,15*Ee],[un,30,30*Ee],[o,1,Zt],[o,5,5*Zt],[o,15,15*Zt],[o,30,30*Zt],[i,1,Te],[i,3,3*Te],[i,6,6*Te],[i,12,12*Te],[r,1,xe],[r,2,2*xe],[n,1,ha],[e,1,Ys],[e,3,3*Ys],[t,1,Ni]];function s(c,u,h){const f=u<c;f&&([c,u]=[u,c]);const d=h&&typeof h.range=="function"?h:l(c,u,h),p=d?d.range(c,+u+1):[];return f?p.reverse():p}function l(c,u,h){const f=Math.abs(u-c)/h,d=Qo(([,,m])=>m).right(a,f);if(d===a.length)return t.every(co(c/Ni,u/Ni,h));if(d===0)return Xr.every(Math.max(co(c,u,h),1));const[p,E]=a[f/a[d-1][2]<a[d][2]/f?d-1:d];return p.every(E)}return[s,l]}const[Vb,Bb]=Fb(Me,ga,gi,sr,fa,da);function Ui(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Pi(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function An(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function jb(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=Ln(i),u=Dn(i),h=Ln(o),f=Dn(o),d=Ln(a),p=Dn(a),E=Ln(s),m=Dn(s),b=Ln(l),S=Dn(l),_={a:Q,A:U,b:X,B:rt,c:null,d:tl,e:tl,f:dw,g:Ew,G:Sw,H:cw,I:uw,j:hw,L:Ju,m:fw,M:pw,p:z,q:D,Q:rl,s:il,S:gw,u:mw,U:vw,V:yw,w:_w,W:bw,x:null,X:null,y:ww,Y:Tw,Z:Ow,"%":nl},y={a:H,A:lt,b:Y,B:gt,c:null,d:el,e:el,f:$w,g:Hw,G:Vw,H:xw,I:Mw,j:Cw,L:eh,m:Aw,M:Lw,p:st,q:mt,Q:rl,s:il,S:Dw,u:kw,U:Iw,V:Rw,w:Nw,W:Uw,x:null,X:null,y:Pw,Y:Fw,Z:Bw,"%":nl},g={a:F,A:C,b:tt,B:V,c:q,d:Qs,e:Qs,f:ow,g:Ks,G:Zs,H:Js,I:Js,j:ew,L:iw,m:tw,M:nw,p:G,q:Jb,Q:sw,s:lw,S:rw,u:Yb,U:Xb,V:Zb,w:qb,W:Kb,x:nt,X:W,y:Ks,Y:Zs,Z:Qb,"%":aw};_.x=w(n,_),_.X=w(r,_),_.c=w(e,_),y.x=w(n,y),y.X=w(r,y),y.c=w(e,y);function w(L,R){return function(k){var x=[],Z=-1,B=0,pt=L.length,vt,P,it;for(k instanceof Date||(k=new Date(+k));++Z<pt;)L.charCodeAt(Z)===37&&(x.push(L.slice(B,Z)),(P=Xs[vt=L.charAt(++Z)])!=null?vt=L.charAt(++Z):P=vt==="e"?" ":"0",(it=R[vt])&&(vt=it(k,P)),x.push(vt),B=Z+1);return x.push(L.slice(B,Z)),x.join("")}}function M(L,R){return function(k){var x=An(1900,void 0,1),Z=$(x,L,k+="",0),B,pt;if(Z!=k.length)return null;if("Q"in x)return new Date(x.Q);if("s"in x)return new Date(x.s*1e3+("L"in x?x.L:0));if(R&&!("Z"in x)&&(x.Z=0),"p"in x&&(x.H=x.H%12+x.p*12),x.m===void 0&&(x.m="q"in x?x.q:0),"V"in x){if(x.V<1||x.V>53)return null;"w"in x||(x.w=1),"Z"in x?(B=Pi(An(x.y,0,1)),pt=B.getUTCDay(),B=pt>4||pt===0?Kr.ceil(B):Kr(B),B=pa.offset(B,(x.V-1)*7),x.y=B.getUTCFullYear(),x.m=B.getUTCMonth(),x.d=B.getUTCDate()+(x.w+6)%7):(B=Ui(An(x.y,0,1)),pt=B.getDay(),B=pt>4||pt===0?Zr.ceil(B):Zr(B),B=sr.offset(B,(x.V-1)*7),x.y=B.getFullYear(),x.m=B.getMonth(),x.d=B.getDate()+(x.w+6)%7)}else("W"in x||"U"in x)&&("w"in x||(x.w="u"in x?x.u%7:"W"in x?1:0),pt="Z"in x?Pi(An(x.y,0,1)).getUTCDay():Ui(An(x.y,0,1)).getDay(),x.m=0,x.d="W"in x?(x.w+6)%7+x.W*7-(pt+5)%7:x.w+x.U*7-(pt+6)%7);return"Z"in x?(x.H+=x.Z/100|0,x.M+=x.Z%100,Pi(x)):Ui(x)}}function $(L,R,k,x){for(var Z=0,B=R.length,pt=k.length,vt,P;Z<B;){if(x>=pt)return-1;if(vt=R.charCodeAt(Z++),vt===37){if(vt=R.charAt(Z++),P=g[vt in Xs?R.charAt(Z++):vt],!P||(x=P(L,k,x))<0)return-1}else if(vt!=k.charCodeAt(x++))return-1}return x}function G(L,R,k){var x=c.exec(R.slice(k));return x?(L.p=u.get(x[0].toLowerCase()),k+x[0].length):-1}function F(L,R,k){var x=d.exec(R.slice(k));return x?(L.w=p.get(x[0].toLowerCase()),k+x[0].length):-1}function C(L,R,k){var x=h.exec(R.slice(k));return x?(L.w=f.get(x[0].toLowerCase()),k+x[0].length):-1}function tt(L,R,k){var x=b.exec(R.slice(k));return x?(L.m=S.get(x[0].toLowerCase()),k+x[0].length):-1}function V(L,R,k){var x=E.exec(R.slice(k));return x?(L.m=m.get(x[0].toLowerCase()),k+x[0].length):-1}function q(L,R,k){return $(L,e,R,k)}function nt(L,R,k){return $(L,n,R,k)}function W(L,R,k){return $(L,r,R,k)}function Q(L){return a[L.getDay()]}function U(L){return o[L.getDay()]}function X(L){return l[L.getMonth()]}function rt(L){return s[L.getMonth()]}function z(L){return i[+(L.getHours()>=12)]}function D(L){return 1+~~(L.getMonth()/3)}function H(L){return a[L.getUTCDay()]}function lt(L){return o[L.getUTCDay()]}function Y(L){return l[L.getUTCMonth()]}function gt(L){return s[L.getUTCMonth()]}function st(L){return i[+(L.getUTCHours()>=12)]}function mt(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var R=w(L+="",_);return R.toString=function(){return L},R},parse:function(L){var R=M(L+="",!1);return R.toString=function(){return L},R},utcFormat:function(L){var R=w(L+="",y);return R.toString=function(){return L},R},utcParse:function(L){var R=M(L+="",!0);return R.toString=function(){return L},R}}}var Xs={"-":"",_:" ",0:"0"},Ot=/^\s*\d+/,Gb=/^%/,zb=/[\\^$*+?|[\]().{}]/g;function et(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Wb(t){return t.replace(zb,"\\$&")}function Ln(t){return new RegExp("^(?:"+t.map(Wb).join("|")+")","i")}function Dn(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function qb(t,e,n){var r=Ot.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Yb(t,e,n){var r=Ot.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Xb(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Zb(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Kb(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Zs(t,e,n){var r=Ot.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ks(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qb(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jb(t,e,n){var r=Ot.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function tw(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qs(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ew(t,e,n){var r=Ot.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Js(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function nw(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function rw(t,e,n){var r=Ot.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function iw(t,e,n){var r=Ot.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ow(t,e,n){var r=Ot.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function aw(t,e,n){var r=Gb.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function sw(t,e,n){var r=Ot.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function lw(t,e,n){var r=Ot.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function tl(t,e){return et(t.getDate(),e,2)}function cw(t,e){return et(t.getHours(),e,2)}function uw(t,e){return et(t.getHours()%12||12,e,2)}function hw(t,e){return et(1+sr.count(Me(t),t),e,3)}function Ju(t,e){return et(t.getMilliseconds(),e,3)}function dw(t,e){return Ju(t,e)+"000"}function fw(t,e){return et(t.getMonth()+1,e,2)}function pw(t,e){return et(t.getMinutes(),e,2)}function gw(t,e){return et(t.getSeconds(),e,2)}function mw(t){var e=t.getDay();return e===0?7:e}function vw(t,e){return et(gi.count(Me(t)-1,t),e,2)}function th(t){var e=t.getDay();return e>=4||e===0?_n(t):_n.ceil(t)}function yw(t,e){return t=th(t),et(_n.count(Me(t),t)+(Me(t).getDay()===4),e,2)}function _w(t){return t.getDay()}function bw(t,e){return et(Zr.count(Me(t)-1,t),e,2)}function ww(t,e){return et(t.getFullYear()%100,e,2)}function Ew(t,e){return t=th(t),et(t.getFullYear()%100,e,2)}function Tw(t,e){return et(t.getFullYear()%1e4,e,4)}function Sw(t,e){var n=t.getDay();return t=n>=4||n===0?_n(t):_n.ceil(t),et(t.getFullYear()%1e4,e,4)}function Ow(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+et(e/60|0,"0",2)+et(e%60,"0",2)}function el(t,e){return et(t.getUTCDate(),e,2)}function xw(t,e){return et(t.getUTCHours(),e,2)}function Mw(t,e){return et(t.getUTCHours()%12||12,e,2)}function Cw(t,e){return et(1+pa.count(Ge(t),t),e,3)}function eh(t,e){return et(t.getUTCMilliseconds(),e,3)}function $w(t,e){return eh(t,e)+"000"}function Aw(t,e){return et(t.getUTCMonth()+1,e,2)}function Lw(t,e){return et(t.getUTCMinutes(),e,2)}function Dw(t,e){return et(t.getUTCSeconds(),e,2)}function kw(t){var e=t.getUTCDay();return e===0?7:e}function Iw(t,e){return et(Qu.count(Ge(t)-1,t),e,2)}function nh(t){var e=t.getUTCDay();return e>=4||e===0?bn(t):bn.ceil(t)}function Rw(t,e){return t=nh(t),et(bn.count(Ge(t),t)+(Ge(t).getUTCDay()===4),e,2)}function Nw(t){return t.getUTCDay()}function Uw(t,e){return et(Kr.count(Ge(t)-1,t),e,2)}function Pw(t,e){return et(t.getUTCFullYear()%100,e,2)}function Hw(t,e){return t=nh(t),et(t.getUTCFullYear()%100,e,2)}function Fw(t,e){return et(t.getUTCFullYear()%1e4,e,4)}function Vw(t,e){var n=t.getUTCDay();return t=n>=4||n===0?bn(t):bn.ceil(t),et(t.getUTCFullYear()%1e4,e,4)}function Bw(){return"+0000"}function nl(){return"%"}function rl(t){return+t}function il(t){return Math.floor(+t/1e3)}var en,rh;jw({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function jw(t){return en=jb(t),rh=en.format,en.parse,en.utcFormat,en.utcParse,en}function Gw(t){return new Date(t)}function zw(t){return t instanceof Date?+t:+new Date(+t)}function ih(t,e,n,r,i,o,a,s,l,c){var u=Bu(),h=u.invert,f=u.domain,d=c(".%L"),p=c(":%S"),E=c("%I:%M"),m=c("%I %p"),b=c("%a %d"),S=c("%b %d"),_=c("%B"),y=c("%Y");function g(w){return(l(w)<w?d:s(w)<w?p:a(w)<w?E:o(w)<w?m:r(w)<w?i(w)<w?b:S:n(w)<w?_:y)(w)}return u.invert=function(w){return new Date(h(w))},u.domain=function(w){return arguments.length?f(Array.from(w,zw)):f().map(Gw)},u.ticks=function(w){var M=f();return t(M[0],M[M.length-1],w??10)},u.tickFormat=function(w,M){return M==null?g:c(M)},u.nice=function(w){var M=f();return(!w||typeof w.range!="function")&&(w=e(M[0],M[M.length-1],w??10)),w?f(Mb(M,w)):u},u.copy=function(){return Vu(u,ih(t,e,n,r,i,o,a,s,l,c))},u}function Ww(){return di.apply(ih(Vb,Bb,Me,ga,gi,sr,fa,da,un,rh).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}const ol=1e-12;function oh(t){this._context=t}oh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function ah(t){return new oh(t)}function Qr(){}function qw(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),e&&(r.href=e),i.href=t,i.href}const Yw=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function Le(t){const e=[];for(let n=0,r=t.length;n<r;n++)e.push(t[n]);return e}let kn=null;function sh(t={}){return kn||(t.includeStyleProperties?(kn=t.includeStyleProperties,kn):(kn=Le(window.getComputedStyle(document.documentElement)),kn))}function Jr(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function Xw(t){const e=Jr(t,"border-left-width"),n=Jr(t,"border-right-width");return t.clientWidth+e+n}function Zw(t){const e=Jr(t,"border-top-width"),n=Jr(t,"border-bottom-width");return t.clientHeight+e+n}function lh(t,e={}){const n=e.width||Xw(t),r=e.height||Zw(t);return{width:n,height:r}}function Kw(){let t,e;try{e=process}catch{}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const zt=16384;function Qw(t){(t.width>zt||t.height>zt)&&(t.width>zt&&t.height>zt?t.width>t.height?(t.height*=zt/t.width,t.width=zt):(t.width*=zt/t.height,t.height=zt):t.width>zt?(t.height*=zt/t.width,t.width=zt):(t.width*=zt/t.height,t.height=zt))}function ti(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>e(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=t})}async function Jw(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function tE(t,e,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),o=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${e}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${e} ${n}`),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("externalResourcesRequired","true"),i.appendChild(o),o.appendChild(t),Jw(i)}const jt=(t,e)=>{if(t instanceof e)return!0;const n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||jt(n,e)};function eE(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function nE(t,e){return sh(e).map(n=>{const r=t.getPropertyValue(n),i=t.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function rE(t,e,n,r){const i=`.${t}:${e}`,o=n.cssText?eE(n):nE(n,r);return document.createTextNode(`${i}{${o}}`)}function al(t,e,n,r){const i=window.getComputedStyle(t,n),o=i.getPropertyValue("content");if(o===""||o==="none")return;const a=Yw();try{e.className=`${e.className} ${a}`}catch{return}const s=document.createElement("style");s.appendChild(rE(a,n,i,r)),e.appendChild(s)}function iE(t,e,n){al(t,e,":before",n),al(t,e,":after",n)}const sl="application/font-woff",ll="image/jpeg",oE={woff:sl,woff2:sl,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ll,jpeg:ll,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function aE(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function ma(t){const e=aE(t).toLowerCase();return oE[e]||""}function sE(t){return t.split(/,/)[1]}function wo(t){return t.search(/^(data:)/)!==-1}function lE(t,e){return`data:${e};base64,${t}`}async function ch(t,e,n){const r=await fetch(t,e);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((o,a)=>{const s=new FileReader;s.onerror=a,s.onloadend=()=>{try{o(n({res:r,result:s.result}))}catch(l){a(l)}},s.readAsDataURL(i)})}const Hi={};function cE(t,e,n){let r=t.replace(/\?.*/,"");return n&&(r=t),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),e?`[${e}]${r}`:r}async function va(t,e,n){const r=cE(t,e,n.includeQueryParams);if(Hi[r]!=null)return Hi[r];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let i;try{const o=await ch(t,n.fetchRequestInit,({res:a,result:s})=>(e||(e=a.headers.get("Content-Type")||""),sE(s)));i=lE(o,e)}catch(o){i=n.imagePlaceholder||"";let a=`Failed to fetch resource: ${t}`;o&&(a=typeof o=="string"?o:o.message),a&&console.warn(a)}return Hi[r]=i,i}async function uE(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):ti(e)}async function hE(t,e){if(t.currentSrc){const o=document.createElement("canvas"),a=o.getContext("2d");o.width=t.clientWidth,o.height=t.clientHeight,a?.drawImage(t,0,0,o.width,o.height);const s=o.toDataURL();return ti(s)}const n=t.poster,r=ma(n),i=await va(n,r,e);return ti(i)}async function dE(t,e){var n;try{if(!((n=t?.contentDocument)===null||n===void 0)&&n.body)return await mi(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function fE(t,e){return jt(t,HTMLCanvasElement)?uE(t):jt(t,HTMLVideoElement)?hE(t,e):jt(t,HTMLIFrameElement)?dE(t,e):t.cloneNode(uh(t))}const pE=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",uh=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function gE(t,e,n){var r,i;if(uh(e))return e;let o=[];return pE(t)&&t.assignedNodes?o=Le(t.assignedNodes()):jt(t,HTMLIFrameElement)&&!((r=t.contentDocument)===null||r===void 0)&&r.body?o=Le(t.contentDocument.body.childNodes):o=Le(((i=t.shadowRoot)!==null&&i!==void 0?i:t).childNodes),o.length===0||jt(t,HTMLVideoElement)||await o.reduce((a,s)=>a.then(()=>mi(s,n)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function mE(t,e,n){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):sh(n).forEach(o=>{let a=i.getPropertyValue(o);o==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),jt(t,HTMLIFrameElement)&&o==="display"&&a==="inline"&&(a="block"),o==="d"&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),r.setProperty(o,a,i.getPropertyPriority(o))})}function vE(t,e){jt(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),jt(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function yE(t,e){if(jt(t,HTMLSelectElement)){const n=e,r=Array.from(n.children).find(i=>t.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function _E(t,e,n){return jt(e,Element)&&(mE(t,e,n),iE(t,e,n),vE(t,e),yE(t,e)),e}async function bE(t,e){const n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;const r={};for(let o=0;o<n.length;o++){const a=n[o].getAttribute("xlink:href");if(a){const s=t.querySelector(a),l=document.querySelector(a);!s&&l&&!r[a]&&(r[a]=await mi(l,e,!0))}}const i=Object.values(r);if(i.length){const o="http://www.w3.org/1999/xhtml",a=document.createElementNS(o,"svg");a.setAttribute("xmlns",o),a.style.position="absolute",a.style.width="0",a.style.height="0",a.style.overflow="hidden",a.style.display="none";const s=document.createElementNS(o,"defs");a.appendChild(s);for(let l=0;l<i.length;l++)s.appendChild(i[l]);t.appendChild(a)}return t}async function mi(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(r=>fE(r,e)).then(r=>gE(t,r,e)).then(r=>_E(t,r,e)).then(r=>bE(r,e))}const hh=/url\((['"]?)([^'"]+?)\1\)/g,wE=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,EE=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function TE(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function SE(t){const e=[];return t.replace(hh,(n,r,i)=>(e.push(i),n)),e.filter(n=>!wo(n))}async function OE(t,e,n,r,i){try{const o=n?qw(e,n):e,a=ma(e);let s;return i||(s=await va(o,a,r)),t.replace(TE(e),`$1${s}$3`)}catch{}return t}function xE(t,{preferredFontFormat:e}){return e?t.replace(EE,n=>{for(;;){const[r,,i]=wE.exec(n)||[];if(!i)return"";if(i===e)return`src: ${r};`}}):t}function dh(t){return t.search(hh)!==-1}async function fh(t,e,n){if(!dh(t))return t;const r=xE(t,n);return SE(r).reduce((i,o)=>i.then(a=>OE(a,o,e,n)),Promise.resolve(r))}async function nn(t,e,n){var r;const i=(r=e.style)===null||r===void 0?void 0:r.getPropertyValue(t);if(i){const o=await fh(i,null,n);return e.style.setProperty(t,o,e.style.getPropertyPriority(t)),!0}return!1}async function ME(t,e){await nn("background",t,e)||await nn("background-image",t,e),await nn("mask",t,e)||await nn("-webkit-mask",t,e)||await nn("mask-image",t,e)||await nn("-webkit-mask-image",t,e)}async function CE(t,e){const n=jt(t,HTMLImageElement);if(!(n&&!wo(t.src))&&!(jt(t,SVGImageElement)&&!wo(t.href.baseVal)))return;const r=n?t.src:t.href.baseVal,i=await va(r,ma(r),e);await new Promise((o,a)=>{t.onload=o,t.onerror=e.onImageErrorHandler?(...l)=>{try{o(e.onImageErrorHandler(...l))}catch(c){a(c)}}:a;const s=t;s.decode&&(s.decode=o),s.loading==="lazy"&&(s.loading="eager"),n?(t.srcset="",t.src=i):t.href.baseVal=i})}async function $E(t,e){const n=Le(t.childNodes).map(r=>ph(r,e));await Promise.all(n).then(()=>t)}async function ph(t,e){jt(t,Element)&&(await ME(t,e),await CE(t,e),await $E(t,e))}function AE(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);const r=e.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),t}const cl={};async function ul(t){let e=cl[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},cl[t]=e,e}async function hl(t,e){let n=t.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let a=o.replace(r,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),ch(a,e.fetchRequestInit,({result:s})=>(n=n.replace(o,`url(${s})`),[o,s]))});return Promise.all(i).then(()=>n)}function dl(t){if(t==null)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=i.exec(r);if(l===null)break;e.push(l[0])}r=r.replace(i,"");const o=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",s=new RegExp(a,"gi");for(;;){let l=o.exec(r);if(l===null){if(l=s.exec(r),l===null)break;o.lastIndex=s.lastIndex}else s.lastIndex=o.lastIndex;e.push(l[0])}return e}async function LE(t,e){const n=[],r=[];return t.forEach(i=>{if("cssRules"in i)try{Le(i.cssRules||[]).forEach((o,a)=>{if(o.type===CSSRule.IMPORT_RULE){let s=a+1;const l=o.href,c=ul(l).then(u=>hl(u,e)).then(u=>dl(u).forEach(h=>{try{i.insertRule(h,h.startsWith("@import")?s+=1:i.cssRules.length)}catch(f){console.error("Error inserting rule from remote css",{rule:h,error:f})}})).catch(u=>{console.error("Error loading remote css",u.toString())});r.push(c)}})}catch(o){const a=t.find(s=>s.href==null)||document.styleSheets[0];i.href!=null&&r.push(ul(i.href).then(s=>hl(s,e)).then(s=>dl(s).forEach(l=>{a.insertRule(l,a.cssRules.length)})).catch(s=>{console.error("Error loading remote stylesheet",s)})),console.error("Error inlining remote css file",o)}}),Promise.all(r).then(()=>(t.forEach(i=>{if("cssRules"in i)try{Le(i.cssRules||[]).forEach(o=>{n.push(o)})}catch(o){console.error(`Error while reading CSS rules from ${i.href}`,o)}}),n))}function DE(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>dh(e.style.getPropertyValue("src")))}async function kE(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Le(t.ownerDocument.styleSheets),r=await LE(n,e);return DE(r)}function gh(t){return t.trim().replace(/["']/g,"")}function IE(t){const e=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(i=>{e.add(gh(i))}),Array.from(r.children).forEach(i=>{i instanceof HTMLElement&&n(i)})}return n(t),e}async function RE(t,e){const n=await kE(t,e),r=IE(t);return(await Promise.all(n.filter(i=>r.has(gh(i.style.fontFamily))).map(i=>{const o=i.parentStyleSheet?i.parentStyleSheet.href:null;return fh(i.cssText,o,e)}))).join(`
`)}async function NE(t,e){const n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await RE(t,e);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r)}}async function UE(t,e={}){const{width:n,height:r}=lh(t,e),i=await mi(t,e,!0);return await NE(i,e),await ph(i,e),AE(i,e),await tE(i,n,r)}async function mh(t,e={}){const{width:n,height:r}=lh(t,e),i=await UE(t,e),o=await ti(i),a=document.createElement("canvas"),s=a.getContext("2d"),l=e.pixelRatio||Kw(),c=e.canvasWidth||n,u=e.canvasHeight||r;return a.width=c*l,a.height=u*l,e.skipAutoScale||Qw(a),a.style.width=`${c}`,a.style.height=`${u}`,e.backgroundColor&&(s.fillStyle=e.backgroundColor,s.fillRect(0,0,a.width,a.height)),s.drawImage(o,0,0,a.width,a.height),a}async function PE(t,e={}){return(await mh(t,e)).toDataURL()}async function HE(t,e={}){return(await mh(t,e)).toDataURL("image/jpeg",e.quality||1)}class En{constructor(e,n){this.model=e,this.services=n,this.init()}init(){}update(){}setModel(e){this.model=e}setServices(e){this.services=e}}const FE="DONT_STYLE_ME_css_styles_verifier";class j extends En{constructor(e,n){super(e,n)}static getHTMLElementSize(e){return{width:e.clientWidth,height:e.clientHeight}}static getSVGElementSize(e,n={useAttrs:!1,useClientDimensions:!1,useBBox:!1,useBoundingRect:!1}){e.attr||(e=I(e));const r={width:0,height:0},i=f=>{f&&Object.keys(r).forEach(d=>{if(f[d]){const p=f[d],E=parseFloat(p);p&&E>r[d]&&(""+p).indexOf("%")===-1&&(r[d]=E)}})},o={width:e.attr("width"),height:e.attr("height")},a=e.node();let s,l,c,u;try{typeof a.getBBox=="function"&&(s=a.getBBox(),l={width:s.width,height:s.height})}catch(f){console.error(f)}try{typeof a?.getBoundingClientRect=="function"&&(c=a.getBoundingClientRect(),u={width:c.width,height:c.height})}catch(f){console.error(f)}let h;if(a instanceof SVGSVGElement&&(h={width:a.clientWidth,height:a.clientHeight}),n){if(n.useAttrs&&(i(o),r.width>0&&r.height>0))return r;if(n.useClientDimensions&&(i(h),r.width>0&&r.height>0))return h;if(n.useBBox&&(i(l),r.width>0&&r.height>0))return l;if(n.useBoundingRect&&(i(u),r.width>0&&r.height>0))return u}try{const f={width:T(e.node(),"width","baseVal","value"),height:T(e.node(),"height","baseVal","value")};i(f)}catch{i(h),i(l),i(o)}return r}static appendOrSelect(e,n){const r=e.select(`${n}`);if(r.empty()){let i=n.split("#"),o,a;return i.length===2?(o=i[0],i=i[1].split("."),a=i[0]):(i=n.split("."),o=i[0]),e.append(o).attr("id",a).attr("class",i.slice(1).join(" "))}return r}init(){this.initializeID(),this.styleHolderElement(),this.addMainContainer(),this.model.getOptions().resizable&&this.addResizeListener(),this.addHolderListeners(),this.handleFullscreenChange()}getChartID(){return this.chartID}getElementOffset(e,n=!1){const r={left:0,top:0},i=e.getBoundingClientRect(),o=n?{left:0,top:0}:this.getHolder().getBoundingClientRect();try{r.left=i.left-o.left,r.top=i.top-o.top}catch(a){console.error(a)}return r}generateElementIDString(e){return`chart-${this.chartID}-${e}`}initializeID(){this.chartID=Math.floor((1+Math.random())*281474976710656).toString(16)}addMainContainer(){const e=this.model.getOptions(),n=T(e,"style","prefix"),r=I(this.getHolder()).append("div").classed(`${Wt}--${n}--chart-wrapper`,!0).attr("id",`chart-${this.getChartID()}`).style("height","100%").style("width","100%");r.append("g").attr("class",FE),this.mainContainer=r.node()}update(){this.styleHolderElement()}styleHolderElement(){const e=this.getHolder(),{width:n,height:r,theme:i}=this.model.getOptions();n!==this.width&&(e.style.width=n,this.width=n),r!==this.height&&(e.style.height=r,this.height=r),I(this.getHolder()).classed(`${Wt}--chart-holder`,!0).attr("data-carbon-theme",i)}getHolder(){return this.model.get("holder")}exportToJPG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=I(r);i.classed("filled",!0),HE(this.getMainContainer(),{quality:1,filter:o=>!(o.classList&&o.classList.contains("cds--cc--toolbar"))}).then(function(o){var a;let s="myChart";const l=T(n,"fileDownload","fileName");typeof l=="function"?s=l("jpg"):typeof l=="string"&&(s=l),(a=e.services.files)==null||a.downloadImage(o,`${s}.jpg`),i.classed("filled",!1)})}exportToPNG(){const e=this,n=this.model.getOptions(),r=this.getHolder(),i=I(r);i.classed("filled",!0),PE(this.getMainContainer(),{quality:1,filter:o=>!(o.classList&&o.classList.contains("cds--cc--toolbar"))}).then(function(o){var a;let s="myChart";const l=T(n,"fileDownload","fileName");typeof l=="function"?s=l("png"):typeof l=="string"&&(s=l),(a=e.services.files)==null||a.downloadImage(o,`${s}.png`),i.classed("filled",!1)}).catch(function(o){console.error("oops, something went wrong!",o)})}isFullScreenMode(){return I(this.getHolder()).classed("fullscreen")}toggleFullscreen(){const e=this.getHolder();I(e).classed("fullscreen")&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}handleFullscreenChange(){document.addEventListener("fullscreenchange",()=>{const e=I(this.getHolder()),n=e.classed("fullscreen");e.classed("fullscreen",!n)})}setSVGMaxHeight(){if(!this.model.getOptions().height){const{height:e}=j.getSVGElementSize(I(this.mainContainer),{useBBox:!0}),n=I(this.mainContainer).attr("class"),r=I(this.mainContainer).selectAll(`.${n} > svg`);let i=0;r.nodes().forEach(function(o){i+=Number(j.getSVGElementSize(I(o),{useBBox:!0}).height)}),i<=e?I(this.mainContainer).attr("height",i):I(this.mainContainer).attr("height","100%")}}getMainContainer(){return this.mainContainer}addHolderListeners(){const e=this.getHolder();e&&I(e).on("mouseover",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(O.Chart.MOUSEOVER)}).on("mouseout",()=>{var n;(n=this.services.events)==null||n.dispatchEvent(O.Chart.MOUSEOUT)})}addResizeListener(){const e=this.getHolder();if(!e)return;let n=e.clientWidth,r=e.clientHeight;const i=Ob(()=>{var o;e&&(Math.abs(n-e.clientWidth)>1||Math.abs(r-e.clientHeight)>1)&&(n=e.clientWidth,r=e.clientHeight,(o=this.services.events)==null||o.dispatchEvent(O.Chart.RESIZE))},12.5);new ResizeObserver(i).observe(e)}}class Qn extends En{static appendOrUpdateLinearGradient(e){let n=e.svg.select(`defs linearGradient#${e.id}`);n.empty()&&(n=e.svg.append("defs").append("linearGradient").attr("id",e.id).attr("x1",e.x1).attr("x2",e.x2).attr("y1",e.y1).attr("y2",e.y2)),n.selectAll("stop").remove(),n.selectAll("stop").data(e.stops).enter().append("stop").attr("offset",r=>r.offset).style("stop-color",r=>r.color).style("stop-opacity",r=>r.opacity)}static getOffsetRatio(e){return(Math.abs(e[1])*100/Math.abs(e[0]-e[1])).toFixed(2)+"%"}static getStops(e,n){const r=e[0]<0&&e[1]>0;let i=[{offset:"0%",color:n,opacity:"0.6"},{offset:"80%",color:n,opacity:"0"}];return r&&(i=[{offset:"0%",color:n,opacity:"0.6"},{offset:Qn.getOffsetRatio(e),color:n,opacity:"0"},{offset:"100%",color:n,opacity:"0.6"}]),i}}var VE="Expected a function";function BE(t,e,n){if(typeof t!="function")throw new TypeError(VE);return setTimeout(function(){t.apply(void 0,n)},e)}Po(function(t,e,n){return BE(t,bo(e)||0,n)});function jE(t,e){return si(t,e)}function GE(t,e){var n;return Xu(t,function(r,i,o){return n=e(r,i,o),!n}),!!n}function zE(t,e,n){var r=Nt(t)?tu:GE;return r(t,Ko(e))}const Eo={capture:!0,passive:!1};function To(t){t.preventDefault(),t.stopImmediatePropagation()}function WE(t){var e=t.document.documentElement,n=I(t).on("dragstart.drag",To,Eo);"onselectstart"in e?n.on("selectstart.drag",To,Eo):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function qE(t,e){var n=t.document.documentElement,r=I(t).on("dragstart.drag",null);e&&(r.on("click.drag",To,Eo),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Fi=t=>()=>t;function YE(t,{sourceEvent:e,target:n,selection:r,mode:i,dispatch:o}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function XE(t){t.stopImmediatePropagation()}function Vi(t){t.preventDefault(),t.stopImmediatePropagation()}var fl={name:"drag"},Bi={name:"space"},rn={name:"handle"},on={name:"center"};const{abs:pl,max:Lt,min:Dt}=Math;function gl(t){return[+t[0],+t[1]]}function ml(t){return[gl(t[0]),gl(t[1])]}var $r={name:"x",handles:["w","e"].map(So),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},ji={},_e={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},vl={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},yl={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ZE={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},KE={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function So(t){return{type:t}}function QE(t){return!t.ctrlKey&&!t.button}function JE(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function tT(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gi(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function eT(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function nT(){return rT($r)}function rT(t){var e=JE,n=QE,r=tT,i=!0,o=Jo("start","brush","end"),a=6,s;function l(m){var b=m.property("__brush",E).selectAll(".overlay").data([So("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_e.overlay).merge(b).each(function(){var _=Gi(this).extent;I(this).attr("x",_[0][0]).attr("y",_[0][1]).attr("width",_[1][0]-_[0][0]).attr("height",_[1][1]-_[0][1])}),m.selectAll(".selection").data([So("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_e.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var S=m.selectAll(".handle").data(t.handles,function(_){return _.type});S.exit().remove(),S.enter().append("rect").attr("class",function(_){return"handle handle--"+_.type}).attr("cursor",function(_){return _e[_.type]}),m.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(r).on("touchstart.brush",f).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(m,b,S){m.tween?m.on("start.brush",function(_){u(this,arguments).beforestart().start(_)}).on("interrupt.brush end.brush",function(_){u(this,arguments).end(_)}).tween("brush",function(){var _=this,y=_.__brush,g=u(_,arguments),w=y.selection,M=t.input(typeof b=="function"?b.apply(this,arguments):b,y.extent),$=ci(w,M);function G(F){y.selection=F===1&&M===null?null:$(F),c.call(_),g.brush()}return w!==null&&M!==null?G:G(1)}):m.each(function(){var _=this,y=arguments,g=_.__brush,w=t.input(typeof b=="function"?b.apply(_,y):b,g.extent),M=u(_,y).beforestart();vo(_),g.selection=w===null?null:w,c.call(_),M.start(S).brush(S).end(S)})},l.clear=function(m,b){l.move(m,null,b)};function c(){var m=I(this),b=Gi(this).selection;b?(m.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),m.selectAll(".handle").style("display",null).attr("x",function(S){return S.type[S.type.length-1]==="e"?b[1][0]-a/2:b[0][0]-a/2}).attr("y",function(S){return S.type[0]==="s"?b[1][1]-a/2:b[0][1]-a/2}).attr("width",function(S){return S.type==="n"||S.type==="s"?b[1][0]-b[0][0]+a:a}).attr("height",function(S){return S.type==="e"||S.type==="w"?b[1][1]-b[0][1]+a:a})):m.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function u(m,b,S){var _=m.__brush.emitter;return _&&(!S||!_.clean)?_:new h(m,b,S)}function h(m,b,S){this.that=m,this.args=b,this.state=m.__brush,this.active=0,this.clean=S}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(m,b){return this.starting?(this.starting=!1,this.emit("start",m,b)):this.emit("brush",m),this},brush:function(m,b){return this.emit("brush",m,b),this},end:function(m,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",m,b)),this},emit:function(m,b,S){var _=I(this.that).datum();o.call(m,this.that,new YE(m,{sourceEvent:b,target:l,selection:t.output(this.state.selection),mode:S,dispatch:o}),_)}};function f(m){if(s&&!m.touches||!n.apply(this,arguments))return;var b=this,S=m.target.__data__.type,_=(i&&m.metaKey?S="overlay":S)==="selection"?fl:i&&m.altKey?on:rn,y=t===ji?null:ZE[S],g=t===$r?null:KE[S],w=Gi(b),M=w.extent,$=w.selection,G=M[0][0],F,C,tt=M[0][1],V,q,nt=M[1][0],W,Q,U=M[1][1],X,rt,z=0,D=0,H,lt=y&&g&&i&&m.shiftKey,Y,gt,st=Array.from(m.touches||[m],P=>{const it=P.identifier;return P=mn(P,b),P.point0=P.slice(),P.identifier=it,P});vo(b);var mt=u(b,arguments,!0).beforestart();if(S==="overlay"){$&&(H=!0);const P=[st[0],st[1]||st[0]];w.selection=$=[[F=t===ji?G:Dt(P[0][0],P[1][0]),V=t===$r?tt:Dt(P[0][1],P[1][1])],[W=t===ji?nt:Lt(P[0][0],P[1][0]),X=t===$r?U:Lt(P[0][1],P[1][1])]],st.length>1&&Z(m)}else F=$[0][0],V=$[0][1],W=$[1][0],X=$[1][1];C=F,q=V,Q=W,rt=X;var L=I(b).attr("pointer-events","none"),R=L.selectAll(".overlay").attr("cursor",_e[S]);if(m.touches)mt.moved=x,mt.ended=B;else{var k=I(m.view).on("mousemove.brush",x,!0).on("mouseup.brush",B,!0);i&&k.on("keydown.brush",pt,!0).on("keyup.brush",vt,!0),WE(m.view)}c.call(b),mt.start(m,_.name);function x(P){for(const it of P.changedTouches||[P])for(const Yt of st)Yt.identifier===it.identifier&&(Yt.cur=mn(it,b));if(lt&&!Y&&!gt&&st.length===1){const it=st[0];pl(it.cur[0]-it[0])>pl(it.cur[1]-it[1])?gt=!0:Y=!0}for(const it of st)it.cur&&(it[0]=it.cur[0],it[1]=it.cur[1]);H=!0,Vi(P),Z(P)}function Z(P){const it=st[0],Yt=it.point0;var Gt;switch(z=it[0]-Yt[0],D=it[1]-Yt[1],_){case Bi:case fl:{y&&(z=Lt(G-F,Dt(nt-W,z)),C=F+z,Q=W+z),g&&(D=Lt(tt-V,Dt(U-X,D)),q=V+D,rt=X+D);break}case rn:{st[1]?(y&&(C=Lt(G,Dt(nt,st[0][0])),Q=Lt(G,Dt(nt,st[1][0])),y=1),g&&(q=Lt(tt,Dt(U,st[0][1])),rt=Lt(tt,Dt(U,st[1][1])),g=1)):(y<0?(z=Lt(G-F,Dt(nt-F,z)),C=F+z,Q=W):y>0&&(z=Lt(G-W,Dt(nt-W,z)),C=F,Q=W+z),g<0?(D=Lt(tt-V,Dt(U-V,D)),q=V+D,rt=X):g>0&&(D=Lt(tt-X,Dt(U-X,D)),q=V,rt=X+D));break}case on:{y&&(C=Lt(G,Dt(nt,F-z*y)),Q=Lt(G,Dt(nt,W+z*y))),g&&(q=Lt(tt,Dt(U,V-D*g)),rt=Lt(tt,Dt(U,X+D*g)));break}}Q<C&&(y*=-1,Gt=F,F=W,W=Gt,Gt=C,C=Q,Q=Gt,S in vl&&R.attr("cursor",_e[S=vl[S]])),rt<q&&(g*=-1,Gt=V,V=X,X=Gt,Gt=q,q=rt,rt=Gt,S in yl&&R.attr("cursor",_e[S=yl[S]])),w.selection&&($=w.selection),Y&&(C=$[0][0],Q=$[1][0]),gt&&(q=$[0][1],rt=$[1][1]),($[0][0]!==C||$[0][1]!==q||$[1][0]!==Q||$[1][1]!==rt)&&(w.selection=[[C,q],[Q,rt]],c.call(b),mt.brush(P,_.name))}function B(P){if(XE(P),P.touches){if(P.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else qE(P.view,H),k.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);L.attr("pointer-events","all"),R.attr("cursor",_e.overlay),w.selection&&($=w.selection),eT($)&&(w.selection=null,c.call(b)),mt.end(P,_.name)}function pt(P){switch(P.keyCode){case 16:{lt=y&&g;break}case 18:{_===rn&&(y&&(W=Q-z*y,F=C+z*y),g&&(X=rt-D*g,V=q+D*g),_=on,Z(P));break}case 32:{(_===rn||_===on)&&(y<0?W=Q-z:y>0&&(F=C-z),g<0?X=rt-D:g>0&&(V=q-D),_=Bi,R.attr("cursor",_e.selection),Z(P));break}default:return}Vi(P)}function vt(P){switch(P.keyCode){case 16:{lt&&(Y=gt=lt=!1,Z(P));break}case 18:{_===on&&(y<0?W=Q:y>0&&(F=C),g<0?X=rt:g>0&&(V=q),_=rn,Z(P));break}case 32:{_===Bi&&(P.altKey?(y&&(W=Q-z*y,F=C+z*y),g&&(X=rt-D*g,V=q+D*g),_=on):(y<0?W=Q:y>0&&(F=C),g<0?X=rt:g>0&&(V=q),_=rn),R.attr("cursor",_e[S]),Z(P));break}default:return}Vi(P)}}function d(m){u(this,arguments).moved(m)}function p(m){u(this,arguments).ended(m)}function E(){var m=this.__brush||{selection:null};return m.extent=ml(e.apply(this,arguments)),m.dim=t,m}return l.extent=function(m){return arguments.length?(e=typeof m=="function"?m:Fi(ml(m)),l):e},l.filter=function(m){return arguments.length?(n=typeof m=="function"?m:Fi(!!m),l):n},l.touchable=function(m){return arguments.length?(r=typeof m=="function"?m:Fi(!!m),l):r},l.handleSize=function(m){return arguments.length?(a=+m,l):a},l.keyModifiers=function(m){return arguments.length?(i=!!m,l):i},l.on=function(){var m=o.on.apply(o,arguments);return m===o?l:m},l}const Oo=Math.PI,xo=2*Oo,Re=1e-6,iT=xo-Re;function vh(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function oT(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return vh;const n=10**e;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let aT=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?vh:oT(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-t,l=r-e,c=o-t,u=a-e,h=c*c+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=e}`;else if(h>Re)if(!(Math.abs(u*s-l*c)>Re)||!i)this._append`L${this._x1=t},${this._y1=e}`;else{let f=n-o,d=r-a,p=s*s+l*l,E=f*f+d*d,m=Math.sqrt(p),b=Math.sqrt(h),S=i*Math.tan((Oo-Math.acos((p+h-E)/(2*m*b)))/2),_=S/b,y=S/m;Math.abs(_-1)>Re&&this._append`L${t+_*c},${e+_*u}`,this._append`A${i},${i},0,0,${+(u*f>c*d)},${this._x1=t+y*s},${this._y1=e+y*l}`}}arc(t,e,n,r,i,o){if(t=+t,e=+e,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^o,h=o?r-i:i-r;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Re||Math.abs(this._y1-c)>Re)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%xo+xo),h>iT?this._append`A${n},${n},0,1,${u},${t-a},${e-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>Re&&this._append`A${n},${n},0,${+(h>=Oo)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};var yh=Math.PI,_l=yh*2,sT=Math.abs;function bl(t,e){return sT(t)>yh&&(t-=Math.round(t/_l)*_l),[t,e]}bl.invert=bl;function wl(){}wl.prototype={constructor:wl,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function El(t,e){return[t,e]}El.invert=El;function lT(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function cT(){return this.eachAfter(lT)}function uT(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function hT(t,e){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function dT(t,e){for(var n=this,r=[n],i=[],o,a,s,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function fT(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function pT(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function gT(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function mT(t){for(var e=this,n=vT(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function vT(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function yT(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function _T(){return Array.from(this)}function bT(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function wT(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*ET(){var t=this,e,n=[t],r,i,o;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function _h(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=OT)):e===void 0&&(e=ST);for(var n=new Jn(t),r,i=[n],o,a,s,l;r=i.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,s=l-1;s>=0;--s)i.push(o=a[s]=new Jn(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore(MT)}function TT(){return _h(this).eachBefore(xT)}function ST(t){return t.children}function OT(t){return Array.isArray(t)?t[1]:null}function xT(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function MT(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Jn(t){this.data=t,this.depth=this.height=0,this.parent=null}Jn.prototype=_h.prototype={constructor:Jn,count:cT,each:uT,eachAfter:dT,eachBefore:hT,find:fT,sum:pT,sort:gT,path:mT,ancestors:yT,descendants:_T,leaves:bT,links:wT,copy:TT,[Symbol.iterator]:ET};function CT(t,e,n,r,i){for(var o=t.children,a,s=-1,l=o.length,c=t.value&&(r-e)/t.value;++s<l;)a=o[s],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}Object.create(Jn.prototype);function $T(t,e,n,r,i){for(var o=t.children,a,s=-1,l=o.length,c=t.value&&(i-n)/t.value;++s<l;)a=o[s],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var AT=(1+Math.sqrt(5))/2;function LT(t,e,n,r,i,o){for(var a=[],s=e.children,l,c,u=0,h=0,f=s.length,d,p,E=e.value,m,b,S,_,y,g,w;u<f;){d=i-n,p=o-r;do m=s[h++].value;while(!m&&h<f);for(b=S=m,g=Math.max(p/d,d/p)/(E*t),w=m*m*g,y=Math.max(S/w,w/b);h<f;++h){if(m+=c=s[h].value,c<b&&(b=c),c>S&&(S=c),w=m*m*g,_=Math.max(S/w,w/b),_>y){m-=c;break}y=_}a.push(l={value:m,dice:d<p,children:s.slice(u,h)}),l.dice?CT(l,n,r,i,E?r+=p*m/E:o):$T(l,n,r,E?n+=d*m/E:i,o),E-=m,u=h}return a}(function t(e){function n(r,i,o,a,s){LT(e,r,i,o,a,s)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(AT);function bh(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new aT(e)}function wh(t){return t[0]}function Eh(t){return t[1]}function Th(t,e){var n=yt(!0),r=null,i=ah,o=null,a=bh(s);t=typeof t=="function"?t:t===void 0?wh:yt(t),e=typeof e=="function"?e:e===void 0?Eh:yt(e);function s(l){var c,u=(l=ua(l)).length,h,f=!1,d;for(r==null&&(o=i(d=a())),c=0;c<=u;++c)!(c<u&&n(h=l[c],c,l))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+t(h,c,l),+e(h,c,l));if(d)return o=null,d+""||null}return s.x=function(l){return arguments.length?(t=typeof l=="function"?l:yt(+l),s):t},s.y=function(l){return arguments.length?(e=typeof l=="function"?l:yt(+l),s):e},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:yt(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function Sh(t,e,n){var r=null,i=yt(!0),o=null,a=ah,s=null,l=bh(c);t=typeof t=="function"?t:t===void 0?wh:yt(+t),e=typeof e=="function"?e:yt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?Eh:yt(+n);function c(h){var f,d,p,E=(h=ua(h)).length,m,b=!1,S,_=new Array(E),y=new Array(E);for(o==null&&(s=a(S=l())),f=0;f<=E;++f){if(!(f<E&&i(m=h[f],f,h))===b)if(b=!b)d=f,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),p=f-1;p>=d;--p)s.point(_[p],y[p]);s.lineEnd(),s.areaEnd()}b&&(_[f]=+t(m,f,h),y[f]=+e(m,f,h),s.point(r?+r(m,f,h):_[f],n?+n(m,f,h):y[f]))}if(S)return s=null,S+""||null}function u(){return Th().defined(i).curve(a).context(o)}return c.x=function(h){return arguments.length?(t=typeof h=="function"?h:yt(+h),r=null,c):t},c.x0=function(h){return arguments.length?(t=typeof h=="function"?h:yt(+h),c):t},c.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:yt(+h),c):r},c.y=function(h){return arguments.length?(e=typeof h=="function"?h:yt(+h),n=null,c):e},c.y0=function(h){return arguments.length?(e=typeof h=="function"?h:yt(+h),c):e},c.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:yt(+h),c):n},c.lineX0=c.lineY0=function(){return u().x(t).y(e)},c.lineY1=function(){return u().x(t).y(n)},c.lineX1=function(){return u().x(r).y(e)},c.defined=function(h){return arguments.length?(i=typeof h=="function"?h:yt(!!h),c):i},c.curve=function(h){return arguments.length?(a=h,o!=null&&(s=a(o)),c):a},c.context=function(h){return arguments.length?(h==null?o=s=null:s=a(o=h),c):o},c}class At{constructor(e,n,r){if(this.type="",this.renderType=ct.HTML,this.id="",this.parent=void 0,this.configs={},this.model=e,this.services=n,r&&(this.configs=r,this.configs.id)){const i=T(this.model.getOptions(),"style","prefix");this.id=`${i}--${this.configs.id}`}this.parent||this.setParent(I(this.services.domUtils.getMainContainer()))}init(){}render(e=!0){console.error("Error: Component did not provide the required render function.")}destroy(){}setModel(e){this.model=e}setServices(e){this.services=e}setParent(e){var n;const r=this.parent;if(this.parent=e,!(r&&r.node()===e.node())&&this.type){const i=T(this.model.getOptions(),"style","prefix");(n=this.parent)==null||n.classed(`${Wt}--${i}--${this.type}`,!0),r&&r.classed(`${Wt}--${i}--${this.type}`,!1)}}getParent(){return this.parent}getComponentContainer(e={ariaLabel:null,isPresentational:!1,withinChartClip:!1}){if(this.type){const n=T(this.model.getOptions(),"style","prefix"),r=this.id?`#${this.id}`:"",i=j.appendOrSelect(this.parent,`${this.renderType===ct.SVG?"svg":"div"}${r}.${Wt}--${n}--${this.type}`);if(e.ariaLabel&&i.attr("aria-label",e.ariaLabel),e.isPresentational&&i.attr("role","presentation"),e.withinChartClip){const o=this.model.get("chartClipId");if(o){const a=I(`#${o}`).select("rect");a.size()!==0&&parseFloat(a.attr("height"))>0&&i.attr("clip-path",`url(#${o})`)}}return i.attr("width","100%").attr("height","100%")}return this.parent}getOptions(){return this.configs.options?K({},this.model.getOptions(),this.configs.options):this.model.getOptions()}}/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:Oh,setPrototypeOf:Tl,isFrozen:DT,getPrototypeOf:kT,getOwnPropertyDescriptor:IT}=Object;let{freeze:Pt,seal:Jt,create:xh}=Object,{apply:Mo,construct:Co}=typeof Reflect<"u"&&Reflect;Pt||(Pt=function(t){return t});Jt||(Jt=function(t){return t});Mo||(Mo=function(t,e,n){return t.apply(e,n)});Co||(Co=function(t,e){return new t(...e)});const br=Ht(Array.prototype.forEach),RT=Ht(Array.prototype.lastIndexOf),Sl=Ht(Array.prototype.pop),In=Ht(Array.prototype.push),NT=Ht(Array.prototype.splice),Ar=Ht(String.prototype.toLowerCase),zi=Ht(String.prototype.toString),Ol=Ht(String.prototype.match),Rn=Ht(String.prototype.replace),UT=Ht(String.prototype.indexOf),PT=Ht(String.prototype.trim),ee=Ht(Object.prototype.hasOwnProperty),Rt=Ht(RegExp.prototype.test),Nn=HT(TypeError);function Ht(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Mo(t,e,r)}}function HT(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Co(t,n)}}function J(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ar;Tl&&Tl(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=n(i);o!==i&&(DT(e)||(e[r]=o),i=o)}t[i]=!0}return t}function FT(t){for(let e=0;e<t.length;e++)ee(t,e)||(t[e]=null);return t}function Ne(t){const e=xh(null);for(const[n,r]of Oh(t))ee(t,n)&&(Array.isArray(r)?e[n]=FT(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Ne(r):e[n]=r);return e}function Un(t,e){for(;t!==null;){const r=IT(t,e);if(r){if(r.get)return Ht(r.get);if(typeof r.value=="function")return Ht(r.value)}t=kT(t)}function n(){return null}return n}const xl=Pt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wi=Pt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),qi=Pt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),VT=Pt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Yi=Pt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),BT=Pt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ml=Pt(["#text"]),Cl=Pt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Xi=Pt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$l=Pt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),wr=Pt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),jT=Jt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),GT=Jt(/<%[\w\W]*|[\w\W]*%>/gm),zT=Jt(/\$\{[\w\W]*/gm),WT=Jt(/^data-[\-\w.\u00B7-\uFFFF]+$/),qT=Jt(/^aria-[\-\w]+$/),Mh=Jt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),YT=Jt(/^(?:\w+script|data):/i),XT=Jt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ch=Jt(/^html$/i),ZT=Jt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Al=Object.freeze({__proto__:null,ARIA_ATTR:qT,ATTR_WHITESPACE:XT,CUSTOM_ELEMENT:ZT,DATA_ATTR:WT,DOCTYPE_NAME:Ch,ERB_EXPR:GT,IS_ALLOWED_URI:Mh,IS_SCRIPT_OR_DATA:YT,MUSTACHE_EXPR:jT,TMPLIT_EXPR:zT});const Pn={element:1,text:3,progressingInstruction:7,comment:8,document:9},KT=function(){return typeof window>"u"?null:window},QT=function(t,e){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Ll=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function $h(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:KT();const e=v=>$h(v);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Pn.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:s,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:d}=t,p=l.prototype,E=Un(p,"cloneNode"),m=Un(p,"remove"),b=Un(p,"nextSibling"),S=Un(p,"childNodes"),_=Un(p,"parentNode");if(typeof a=="function"){const v=n.createElement("template");v.content&&v.content.ownerDocument&&(n=v.content.ownerDocument)}let y,g="";const{implementation:w,createNodeIterator:M,createDocumentFragment:$,getElementsByTagName:G}=n,{importNode:F}=r;let C=Ll();e.isSupported=typeof Oh=="function"&&typeof _=="function"&&w&&w.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:tt,ERB_EXPR:V,TMPLIT_EXPR:q,DATA_ATTR:nt,ARIA_ATTR:W,IS_SCRIPT_OR_DATA:Q,ATTR_WHITESPACE:U,CUSTOM_ELEMENT:X}=Al;let{IS_ALLOWED_URI:rt}=Al,z=null;const D=J({},[...xl,...Wi,...qi,...Yi,...Ml]);let H=null;const lt=J({},[...Cl,...Xi,...$l,...wr]);let Y=Object.seal(xh(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),gt=null,st=null,mt=!0,L=!0,R=!1,k=!0,x=!1,Z=!0,B=!1,pt=!1,vt=!1,P=!1,it=!1,Yt=!1,Gt=!0,Tn=!1;const Sn="user-content-";let ke=!0,te=!1,Ze={},Ke=null;const Oa=J({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let xa=null;const Ma=J({},["audio","video","img","source","image","track"]);let vi=null;const Ca=J({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),lr="http://www.w3.org/1998/Math/MathML",cr="http://www.w3.org/2000/svg",ge="http://www.w3.org/1999/xhtml";let Qe=ge,yi=!1,_i=null;const Vh=J({},[lr,cr,ge],zi);let ur=J({},["mi","mo","mn","ms","mtext"]),hr=J({},["annotation-xml"]);const Bh=J({},["title","style","font","a","script"]);let On=null;const jh=["application/xhtml+xml","text/html"],Gh="text/html";let Tt=null,Je=null;const zh=n.createElement("form"),$a=function(v){return v instanceof RegExp||v instanceof Function},bi=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Je&&Je===v)){if((!v||typeof v!="object")&&(v={}),v=Ne(v),On=jh.indexOf(v.PARSER_MEDIA_TYPE)===-1?Gh:v.PARSER_MEDIA_TYPE,Tt=On==="application/xhtml+xml"?zi:Ar,z=ee(v,"ALLOWED_TAGS")?J({},v.ALLOWED_TAGS,Tt):D,H=ee(v,"ALLOWED_ATTR")?J({},v.ALLOWED_ATTR,Tt):lt,_i=ee(v,"ALLOWED_NAMESPACES")?J({},v.ALLOWED_NAMESPACES,zi):Vh,vi=ee(v,"ADD_URI_SAFE_ATTR")?J(Ne(Ca),v.ADD_URI_SAFE_ATTR,Tt):Ca,xa=ee(v,"ADD_DATA_URI_TAGS")?J(Ne(Ma),v.ADD_DATA_URI_TAGS,Tt):Ma,Ke=ee(v,"FORBID_CONTENTS")?J({},v.FORBID_CONTENTS,Tt):Oa,gt=ee(v,"FORBID_TAGS")?J({},v.FORBID_TAGS,Tt):{},st=ee(v,"FORBID_ATTR")?J({},v.FORBID_ATTR,Tt):{},Ze=ee(v,"USE_PROFILES")?v.USE_PROFILES:!1,mt=v.ALLOW_ARIA_ATTR!==!1,L=v.ALLOW_DATA_ATTR!==!1,R=v.ALLOW_UNKNOWN_PROTOCOLS||!1,k=v.ALLOW_SELF_CLOSE_IN_ATTR!==!1,x=v.SAFE_FOR_TEMPLATES||!1,Z=v.SAFE_FOR_XML!==!1,B=v.WHOLE_DOCUMENT||!1,P=v.RETURN_DOM||!1,it=v.RETURN_DOM_FRAGMENT||!1,Yt=v.RETURN_TRUSTED_TYPE||!1,vt=v.FORCE_BODY||!1,Gt=v.SANITIZE_DOM!==!1,Tn=v.SANITIZE_NAMED_PROPS||!1,ke=v.KEEP_CONTENT!==!1,te=v.IN_PLACE||!1,rt=v.ALLOWED_URI_REGEXP||Mh,Qe=v.NAMESPACE||ge,ur=v.MATHML_TEXT_INTEGRATION_POINTS||ur,hr=v.HTML_INTEGRATION_POINTS||hr,Y=v.CUSTOM_ELEMENT_HANDLING||{},v.CUSTOM_ELEMENT_HANDLING&&$a(v.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Y.tagNameCheck=v.CUSTOM_ELEMENT_HANDLING.tagNameCheck),v.CUSTOM_ELEMENT_HANDLING&&$a(v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Y.attributeNameCheck=v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),v.CUSTOM_ELEMENT_HANDLING&&typeof v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Y.allowCustomizedBuiltInElements=v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),x&&(L=!1),it&&(P=!0),Ze&&(z=J({},Ml),H=[],Ze.html===!0&&(J(z,xl),J(H,Cl)),Ze.svg===!0&&(J(z,Wi),J(H,Xi),J(H,wr)),Ze.svgFilters===!0&&(J(z,qi),J(H,Xi),J(H,wr)),Ze.mathMl===!0&&(J(z,Yi),J(H,$l),J(H,wr))),v.ADD_TAGS&&(z===D&&(z=Ne(z)),J(z,v.ADD_TAGS,Tt)),v.ADD_ATTR&&(H===lt&&(H=Ne(H)),J(H,v.ADD_ATTR,Tt)),v.ADD_URI_SAFE_ATTR&&J(vi,v.ADD_URI_SAFE_ATTR,Tt),v.FORBID_CONTENTS&&(Ke===Oa&&(Ke=Ne(Ke)),J(Ke,v.FORBID_CONTENTS,Tt)),ke&&(z["#text"]=!0),B&&J(z,["html","head","body"]),z.table&&(J(z,["tbody"]),delete gt.tbody),v.TRUSTED_TYPES_POLICY){if(typeof v.TRUSTED_TYPES_POLICY.createHTML!="function")throw Nn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof v.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Nn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=v.TRUSTED_TYPES_POLICY,g=y.createHTML("")}else y===void 0&&(y=QT(d,i)),y!==null&&typeof g=="string"&&(g=y.createHTML(""));Pt&&Pt(v),Je=v}},Aa=J({},[...Wi,...qi,...VT]),La=J({},[...Yi,...BT]),Wh=function(v){let N=_(v);(!N||!N.tagName)&&(N={namespaceURI:Qe,tagName:"template"});const A=Ar(v.tagName),ot=Ar(N.tagName);return _i[v.namespaceURI]?v.namespaceURI===cr?N.namespaceURI===ge?A==="svg":N.namespaceURI===lr?A==="svg"&&(ot==="annotation-xml"||ur[ot]):!!Aa[A]:v.namespaceURI===lr?N.namespaceURI===ge?A==="math":N.namespaceURI===cr?A==="math"&&hr[ot]:!!La[A]:v.namespaceURI===ge?N.namespaceURI===cr&&!hr[ot]||N.namespaceURI===lr&&!ur[ot]?!1:!La[A]&&(Bh[A]||!Aa[A]):!!(On==="application/xhtml+xml"&&_i[v.namespaceURI]):!1},Ie=function(v){In(e.removed,{element:v});try{_(v).removeChild(v)}catch{m(v)}},dr=function(v,N){try{In(e.removed,{attribute:N.getAttributeNode(v),from:N})}catch{In(e.removed,{attribute:null,from:N})}if(N.removeAttribute(v),v==="is")if(P||it)try{Ie(N)}catch{}else try{N.setAttribute(v,"")}catch{}},Da=function(v){let N=null,A=null;if(vt)v="<remove></remove>"+v;else{const _t=Ol(v,/^[\r\n\t ]+/);A=_t&&_t[0]}On==="application/xhtml+xml"&&Qe===ge&&(v='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+v+"</body></html>");const ot=y?y.createHTML(v):v;if(Qe===ge)try{N=new f().parseFromString(ot,On)}catch{}if(!N||!N.documentElement){N=w.createDocument(Qe,"template",null);try{N.documentElement.innerHTML=yi?g:ot}catch{}}const xt=N.body||N.documentElement;return v&&A&&xt.insertBefore(n.createTextNode(A),xt.childNodes[0]||null),Qe===ge?G.call(N,B?"html":"body")[0]:B?N.documentElement:xt},ka=function(v){return M.call(v.ownerDocument||v,v,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},wi=function(v){return v instanceof h&&(typeof v.nodeName!="string"||typeof v.textContent!="string"||typeof v.removeChild!="function"||!(v.attributes instanceof u)||typeof v.removeAttribute!="function"||typeof v.setAttribute!="function"||typeof v.namespaceURI!="string"||typeof v.insertBefore!="function"||typeof v.hasChildNodes!="function")},Ia=function(v){return typeof s=="function"&&v instanceof s};function me(v,N,A){br(v,ot=>{ot.call(e,N,A,Je)})}const Ra=function(v){let N=null;if(me(C.beforeSanitizeElements,v,null),wi(v))return Ie(v),!0;const A=Tt(v.nodeName);if(me(C.uponSanitizeElement,v,{tagName:A,allowedTags:z}),v.hasChildNodes()&&!Ia(v.firstElementChild)&&Rt(/<[/\w]/g,v.innerHTML)&&Rt(/<[/\w]/g,v.textContent)||v.nodeType===Pn.progressingInstruction||Z&&v.nodeType===Pn.comment&&Rt(/<[/\w]/g,v.data))return Ie(v),!0;if(!z[A]||gt[A]){if(!gt[A]&&Ua(A)&&(Y.tagNameCheck instanceof RegExp&&Rt(Y.tagNameCheck,A)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(A)))return!1;if(ke&&!Ke[A]){const ot=_(v)||v.parentNode,xt=S(v)||v.childNodes;if(xt&&ot){const _t=xt.length;for(let ve=_t-1;ve>=0;--ve){const Xt=E(xt[ve],!0);Xt.__removalCount=(v.__removalCount||0)+1,ot.insertBefore(Xt,b(v))}}}return Ie(v),!0}return v instanceof l&&!Wh(v)||(A==="noscript"||A==="noembed"||A==="noframes")&&Rt(/<\/no(script|embed|frames)/i,v.innerHTML)?(Ie(v),!0):(x&&v.nodeType===Pn.text&&(N=v.textContent,br([tt,V,q],ot=>{N=Rn(N,ot," ")}),v.textContent!==N&&(In(e.removed,{element:v.cloneNode()}),v.textContent=N)),me(C.afterSanitizeElements,v,null),!1)},Na=function(v,N,A){if(Gt&&(N==="id"||N==="name")&&(A in n||A in zh))return!1;if(!(L&&!st[N]&&Rt(nt,N))&&!(mt&&Rt(W,N))){if(!H[N]||st[N]){if(!(Ua(v)&&(Y.tagNameCheck instanceof RegExp&&Rt(Y.tagNameCheck,v)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(v))&&(Y.attributeNameCheck instanceof RegExp&&Rt(Y.attributeNameCheck,N)||Y.attributeNameCheck instanceof Function&&Y.attributeNameCheck(N))||N==="is"&&Y.allowCustomizedBuiltInElements&&(Y.tagNameCheck instanceof RegExp&&Rt(Y.tagNameCheck,A)||Y.tagNameCheck instanceof Function&&Y.tagNameCheck(A))))return!1}else if(!vi[N]&&!Rt(rt,Rn(A,U,""))&&!((N==="src"||N==="xlink:href"||N==="href")&&v!=="script"&&UT(A,"data:")===0&&xa[v])&&!(R&&!Rt(Q,Rn(A,U,"")))&&A)return!1}return!0},Ua=function(v){return v!=="annotation-xml"&&Ol(v,X)},Pa=function(v){me(C.beforeSanitizeAttributes,v,null);const{attributes:N}=v;if(!N||wi(v))return;const A={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let ot=N.length;for(;ot--;){const xt=N[ot],{name:_t,namespaceURI:ve,value:Xt}=xt,le=Tt(_t);let It=_t==="value"?Xt:PT(Xt);if(A.attrName=le,A.attrValue=It,A.keepAttr=!0,A.forceKeepAttr=void 0,me(C.uponSanitizeAttribute,v,A),It=A.attrValue,Tn&&(le==="id"||le==="name")&&(dr(_t,v),It=Sn+It),Z&&Rt(/((--!?|])>)|<\/(style|title)/i,It)){dr(_t,v);continue}if(A.forceKeepAttr||(dr(_t,v),!A.keepAttr))continue;if(!k&&Rt(/\/>/i,It)){dr(_t,v);continue}x&&br([tt,V,q],Yh=>{It=Rn(It,Yh," ")});const Ha=Tt(v.nodeName);if(Na(Ha,le,It)){if(y&&typeof d=="object"&&typeof d.getAttributeType=="function"&&!ve)switch(d.getAttributeType(Ha,le)){case"TrustedHTML":{It=y.createHTML(It);break}case"TrustedScriptURL":{It=y.createScriptURL(It);break}}try{ve?v.setAttributeNS(ve,_t,It):v.setAttribute(_t,It),wi(v)?Ie(v):Sl(e.removed)}catch{}}}me(C.afterSanitizeAttributes,v,null)},qh=function v(N){let A=null;const ot=ka(N);for(me(C.beforeSanitizeShadowDOM,N,null);A=ot.nextNode();)me(C.uponSanitizeShadowNode,A,null),Ra(A),Pa(A),A.content instanceof o&&v(A.content);me(C.afterSanitizeShadowDOM,N,null)};return e.sanitize=function(v){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},A=null,ot=null,xt=null,_t=null;if(yi=!v,yi&&(v="<!-->"),typeof v!="string"&&!Ia(v))if(typeof v.toString=="function"){if(v=v.toString(),typeof v!="string")throw Nn("dirty is not a string, aborting")}else throw Nn("toString is not a function");if(!e.isSupported)return v;if(pt||bi(N),e.removed=[],typeof v=="string"&&(te=!1),te){if(v.nodeName){const le=Tt(v.nodeName);if(!z[le]||gt[le])throw Nn("root node is forbidden and cannot be sanitized in-place")}}else if(v instanceof s)A=Da("<!---->"),ot=A.ownerDocument.importNode(v,!0),ot.nodeType===Pn.element&&ot.nodeName==="BODY"||ot.nodeName==="HTML"?A=ot:A.appendChild(ot);else{if(!P&&!x&&!B&&v.indexOf("<")===-1)return y&&Yt?y.createHTML(v):v;if(A=Da(v),!A)return P?null:Yt?g:""}A&&vt&&Ie(A.firstChild);const ve=ka(te?v:A);for(;xt=ve.nextNode();)Ra(xt),Pa(xt),xt.content instanceof o&&qh(xt.content);if(te)return v;if(P){if(it)for(_t=$.call(A.ownerDocument);A.firstChild;)_t.appendChild(A.firstChild);else _t=A;return(H.shadowroot||H.shadowrootmode)&&(_t=F.call(r,_t,!0)),_t}let Xt=B?A.outerHTML:A.innerHTML;return B&&z["!doctype"]&&A.ownerDocument&&A.ownerDocument.doctype&&A.ownerDocument.doctype.name&&Rt(Ch,A.ownerDocument.doctype.name)&&(Xt="<!DOCTYPE "+A.ownerDocument.doctype.name+`>
`+Xt),x&&br([tt,V,q],le=>{Xt=Rn(Xt,le," ")}),y&&Yt?y.createHTML(Xt):Xt},e.setConfig=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};bi(v),pt=!0},e.clearConfig=function(){Je=null,pt=!1},e.isValidAttribute=function(v,N,A){Je||bi({});const ot=Tt(v),xt=Tt(N);return Na(ot,xt,A)},e.addHook=function(v,N){typeof N=="function"&&In(C[v],N)},e.removeHook=function(v,N){if(N!==void 0){const A=RT(C[v],N);return A===-1?void 0:NT(C[v],A,1)[0]}return Sl(C[v])},e.removeHooks=function(v){C[v]=[]},e.removeAllHooks=function(){C=Ll()},e}var ya=$h();const Er=t=>ya.sanitize(t,{USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),JT=t=>ya.sanitize(t,{NAMESPACE:"http://www.w3.org/2000/svg",USE_PROFILES:{html:!0,svg:!0,svgFilters:!0}}),De=t=>ya.sanitize(t,{ALLOWED_TAGS:[]}),Ah=class Lh extends At{constructor(){super(...arguments),this.type="toolbar",this.renderType=ct.HTML}init(){const e=()=>this.updateOverflowMenu(!1);this.services.events.addEventListener(O.Toolbar.SHOW_OVERFLOW_MENU,()=>{this.renderOverflowMenu(),document.body.addEventListener("click",e)}),this.services.events.addEventListener(O.Toolbar.HIDE_OVERFLOW_MENU,()=>{document.body.removeEventListener("click",e)})}render(e=!0){const n=this.getComponentContainer({ariaLabel:"toolbar"}).attr("role","group");if(T(this.getOptions(),"data","loading"))n.html(""),this.overflowMenu=null;else{this.overflowMenu||(this.overflowMenu=n.append("div").attr("class","cds--overflow-menu-options cds--overflow-menu--flip cds--overflow-menu-options cds--overflow-menu--flip").attr("tabindex",-1).html("<ul role='menu'></ul>"));const{buttonList:r,overflowMenuItemList:i}=this.getControlConfigs();i&&r.push(this.getOverflowButtonConfig());const o=n.selectAll("div.toolbar-control").data(r,l=>l.id);o.exit().remove();const a=o.enter().append("div").attr("class","toolbar-control cds--overflow-menu cds--overflow-menu"),s=this;a.merge(o).classed("disabled",l=>l.shouldBeDisabled()).attr("role","button").attr("aria-disabled",l=>l.shouldBeDisabled()).attr("aria-label",l=>l.title).html(l=>`
			<button
				class="cds--overflow-menu__trigger cds--overflow-menu__trigger"
				aria-haspopup="true" aria-expanded="false" id="${this.services.domUtils.generateElementIDString(`control-${De(l.id)}`)}" aria-label="${De(l.title)}">
				<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" class="cds--overflow-menu__icon cds--overflow-menu__icon" viewBox="0 0 32 32" aria-hidden="true">
					${JT(l.iconSVG.content)}
				</svg>
			</button>`).each(function(l,c){I(this).select("svg").style("pointer-events","none").style("will-change","transform").style("width",l.iconSVG.width!==void 0?l.iconSVG.width:"20px").style("height",l.iconSVG.height!==void 0?l.iconSVG.height:"20px"),I(this).select("button").on("mouseover focus",function(u){const h=I(this);h.classed("hovered",!0),s.services.events.dispatchEvent(O.Toolbar.SHOW_TOOLTIP,{event:u,hoveredElement:h,content:l.title,noWrap:!0,placements:["top","bottom"]})}).on("mouseout blur",function(){s.services.events.dispatchEvent(O.Toolbar.HIDE_TOOLTIP)}).on("click",u=>{l.shouldBeDisabled()||s.triggerFunctionAndEvent(l,u,this)}).on("keydown",u=>{u.key&&u.key==="Enter"||u.key===" "?(u.preventDefault(),s.triggerFunctionAndEvent(l,u,this)):u.key&&u.key==="ArrowLeft"?s.focusOnPreviousEnabledToolbarItem(c):u.key&&u.key==="ArrowRight"&&s.focusOnNextEnabledToolbarItem(c)})}),this.overflowButton=this.getComponentContainer().select(`button.cds--overflow-menu__trigger#${this.services.domUtils.generateElementIDString("control-toolbar-overflow-menu")}`)}}renderOverflowMenu(){const{overflowMenuItemList:e}=this.getControlConfigs(),n=this.overflowMenu.select("ul").selectAll("li.cds--overflow-menu-options__option").data(e,i=>T(i,"id"));n.exit().remove();const r=n.enter().append("li").attr("id",i=>this.services.domUtils.generateElementIDString(`control-${i.id}`)).attr("class","cds--overflow-menu-options__option cds--overflow-menu-options__option").attr("role","menuitem").attr("tabindex",1);r.append("button").attr("class","cds--overflow-menu-options__btn cds--overflow-menu-options__btn"),r.merge(n).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).classed("cds--overflow-menu-options__option--disabled",i=>i.shouldBeDisabled()).attr("aria-disabled",i=>i.shouldBeDisabled()).selectAll("button").text(i=>i.title)}isOverflowMenuOpen(){return this.overflowMenu.classed("is-open")}updateOverflowMenu(e){this.overflowMenu&&(this.overflowMenu.classed("is-open",e),this.overflowButton&&(this.overflowButton.attr("aria-expanded",e),I(this.overflowButton.node().parentNode).classed("cds--overflow-menu--open",e).classed("cds--overflow-menu--open",e)),e?this.services.events.dispatchEvent(O.Toolbar.SHOW_OVERFLOW_MENU):this.services.events.dispatchEvent(O.Toolbar.HIDE_OVERFLOW_MENU))}focusOnPreviousEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=I(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnNextEnabledToolbarItem(e){const n=this.getToolbarButtonItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=I(`button#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)}`).node();"focus"in i&&i.focus()}}focusOnPreviousEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=n.length;for(let i=e-1;i>=0;i--)if(!n[i].shouldBeDisabled()){r=i;break}if(r<n.length){const i=I(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}focusOnNextEnabledMenuItem(e){const n=this.getOverflowMenuItems();let r=-1;for(let i=e+1;i<n.length;i++)if(!n[i].shouldBeDisabled()){r=i;break}if(r>-1){const i=I(`#${this.services.domUtils.generateElementIDString(`control-${n[r].id}`)} button`).node();"focus"in i&&i.focus()}}toggleOverflowMenu(e){if(this.isOverflowMenuOpen())this.updateOverflowMenu(!1);else{this.updateOverflowMenu(!0);const n=this;this.getOverflowMenuItems().forEach((r,i)=>{const o=I(`#${this.services.domUtils.generateElementIDString(`control-${r.id}`)}`);o!==null&&(o.on("click",()=>{n.triggerFunctionAndEvent(r,e,o.node()),n.updateOverflowMenu(!1)}),o.on("keydown",a=>{a&&a.key==="Enter"?n.triggerFunctionAndEvent(r,e,o.node()):a&&a.key==="ArrowUp"?n.focusOnPreviousEnabledMenuItem(i):a&&a.key==="ArrowDown"?n.focusOnNextEnabledMenuItem(i):a&&a.key==="Escape"&&n.updateOverflowMenu(!1),a.preventDefault()}))}),n.focusOnNextEnabledMenuItem(-1)}e&&e.stopImmediatePropagation()}triggerFunctionAndEvent(e,n,r){typeof e.shouldBeDisabled=="function"&&e.shouldBeDisabled()||(typeof e.clickFunction=="function"&&e.clickFunction(n),this.services.events.dispatchEvent(O.Toolbar.BUTTON_CLICK,{control:e,event:n,element:r}))}getControlConfigs(){const e=T(this.getOptions(),"toolbar","numberOfIcons")-1,n=T(this.getOptions(),"toolbar","controls"),r=[],i=[],o=[];return n.forEach(a=>{let s=null;if(a.type===at.CUSTOM)T(a,"id")===null&&(a.id=`toolbar-button-${Lh.buttonID++}`),T(a,"shouldBeDisabled")===null&&(a.shouldBeDisabled=()=>!1),s=a;else{const l=this.services.domUtils.isFullScreenMode();a.type===at.MAKE_FULLSCREEN&&l?a.type=at.EXIT_FULLSCREEN:a.type===at.EXIT_FULLSCREEN&&!l&&(a.type=at.MAKE_FULLSCREEN),s=this.getControlConfigByType(a.type)}s&&(s.text=a.text?a.text:a.type,s.id.indexOf("toolbar-export")!==-1?r.push(s):i.length<e?T(s,"iconSVG","content")===null?o.push(s):i.push(s):o.push(s))}),o.push(...r),o.length?{buttonList:i,overflowMenuItemList:o}:{buttonList:i}}getToolbarButtonItems(){const{buttonList:e,overflowMenuItemList:n}=this.getControlConfigs();return n&&e.push(this.getOverflowButtonConfig()),e||[]}getOverflowMenuItems(){const{overflowMenuItemList:e}=this.getControlConfigs();return e||[]}getOverflowButtonConfig(){const{moreOptions:e}=T(this.model.getOptions(),"locale","translations","toolbar");return{id:"toolbar-overflow-menu",title:e,shouldBeDisabled:()=>!1,iconSVG:{content:`<circle cx="16" cy="8" r="2"></circle>
				<circle cx="16" cy="16" r="2"></circle>
				<circle cx="16" cy="24" r="2"></circle>`},clickFunction:n=>this.toggleOverflowMenu(n)}}getControlConfigByType(e){const n=this.services.zoom&&this.services.zoom.isZoomBarEnabled()&&!this.services.zoom.isEmptyState(),r=this.model.getDisplayData(),i=this.model.getOptions(),{exportAsCSV:o,exportAsJPG:a,exportAsPNG:s,zoomIn:l,zoomOut:c,resetZoom:u,makeFullScreen:h,exitFullScreen:f,showAsTable:d}=T(i,"locale","translations","toolbar");let p;switch(e){case at.ZOOM_IN:n&&(p={id:"toolbar-zoomIn",title:l,shouldBeDisabled:()=>this.services.zoom.isMinZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomIn()});break;case at.ZOOM_OUT:n&&(p={id:"toolbar-zoomOut",title:c,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.zoomOut()});break;case at.RESET_ZOOM:n&&(p={id:"toolbar-resetZoom",title:u,shouldBeDisabled:()=>this.services.zoom.isMaxZoomDomain(),iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.zoom.resetZoomDomain()});break;case at.MAKE_FULLSCREEN:p={id:"toolbar-makefullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:h,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case at.EXIT_FULLSCREEN:p={id:"toolbar-exitfullscreen",iconSVG:{content:this.getControlIconByType(e),width:"15px",height:"15px"},title:f,shouldBeDisabled:()=>!1,clickFunction:()=>{this.services.domUtils.toggleFullscreen()}};break;case at.SHOW_AS_DATATABLE:p={id:"toolbar-showasdatatable",iconSVG:{content:this.getControlIconByType(e)},title:d,shouldBeDisabled:()=>r.length===0,clickFunction:()=>this.services.events.dispatchEvent(O.Modal.SHOW)};break;case at.EXPORT_CSV:p={id:"toolbar-export-CSV",title:o,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.model.exportToCSV()};break;case at.EXPORT_PNG:p={id:"toolbar-export-PNG",title:s,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToPNG()};break;case at.EXPORT_JPG:p={id:"toolbar-export-JPG",title:a,shouldBeDisabled:()=>!1,iconSVG:{content:this.getControlIconByType(e)},clickFunction:()=>this.services.domUtils.exportToJPG()};break;default:throw Error("Not supported toolbar control type: "+e)}return p}getControlIconByType(e){switch(e){case at.ZOOM_IN:return`<polygon points="19 13 15 13 15 9 13 9 13 13 9 13 9 15 13 15 13 19 15 19 15 15 19 15 19 13"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case at.ZOOM_OUT:return`<rect x="9" y="13" width="10" height="2"/>
						<path d="M22.45,21A10.87,10.87,0,0,0,25,14,11,11,0,1,0,14,25a10.87,10.87,0,0,0,7-2.55L28.59,30,30,28.59ZM14,23a9,9,0,1,1,9-9A9,9,0,0,1,14,23Z"/>`;case at.RESET_ZOOM:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case at.MAKE_FULLSCREEN:return'<polygon points="21 2 21 4 26.59 4 17 13.58 18.41 15 28 5.41 28 11 30 11 30 2 21 2"/><polygon points="15 18.42 13.59 17 4 26.59 4 21 2 21 2 30 11 30 11 28 5.41 28 15 18.42"/>';case at.EXIT_FULLSCREEN:return'<polygon points="4 18 4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18"/><polygon points="30 3.416 28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416"/>';case at.SHOW_AS_DATATABLE:return'<rect x="4" y="6" width="18" height="2"/><rect x="4" y="12" width="18" height="2"/><rect x="4" y="18" width="18" height="2"/><rect x="4" y="24" width="18" height="2"/><rect x="26" y="6" width="2" height="2"/><rect x="26" y="12" width="2" height="2"/><rect x="26" y="18" width="2" height="2"/><rect x="26" y="24" width="2" height="2"/>';case at.EXPORT_CSV:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case at.EXPORT_JPG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';case at.EXPORT_PNG:return'<path d="M22.4478,21A10.855,10.855,0,0,0,25,14,10.99,10.99,0,0,0,6,6.4658V2H4v8h8V8H7.332a8.9768,8.9768,0,1,1-2.1,8H3.1912A11.0118,11.0118,0,0,0,14,25a10.855,10.855,0,0,0,7-2.5522L28.5859,30,30,28.5859Z"/>';default:throw Error("Not supported toolbar control type: "+e)}}};Ah.buttonID=0;let tS=Ah;const Dh=class kh extends At{constructor(e,n,r,i){super(e,n,i),this.type="layout",this.configs=i,this.children=r,this._instanceID=kh.instanceID++,this.init()}init(){this.children.forEach(e=>{e.components.forEach(n=>{n.init()})})}getPreferedAndFixedSizeSum(){const e=this.parent;let n=0;return e.selectAll(`div.layout-child-${this._instanceID}`).filter(r=>{const i=T(r,"growth");return i===bt.PREFERRED||i===bt.FIXED}).each(function(r){n+=r.size}),n}getNumOfStretchChildren(){return this.parent.selectAll(`div.layout-child-${this._instanceID}`).filter(e=>T(e,"growth")===bt.STRETCH).size()}render(e=!0){const n=this.model.getOptions(),r=this.parent,{width:i,height:o}=j.getHTMLElementSize(r.node()),a=this.configs.direction===Vt.ROW||this.configs.direction===Vt.ROW_REVERSE,s=T(this.model.getOptions(),"style","prefix"),l=r.classed(`${Wt}--${s}--layout-row`,this.configs.direction===Vt.ROW).classed(`${Wt}--${s}--layout-row-reverse`,this.configs.direction===Vt.ROW_REVERSE).classed(`${Wt}--${s}--layout-column`,this.configs.direction===Vt.COLUMN).classed(`${Wt}--${s}--layout-column-reverse`,this.configs.direction===Vt.COLUMN_REVERSE).classed(`${Wt}--${s}--layout-alignitems-center`,this.configs.alignItems===Io.CENTER).selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);l.enter().append("div").merge(r.selectAll(`div.layout-child-${this._instanceID}`)).attr("class",u=>`layout-child layout-child-${this._instanceID} ${u.id}`).each(function(u){u.components.forEach(h=>{var f;const d=I(this),p=T(u,"renderType")===ct.SVG;h.setParent(p?j.appendOrSelect(d,"svg.layout-svg-wrapper").attr("width","100%").attr("height","100%"):d),p&&!d.select("svg.layout-svg-wrapper").attr("aria-label")&&d.select("svg.layout-svg-wrapper").attr("aria-label",((f=n?.accessibility)==null?void 0:f.svgAriaLabel)||n?.title);const E=T(u,"growth");(E===bt.PREFERRED||E===bt.FIXED)&&h.render(e)})}),r.selectAll(`div.layout-child-${this._instanceID}`).style("height",null).style("width",null).each(function(u){const h=T(u,"growth"),f=T(u,"renderType")===ct.SVG?j.getSVGElementSize(I(this).select("svg.layout-svg-wrapper"),{useBBox:!0}):j.getHTMLElementSize(this);if(h===bt.PREFERRED){const d=a?f.width:f.height,p=a?i:o;u.size=d/p*100}}),l.exit().remove(),this.children.filter(u=>T(u,"growth")===bt.STRETCH).forEach(u=>{u.size=(100-+this.getPreferedAndFixedSizeSum())/+this.getNumOfStretchChildren()});const c=r.selectAll(`div.layout-child-${this._instanceID}`).data(this.children,u=>u.id);a?c.style("width",u=>`${u.size/100*i}px`).style("height","100%"):c.style("height",u=>`${u.size/100*o}px`).style("width","100%"),c.each(function(u){u.components.forEach(h=>{T(u,"growth")===bt.STRETCH&&h.render(e)})})}setModel(e){super.setModel(e),this.children.forEach(n=>{n.components.forEach(r=>r.setModel(e))})}setServices(e){super.setServices(e),this.children.forEach(n=>{n.components.forEach(r=>r.setServices(e))})}destroy(){this.children.forEach(e=>{e.components.forEach(n=>n.destroy())})}};Dh.instanceID=Math.floor(Math.random()*99999999999);let Lr=Dh;class $o extends At{constructor(){super(...arguments),this.type="spacer"}render(e=!1){this.getComponentContainer({isPresentational:!0}).style("width",`${this.configs.size||Hs.default.size}px`).style("height",`${this.configs.size||Hs.default.size}px`).attr("opacity",0)}}class eS extends At{constructor(e,n,r){super(e,n,r),this.type="modal",this.isEventListenerAdded=!1,this.handleShowModal=()=>{const i=this.services.domUtils.getChartID();this.modal.attr("data-modal",!0).attr("class","cds--modal").attr("role","dialog").attr("aria-modal",!0).attr("aria-labelledby",`${i}__modal-title`).attr("aria-describedby",`${i}__modal-description`).attr("tabindex",-1).style("opacity",1).style("visibility","visible"),this.modal.html(this.getModalHTML()),this.modal.select("div.cds--modal-footer button.cds--btn").on("click",()=>this.model.exportToCSV()),this.modal.on("click",this.handleHideModal),this.modal.select(".cds--modal-container").on("click",o=>{o.stopPropagation()}),this.modal.select(".cds--modal-close").on("click",this.handleHideModal),typeof window<"u"&&window.addEventListener("keydown",this.handleEscapeKey)},this.handleEscapeKey=i=>{i.key==="Escape"&&this.handleHideModal()},this.handleHideModal=()=>{this.modal.attr("role",null).attr("aria-modal",null).attr("aria-labelledby",null).attr("aria-describedby",null).attr("tabindex",null).style("opacity",0).style("visibility","hidden"),this.modal.on("click",null),this.modal.select(".cds--modal-container").on("click",null),this.modal.select(".cds--modal-close").on("click",null),typeof window<"u"&&window.removeEventListener("keydown",this.handleEscapeKey)},this.init()}addEventListeners(){this.services.events.addEventListener(O.Modal.SHOW,this.handleShowModal)}removeEventListeners(){this.services.events.removeEventListener(O.Modal.SHOW,this.handleShowModal)}getModalHTML(){const e=this.services.domUtils.getChartID(),n=this.model.getOptions(),{title:r,downloadAsCSV:i}=T(n,"locale","translations","tabularRep"),o=T(n,"style","prefix"),a=this.model.getTabularDataArray();return`
		<div class="cds--modal-container">
			<div class="cds--modal-header">

				<p class="cds--modal-header__label cds--type-delta" id="modal-title">${r}</p>

				<p class="cds--modal-header__heading cds--type-beta" id="${e}__modal-description">${De(n.title)}</p>

				<button class="cds--modal-close" type="button" data-modal-close aria-label="close modal"  data-modal-primary-focus>
					<svg focusable="false" preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" fill="currentColor" aria-label="Close" width="20" height="20" viewBox="0 0 32 32" role="img" class="cds--modal-close__icon">
						<path d="M24 9.4L22.6 8 16 14.6 9.4 8 8 9.4 14.6 16 8 22.6 9.4 24 16 17.4 22.6 24 24 22.6 17.4 16 24 9.4z"></path>
					</svg>
				</button>
			</div>

			<div class="cds--modal-content">
				<table class="cds--data-table cds--data-table--no-border">
					<thead>
						<tr>
							${Hc(a,0).map(s=>`<th scope="col">
								<div class="cds--table-header-label">${De(s)}</div>
							</th>`).join("")}
						</tr>
					</thead>

					<tbody>${a.slice(1).map(s=>`
							<tr>
								${s.map(l=>`<td>${De(l)}</td>`).join("")}
							</tr>`).join("")}
					</tbody>
				</table>
			</div>

			<div class="cds--modal-footer">
			  <div class="${Wt}--${o}-modal-footer-spacer"></div>
			  <button class="cds--btn cds--btn--primary" type="button" data-modal-primary-focus>${i}</button>
			</div>
		</div>`}render(e=!1){const n=this.model.getOptions();if(!this.isEventListenerAdded){const r=I(this.services.domUtils.getHolder()),i=T(n,"style","prefix");this.modal=j.appendOrSelect(r,`div.${Wt}--${i}--modal`),this.addEventListeners(),this.isEventListenerAdded=!0}}destroy(){this.removeEventListeners(),this.isEventListenerAdded=!1}}class Ih extends At{constructor(){super(...arguments),this.type="title",this.renderType=ct.HTML}render(e=!1){const n=this.getComponentContainer(),r=T(this.getOptions(),"title"),i=n.selectAll("p.title").data([r]);if(i.enter().append("p").classed("title",!0).attr("role","heading").attr("aria-level",2).merge(i).html(o=>De(o)),i.node()&&i.node().offsetWidth<i.node().scrollWidth){const o=this;i.on("mouseover",function(a){o.services.events.dispatchEvent(O.Tooltip.SHOW,{event:a,hoveredElement:i,content:i.text()})}).on("mousemove",function(a){o.services.events.dispatchEvent(O.Tooltip.MOVE,{event:a})}).on("mouseout",function(){o.services.events.dispatchEvent(O.Tooltip.HIDE)})}i.exit().remove()}truncateTitle(e,n){if(n<=0)return;const r=e.text();if(e.node().getComputedTextLength()>n){e.append("tspan").text("...");const i=j.appendOrSelect(e,"tspan").node().getComputedTextLength(),o=e.text(),a=this.getSubstringIndex(e.node(),0,o.length-1,n-i);e.html(o.substring(0,a-1)).append("tspan").text("...");const s=this;e.on("mouseover",function(l){s.services.events.dispatchEvent(O.Tooltip.SHOW,{event:l,hoveredElement:e,content:r})}).on("mousemove",function(l){s.services.events.dispatchEvent(O.Tooltip.MOVE,{event:l})}).on("mouseout",function(){s.services.events.dispatchEvent(O.Tooltip.HIDE)})}}getMaxTitleWidth(){return j.getSVGElementSize(this.parent.node(),{useAttrs:!0}).width}getSubstringIndex(e,n,r,i){const o=Math.floor((r+n)/2);return e.getSubStringLength(0,o)>i?this.getSubstringIndex(e,n,o,i):e.getSubStringLength(0,o)<i?e.getSubStringLength(0,o+1)>i?o:this.getSubstringIndex(e,o,r,i):o}}class nS extends At{constructor(){super(...arguments),this.type="legend",this.renderType=ct.HTML}render(e=!1){const n=this.getOptions(),r=T(n,"legend"),i=T(r,"alignment"),o=T(n,"legend","orientation");let a=this.model.getDataGroups();const{DISABLED:s}=Mt.items.status,l=a.some(S=>S.status===s),c=T(r,"order"),u=this.getComponentContainer().classed("center-aligned",i===Se.CENTER).classed("right-aligned",i===Se.RIGHT).classed(o,!0).classed("has-deactivated-items",l).attr("role",wt.GROUP).attr("aria-label","Data groups").attr("data-name","legend-items");c&&(a=this.sortDataGroups(a,c));const h=u.selectAll("div.legend-item").data(a,S=>S.name),f=h.enter().append("div").attr("class","legend-item");f.merge(u.selectAll("div.legend-item")).classed("active",function(S){return S.status===Mt.items.status.ACTIVE});const d=T(this.getOptions(),"legend","clickable");u.classed("clickable",d&&a.length>1);const p=Mt.checkbox.radius,E=f.append("div").classed("checkbox",!0),m=E.merge(h.select("div.checkbox")).attr("role",wt.CHECKBOX).attr("tabindex",d?0:-1).attr("aria-labelledby",(S,_)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${_}-title`)).attr("aria-checked",({status:S})=>S===Mt.items.status.ACTIVE).attr("width",p*2).attr("height",p*2).attr("class",S=>this.model.getColorClassName({classNameTypes:[kt.BACKGROUND],dataGroupName:S.name,originalClassName:"checkbox"})).style("background",S=>S.status===Mt.items.status.ACTIVE?this.model.getFillColor(S.name)||this.model.getStrokeColor(S.name):null).classed("active",function(S){return S.status===Mt.items.status.ACTIVE});E.append("svg").attr("focusable",!1).attr("preserveAspectRatio","xMidYMid meet").attr("xmlns","http://www.w3.org/2000/svg").attr("width","11").attr("height","11").attr("viewBox","0 0 31 28").attr("aria-hidden",!0).style("will-change","transform").append("path").attr("d","M13 21.2l-7.1-7.1-1.4 1.4 7.1 7.1L13 24 27.1 9.9l-1.4-1.5z"),f.append("p").merge(h.select("p"));const b=T(n,"legend","additionalItems");if(b&&a.length){const S=this,_=u.selectAll("div.additional-item").data(b);_.exit().remove();const y=_.enter().append("div").merge(_).classed("legend-item",!0).classed("additional",!0).attr("aria-labelledby",(M,$)=>this.services.domUtils.generateElementIDString(`legend-datagroup-${m.size()+$}-title`));y.selectAll("*").remove();let g,w=1;y.append("svg").classed("icon",!0).each(function(M){const $=I(this);!g||g!=M.type?(g=M.type,w=1):w++,S.addAdditionalItem($,M,w)}),y.append("p").merge(y.select("p")),this.truncateLegendText()}h.exit().on("mouseover",null).on("click",null).on("mouseout",null).remove(),d&&f.size()>1&&this.addEventListeners()}sortDataGroups(e,n){if(e.sort((r,i)=>n.indexOf(r.name)-n.indexOf(i.name)),n.length<e.length){const r=e.length-n.length;return e.slice(r).concat(e.slice(0,r))}return e}addAdditionalItem(e,n,r){const{width:i,height:o}=Mt.area;if(n.type===St.RADIUS?e.style("width",`${o}px`).style("height",`${o}px`):e.style("width",`${i}px`).style("height",`${o}px`),n.type===St.RADIUS){const{iconData:a,fill:s,stroke:l}=Mt.radius;e.attr("fill","none").selectAll("circle").data(a).enter().append("circle").classed("radius",!0).attr("role",wt.IMG).attr("aria-label","radius").attr("cx",c=>c.cx).attr("cy",c=>c.cy).attr("r",c=>c.r).style("fill",n.fill?n.fill:s).style("stroke",n.stroke?n.stroke:l)}else if(n.type===St.LINE){const a=Mt.line;e.select("line.line").empty()&&e.append("line").classed(`line-${r}`,!0).attr("role",wt.IMG).attr("aria-label","line").attr("x1",0).attr("y1",a.yPosition).attr("x2",i).attr("y2",a.yPosition).style("stroke",n.stroke?n.stroke:a.stroke).style("stroke-width",a.strokeWidth)}else if(n.type===St.AREA)e.select("rect.area").empty()&&e.append("rect").classed(`area-${r}`,!0).attr("role",wt.IMG).attr("aria-label","area").attr("width",i).attr("height",o).style("fill",r>3&&!n.fill?Mt.area.fill:n.fill).style("stroke",n.stroke);else if(n.type===St.SIZE){const{iconData:a,fill:s,stroke:l}=Mt.size;e.attr("fill","none").attr("role",wt.IMG).attr("aria-label","size").selectAll("rect").data(a).enter().append("rect").classed("size",!0).attr("width",c=>c.width).attr("height",c=>c.height).attr("y",()=>0).style("fill",n.fill?n.fill:s).style("stroke",n.stroke?n.stroke:l).style("stroke-width",1)}else if(n.type===St.QUARTILE){const{iconData:a}=Mt.quartile;e.selectAll("rect").attr("role",wt.IMG).attr("aria-label","quartile").data(a).enter().append("rect").attr("class",(s,l)=>`quartile-${l===0?"wrapper":"line"}`).attr("x",s=>s.x).attr("y",s=>s.y).attr("width",s=>s.width).attr("height",s=>s.height)}else if(n.type===St.ZOOM){const{iconData:a,color:s}=T(Mt,"zoom"),l=e.attr("role",wt.IMG).attr("aria-label","zoom").selectAll("g.icon").data(a).enter();l.append("g").attr("x",c=>c.x).attr("y",c=>c.y).attr("width",c=>c.width).attr("height",c=>c.height).append("polygon").attr("points","7.7 4.82 5.78 4.82 5.78 2.89 4.82 2.89 4.82 4.82 2.89 4.82 2.89 5.78 4.82 5.78 4.82 7.7 5.78 7.7 5.78 5.78 7.7 5.78 7.7 4.82").attr("fill",()=>n.color?n.color:s),l.append("path").attr("d","M9.36,8.67A5.22,5.22,0,0,0,10.59,5.3,5.3,5.3,0,1,0,5.3,10.59,5.22,5.22,0,0,0,8.67,9.36L12.32,13l.68-.68Zm-4.06,1A4.34,4.34,0,1,1,9.63,5.3,4.33,4.33,0,0,1,5.3,9.63Z").attr("fill",()=>n.color?n.color:s)}}truncateLegendText(){const e=this.getComponentContainer(),n=T(this.getOptions(),"legend","truncation"),r=T(n,"type"),i=T(n,"threshold"),o=T(n,"numCharacter"),a=e.selectAll("div.legend-item p");a.attr("id",function(){return(this.parentNode.querySelector("div.checkbox")||this.parentNode).getAttribute("aria-labelledby")}),r!==ue.NONE?a.html(function(s){const l=De(s.name);return l.length>i&&l.length!==o?_o(l,r,o):l}):a.html(s=>De(s.name))}addEventListeners(){const e=this,n=this.getComponentContainer(),r=this.getOptions(),i=T(r,"legend"),o=T(i,"truncation");n.selectAll("div.legend-item").on("mouseover",function(a){e.services.events.dispatchEvent(O.Legend.ITEM_HOVER,{hoveredElement:I(this)});const s=I(this);s.select("div.checkbox").classed("hovered",!0);const l=s.datum();l.name.length>o.threshold&&o.numCharacter<l.name.length&&o.type!==ue.NONE&&e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:a,hoveredElement:s,content:l.name})}).on("mousemove",function(a){I(this).datum().name.length>o.threshold&&o.type!==ue.NONE&&e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:a})}).on("click",function(){e.services.events.dispatchEvent(O.Legend.ITEM_CLICK,{clickedElement:I(this)});const a=I(this).datum();e.model.toggleDataLabel(a.name)}).on("mouseout",function(){const a=I(this);a.select("div.checkbox").classed("hovered",!1),a.datum().name.length>o.threshold&&o.type!==ue.NONE&&e.services.events.dispatchEvent(O.Tooltip.HIDE),e.services.events.dispatchEvent(O.Legend.ITEM_MOUSEOUT,{hoveredElement:a})}),n.selectAll("div.legend-item div.checkbox").on("keyup",function(a){a.key&&a.key==="Tab"&&e.services.events.dispatchEvent(O.Legend.ITEM_HOVER,{hoveredElement:I(this)})}),n.selectAll("div.legend-item div.checkbox").on("keydown",function(a,s){a.key&&a.key===" "?(a.preventDefault(),e.model.toggleDataLabel(s.name)):a.key&&a.key==="Tab"&&e.services.events.dispatchEvent(O.Legend.ITEM_MOUSEOUT,{hoveredElement:I(this)})}),n.selectAll("g.additional-item").on("mouseover",function(a){const s=I(this),l=s.datum();l.name.length>o.threshold&&e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:a,hoveredElement:s,content:l.name})})}}class rS extends At{constructor(e,n,r){super(e,n,r),this.type="chart-clip",this.renderType=ct.SVG,this.chartClipId="chart-clip-id-"+Math.floor(Math.random()*99999999999),this.init()}init(){this.model.set({chartClipId:this.chartClipId},{skipUpdate:!0})}render(e=!0){this.createClipPath()}createClipPath(){const e=this.parent,{cartesianScales:n}=this.services;if(!n)throw new Error("Service cartesianScales was undefined");const r=n.getMainXScale(),i=n.getMainYScale(),[o,a]=r.range(),[s,l]=i.range();if(!e)throw new Error("svg is undefined");this.chartClipPath=j.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const c=j.appendOrSelect(this.chartClipPath,`rect.${this.type}`);a-o>0&&c.attr("x",o).attr("y",l).attr("width",a-o).attr("height",s-l),this.chartClipPath.merge(c).lower()}}class iS extends rS{constructor(){super(...arguments),this.type="canvas-chart-clip",this.chartClipId="canvas-chart-clip-id-"+Math.floor(Math.random()*99999999999)}createClipPath(){const e=this.parent,{width:n,height:r}=j.getSVGElementSize(this.parent,{useAttrs:!0});this.chartClipPath=j.appendOrSelect(e,`clipPath.${this.type}`).attr("id",this.chartClipId);const i=j.appendOrSelect(this.chartClipPath,`rect.${this.type}`);i.attr("x",0).attr("y",0).attr("width",n).attr("height",r),this.chartClipPath.merge(i).lower()}}var an,Ct;(function(t){t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"})(Ct||(Ct={}));var Dl=(an={},an[Ct.LEFT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left-e.offsetWidth)}},an[Ct.RIGHT]=function(t,e,n){return{top:t.top-Math.round(e.offsetHeight/2)+Math.round(n.height/2),left:Math.round(t.left+n.width)}},an[Ct.TOP]=function(t,e,n){return{top:Math.round(t.top-e.offsetHeight),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},an[Ct.BOTTOM]=function(t,e,n){return{top:Math.round(t.top+n.height),left:t.left-Math.round(e.offsetWidth/2)+Math.round(n.width/2)}},an),kl=typeof window<"u"?window:{innerHeight:0,innerWidth:0},Rh=(function(){function t(e){e===void 0&&(e={}),this.positions=Dl,this.positions=Object.assign({},Dl,e)}return t.prototype.getRelativeOffset=function(e){for(var n={left:e.offsetLeft,top:e.offsetTop};e.offsetParent&&getComputedStyle(e.offsetParent).position==="static";)n.left+=e.offsetLeft,n.top+=e.offsetTop,e=e.offsetParent;return n},t.prototype.getAbsoluteOffset=function(e){for(var n=e,r={top:0,left:0};n.offsetParent;){var i=getComputedStyle(n.offsetParent);i.position==="static"&&i.marginLeft&&i.marginTop&&(parseInt(i.marginTop,10)&&(r.top+=parseInt(i.marginTop,10)),parseInt(i.marginLeft,10)&&(r.left+=parseInt(i.marginLeft,10))),n=n.offsetParent}var o=e.getBoundingClientRect(),a=document.body.getBoundingClientRect();return{top:o.top-a.top+r.top,left:o.left-a.left+r.left}},t.prototype.findRelative=function(e,n,r){var i=this.getRelativeOffset(e),o=e.getBoundingClientRect();return this.calculatePosition(i,o,n,r)},t.prototype.findAbsolute=function(e,n,r){var i=this.getAbsoluteOffset(e),o=e.getBoundingClientRect();return this.calculatePosition(i,o,n,r)},t.prototype.findPosition=function(e,n,r,i){i===void 0&&(i=this.getAbsoluteOffset.bind(this));var o=i(e),a=e.getBoundingClientRect();return this.calculatePosition(o,a,n,r)},t.prototype.findPositionAt=function(e,n,r){return this.calculatePosition(e,{top:0,left:0,height:0,width:0},n,r)},t.prototype.getPlacementBox=function(e,n){var r=e.offsetHeight+n.top,i=e.offsetWidth+n.left;return{top:n.top,bottom:r,left:n.left,right:i}},t.prototype.addOffset=function(e,n,r){return n===void 0&&(n=0),r===void 0&&(r=0),Object.assign({},e,{top:e.top+n,left:e.left+r})},t.prototype.setElement=function(e,n){e.style.top=n.top+"px",e.style.left=n.left+"px"},t.prototype.findBestPlacement=function(e,n,r,i,o){var a=this;i===void 0&&(i=this.defaultContainerFunction.bind(this)),o===void 0&&(o=this.findPosition.bind(this));var s=r.map(function(l){var c=o(e,n,l),u=a.getPlacementBox(n,c),h=0,f=0,d=i();u.top<d.top?h=d.top-u.top:u.bottom>d.height&&(h=u.bottom-d.height),u.left<d.left?f=d.left-u.left:u.right>d.width&&(f=u.right-d.width),h&&!f?f=1:f&&!h&&(h=1);var p=n.offsetHeight*n.offsetWidth,E=h*f,m=p-E,b=m/p;return{placement:l,weight:b}});return s.sort(function(l,c){return c.weight-l.weight}),s[0].placement},t.prototype.findBestPlacementAt=function(e,n,r,i){var o=this;i===void 0&&(i=this.defaultContainerFunction.bind(this));var a=function(s,l,c){return o.findPositionAt(e,l,c)};return this.findBestPlacement(null,n,r,i,a)},t.prototype.defaultContainerFunction=function(){return{top:0,left:0,height:kl.innerHeight,width:kl.innerWidth}},t.prototype.calculatePosition=function(e,n,r,i){return this.positions[i]?this.positions[i](e,r,n):(console.error("No function found for placement, defaulting to 0,0"),{left:0,top:0})},t})();new Rh;class oS extends At{constructor(e,n,r){super(e,n,r),this.type="tooltip",this.renderType=ct.HTML,this.isEventListenerAdded=!1,this.lastTriggeredEventType="",this.positionService=new Rh,this.handleShowTooltip=i=>{const o=i.detail.data||i.detail.items,a=I(i.detail.event.target).datum();let s;const l=this.formatItems(this.getItems(i));i.detail.content?s=`<div class="title-tooltip"><p>${Er(i.detail.content)}</p></div>`:s=Er(this.getTooltipHTML(l));const c=j.appendOrSelect(this.tooltip,"div.content-box");if(T(this.getOptions(),"tooltip","customHTML"))if(i.detail.content){const u=`<div class="title-tooltip"><p>${Er(i.detail.content)}</p></div>`;c.html(u)}else c.html(`<div class="title-tooltip"><p>${Er(this.model.getOptions().tooltip.customHTML(o,s,a))}</p></div>`);else c.html(s);c.selectAll(".datapoint-tooltip").each(function(u,h){const f=l[h];l[h]&&l[h].color&&I(this).select(".tooltip-color").attr("class","tooltip-color").style("background-color",f.color)}),this.positionTooltip(i),this.tooltip.classed("hidden",!1).attr("aria-hidden",!1),this.lastTriggeredEventType=i.type},this.handleHideTooltip=()=>{this.tooltip.classed("hidden",!0).attr("aria-hidden",!0)},this.init()}addTooltipEventListener(){this.services.events.addEventListener(O.Tooltip.MOVE,e=>{this.lastTriggeredEventType!==O.Toolbar.SHOW_TOOLTIP&&this.tooltip.classed("hidden")===!1&&this.positionTooltip(e)}),this.services.events.addEventListener(O.Tooltip.SHOW,this.handleShowTooltip),this.services.events.addEventListener(O.Tooltip.HIDE,this.handleHideTooltip),this.services.events.addEventListener(O.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.addEventListener(O.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.addEventListener(O.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}removeTooltipEventListener(){this.services.events.removeEventListener(O.Tooltip.MOVE,null),this.services.events.removeEventListener(O.Tooltip.SHOW,this.handleShowTooltip),this.services.events.removeEventListener(O.Tooltip.HIDE,this.handleHideTooltip),this.services.events.removeEventListener(O.Chart.MOUSEOUT,this.handleHideTooltip),this.services.events.removeEventListener(O.Toolbar.SHOW_TOOLTIP,this.handleShowTooltip),this.services.events.removeEventListener(O.Toolbar.HIDE_TOOLTIP,this.handleHideTooltip)}getItems(e){return e.detail.items?e.detail.items:[]}formatItems(e){const n=this.getOptions(),r=T(n,"tooltip","truncation","type"),i=T(n,"tooltip","truncation","threshold"),o=T(n,"tooltip","truncation","numCharacter");return r!==ue.NONE?e.map(a=>{const s=a.labelIcon?12:0;return a.value=a.value?this.valueFormatter(a.value,a.label):a.value,a.label&&a.label.length+s>i&&(a.label=_o(a.label,r,o)),a.value&&a.value.length>i&&(a.value=_o(a.value,r,o)),a}):e.map(a=>(a.value=a.value?this.valueFormatter(a.value,a.label):a.value,a))}getTooltipHTML(e){return'<ul class="multi-tooltip">'+e.map(n=>`<li>
					<div class="datapoint-tooltip${n.bold?" bold":""}">
						${n.class||n.color?`<div class="tooltip-color ${n.class}"></div>`:""}
						<div class="label">
						<p>${n.label||""}</p>
						${n.labelIcon?`<span class="label-icon"/>${n.labelIcon}</span>`:""}
						</div>
						${n.value===void 0||n.value===null?"":`<p class="value"/>${n.value}</p>`}
					</div>
				</li>`).join("")+"</ul>"}isDate(e){return e instanceof Date}valueFormatter(e,n){const r=this.getOptions(),i=T(r,"tooltip","valueFormatter"),{code:o,number:a,date:s}=T(r,"locale");if(i)return i(e,n);if(this.isDate(e))return s(e,o,{month:"short",day:"numeric",year:"numeric"});try{if(typeof e=="string"&&/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/.test(e)){const l=new Date(e);return s(l,o,{month:"short",day:"numeric",year:"numeric"})}}catch{}return a(e,o)}render(e=!1){const n=this.getOptions(),r=T(n,"tooltip","enabled");if(r){const i=I(this.services.domUtils.getHolder()),o=T(n,"style","prefix");this.tooltip=j.appendOrSelect(i,`div.${Wt}--${o}--tooltip`),this.tooltip.style("max-width",null).attr("role","tooltip"),this.isEventListenerAdded||(this.addTooltipEventListener(),this.isEventListenerAdded=!0),this.tooltip.classed("hidden",!0)}else!r&&this.isEventListenerAdded&&(this.removeTooltipEventListener(),this.isEventListenerAdded=!1)}addOffsetByPlacement(e,n,r){const i=Object.assign({},e);return n==Ct.LEFT?i.left-=r:n==Ct.RIGHT?i.left+=r:n==Ct.TOP?i.top-=r:n==Ct.BOTTOM&&(i.top+=r),i}positionTooltip(e){const n=this.services.domUtils.getHolder(),r=n.offsetWidth,i=n.offsetHeight,o=this.tooltip.node(),a=this.getOptions(),s=T(a,"zoomBar","top","enabled"),l=!!T(e,"detail","noWrap"),c=Array.isArray(T(e,"detail","placements")),u=c?T(e,"detail","placements"):[Ct.RIGHT,Ct.LEFT,Ct.TOP,Ct.BOTTOM];let h,{horizontalOffset:f}=Fs;const{defaultOffset:d}=Fs;if(this.tooltip.select("div.title-tooltip").classed("title-tooltip-nowrap",l),c){const m=T(e,"detail","event","target"),b=this.services.domUtils.getElementOffset(m,!0);h=this.positionService.findBestPlacementAt(b,o,u,()=>({top:0,left:0,width:r,height:i}));let S=this.positionService.findPosition(m,o,h,()=>this.services.domUtils.getElementOffset(m));S=this.addOffsetByPlacement(S,h,d),this.positionService.setElement(o,S);return}let p=T(e,"detail","mousePosition");if(!p)p=mn(T(e,"detail","event"),n);else{const m=T(a,"zoomBar","top","type"),b=Bs.height[m];s&&(p[1]+=b+Bs.spacerHeight)}p[0]/r>.9?h=Ct.LEFT:p[0]/r<.1?h=Ct.RIGHT:h=this.positionService.findBestPlacementAt({left:p[0],top:p[1]},o,u,()=>({top:void 0,left:void 0,width:r,height:i})),h===Ct.LEFT&&(f*=-1);const E=this.positionService.findPositionAt({left:p[0]+f,top:p[1]},o,h);this.positionService.setElement(o,E)}}const aS=class Dr extends At{constructor(){super(...arguments),this.type="grid-brush",this.renderType=ct.SVG,this.selectionSelector="rect.selection",this.frontSelectionSelector="rect.frontSelection"}render(e=!0){const n=this.parent,r=this.getComponentContainer({isPresentational:!0});if(!n)throw new Error("SVG was not defined");const i=j.appendOrSelect(n,"svg.chart-grid-backdrop"),o=j.appendOrSelect(i,`g.${this.type}`),a=j.appendOrSelect(o,this.selectionSelector),{width:s,height:l}=j.getSVGElementSize(i,{useAttrs:!0}),{cartesianScales:c}=this.services,u=c.getMainXScaleType(),h=c.getMainXScale(),[f]=h.range();r.attr("transform",`translate(${f},0)`);const d=j.appendOrSelect(r,this.frontSelectionSelector);if(h&&u===be.TIME){let p=this.model.get("zoomDomain");p===void 0&&(p=this.services.zoom.getDefaultZoomBarDomain(),p&&this.model.set({zoomDomain:p},{animate:!1}));const E=g=>{const w=g[1]-g[0];let M="0,"+w.toString();const $=Math.floor(l/Dr.DASH_LENGTH),G=$*Dr.DASH_LENGTH;for(let F=0;F<$;F++)M+=","+Dr.DASH_LENGTH;M+=","+(l-G),$%2===1&&(M+=",0"),M+=","+w.toString(),M+=","+l.toString(),d.attr("stroke-dasharray",M)},m=g=>{const w=g.selection;w===null||w[0]===w[1]||(d.attr("x",parseFloat(a.attr("x"))+parseFloat(i.attr("x"))).attr("y",a.attr("y")).attr("width",a.attr("width")).attr("height",a.attr("height")).style("cursor","pointer").style("display",null),E(w))},b=(g,w)=>{const M=Ww().range([0,s]).domain(p);let $=[M.invert(g),M.invert(w)];$[0].valueOf()===$[1].valueOf()&&($=this.services.zoom.getDefaultZoomBarDomain()),(p[0].valueOf()!==$[0].valueOf()||p[1].valueOf()!==$[1].valueOf())&&this.services.zoom.handleDomainChange($)};let S;const _=g=>{const w=g.selection;w!==null&&(b(w[0],w[1]),o.call(S.move,null),d.style("display","none"))};l!=0&&s!=0&&(S=nT().extent([[0,0],[s-1,l]]).on("start brush end",m).on("end.brushed",_),o.call(S));const y=this.services.zoom.getZoomRatio();i.on("click",function(g){if(g.shiftKey){const w=this.services.domUtils.getHolder(),M=mn(o.node(),w)[0];let $=M-s*y/2;$<0&&($=0);let G=M+s*y/2;G>s&&(G=s),b($,G)}})}}};aS.DASH_LENGTH=4;var Ao=Math.PI,Lo=2*Ao,Ue=1e-6,sS=Lo-Ue;function Il(){this._x0=this._y0=this._x1=this._y1=null,this._=""}Il.prototype={constructor:Il,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,l=r-e,c=o-t,u=a-e,h=c*c+u*u;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Ue)if(!(Math.abs(u*s-l*c)>Ue)||!i)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var f=n-o,d=r-a,p=s*s+l*l,E=f*f+d*d,m=Math.sqrt(p),b=Math.sqrt(h),S=i*Math.tan((Ao-Math.acos((p+h-E)/(2*m*b)))/2),_=S/b,y=S/m;Math.abs(_-1)>Ue&&(this._+="L"+(t+_*c)+","+(e+_*u)),this._+="A"+i+","+i+",0,0,"+ +(u*f>c*d)+","+(this._x1=t+y*s)+","+(this._y1=e+y*l)}},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n,o=!!o;var a=n*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,u=1^o,h=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+l+","+c:(Math.abs(this._x1-l)>Ue||Math.abs(this._y1-c)>Ue)&&(this._+="L"+l+","+c),n&&(h<0&&(h=h%Lo+Lo),h>sS?this._+="A"+n+","+n+",0,1,"+u+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+u+","+(this._x1=l)+","+(this._y1=c):h>Ue&&(this._+="A"+n+","+n+",0,"+ +(h>=Ao)+","+u+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};class lS extends At{constructor(){super(...arguments),this.type="area",this.renderType=ct.SVG,this.gradient_id="gradient-id-"+Math.floor(Math.random()*99999999999),this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.area").transition("legend-hover-area").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-area"})).attr("opacity",r=>r.name!==n.datum().name?we.opacity.unselected:we.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",we.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"area graphs",withinChartClip:!0}),r=this.getOptions();let i=[0,0];const{cartesianScales:o}=this.services,a=o.getOrientation(),s=Sh().curve(this.services.curves.getD3Curve()).defined(g=>{const w=o.getRangeIdentifier();return g[w]!=null}),l=this.model.getGroupedData(this.configs.groups),c=T(r,"bounds"),u=c&&l&&l.length===1;!u&&c&&console.warn(`Bounds can only be shown when having 1 single datagroup, you've supplied ${l.length}`);let h=0;const f=(g,w)=>{T(r,"axes",g,"includeZero")===!1&&w[0]>0&&w[1]>0&&(h=w[0])},d=g=>u?o.getBoundedScaledValues(g)[0]:o.getRangeValue(h),p=g=>u?o.getBoundedScaledValues(g)[1]:o.getRangeValue(g);a===de.VERTICAL?(i=o.getMainYScale().domain(),f(o.getMainYAxisPosition(),i),s.x(g=>o.getDomainValue(g)).y0(g=>d(g)).y1(g=>p(g))):(i=o.getMainXScale().domain(),f(o.getMainXAxisPosition(),i),s.x0(g=>d(g)).x1(g=>p(g)).y(g=>o.getDomainValue(g)));const E=T(r,"color","gradient","enabled"),m=l&&l.length===1&&E;l.length>1&&E&&console.error("Gradients can only be enabled when having 1 single dataset");const b=n.selectAll("path.area").data(l,g=>g.name),S=I(this.services.domUtils.getMainContainer());if(b.exit().attr("opacity",0).remove(),!l.length)return;if(m){const g=S.select(`path.${this.model.getColorClassName({classNameTypes:[kt.STROKE],dataGroupName:l[0].name})}`).node();let w;if(g)w=getComputedStyle(g,null).getPropertyValue("stroke");else{const M=T(this.model.getOptions(),"color","scale");if(M!==null){const $=Object.keys(M);w=M[$[0]]}}Qn.appendOrUpdateLinearGradient({svg:this.parent,id:this.services.domUtils.generateElementIDString(`${l[0].name.replace(" ","")}_${this.gradient_id}`),x1:"0%",x2:"0%",y1:"0%",y2:"100%",stops:Qn.getStops(i,w)})}else this.parent.selectAll("defs linearGradient").empty()||this.parent.selectAll("defs linearGradient").each(function(){this.parentNode.remove()});const _=this,y=b.enter().append("path");m?y.merge(b).style("fill",g=>`url(#${this.services.domUtils.generateElementIDString(`${g.name.replace(" ","")}_${this.gradient_id}`)})`).attr("class","area").attr("class",g=>this.model.getColorClassName({classNameTypes:[kt.FILL],dataGroupName:g.name,originalClassName:"area"})).attr("d",g=>{const{data:w}=g;return s(w)}):(y.attr("opacity",0).merge(b).attr("class","area").attr("class",g=>this.model.getColorClassName({classNameTypes:[kt.FILL,kt.STROKE],dataGroupName:g.name,originalClassName:"area"})).style("fill",g=>_.model.getFillColor(g.name,null,g.data)).transition().call(g=>this.services.transitions.setupTransition({transition:g,name:"area-update-enter",animate:e})).attr("opacity",u?1:we.opacity.selected).attr("d",g=>{const{data:w}=g;return s(w)}),u&&y.attr("fill-opacity",we.opacity.selected).style("stroke",g=>_.model.getStrokeColor(g.name,null,g.data)).style("stroke-dasharray","2, 2").attr("stroke-width",.7+"px"))}destroy(){const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class Zi extends At{constructor(){super(...arguments),this.type="line",this.renderType=ct.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail;this.parent.selectAll("path.line").transition("legend-hover-line").call(r=>this.services.transitions.setupTransition({transition:r,name:"legend-hover-line"})).attr("opacity",r=>r.name!==n.datum().name?Ai.opacity.unselected:Ai.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.line").transition("legend-mouseout-line").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-line"})).attr("opacity",Ai.opacity.selected)}}init(){const{events:e}=this.services;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"lines",withinChartClip:!0}),{cartesianScales:r,curves:i}=this.services,o=d=>r.getDomainValue(d),a=d=>r.getRangeValue(d),[s,l]=Cr(o,a,r.getOrientation()),c=this.getOptions(),u=Th().x(s).y(l).curve(i.getD3Curve()).defined(d=>{const p=r.getRangeIdentifier(d);return d[p]!=null});let h=[];if(this.configs.stacked){const d=Object.keys(c.axes).some(E=>c.axes[E].percentage),{groupMapsTo:p}=c.data;h=this.model.getStackedData({groups:this.configs.groups,percentage:d}).map(E=>{const m=this.services.cartesianScales.getDomainIdentifier(E),b=this.services.cartesianScales.getRangeIdentifier(E);return{name:T(E,0,p),data:E.map(S=>({[m]:S.data.sharedStackKey,[p]:S[p],[b]:S[1]})),hidden:!zE(E,S=>S[0]!==S[1])}})}else h=this.model.getGroupedData(this.configs.groups);const f=n.selectAll("path.line").data(h,d=>d.name);f.exit().attr("opacity",0).remove(),f.enter().append("path").classed("line",!0).attr("opacity",0).merge(f).data(h,d=>d.name).attr("class",d=>this.model.getColorClassName({classNameTypes:[kt.STROKE],dataGroupName:d.name,originalClassName:"line"})).style("stroke",d=>this.model.getStrokeColor(d.name,null,d.data)).attr("role",wt.GRAPHICS_SYMBOL).attr("aria-roledescription","line").attr("aria-label",d=>{const{data:p}=d;return p.map(E=>{const m=this.services.cartesianScales.getRangeIdentifier(E);return E[m]}).join(",")}).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"line-update-enter",animate:e})).attr("opacity",d=>d.hidden?0:1).attr("d",d=>{const{data:p}=d;return u(p)})}destroy(){const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}const Rl=5;function cS(t,e){return t>e-Rl&&t<e+Rl}class uS extends At{constructor(){super(...arguments),this.type="ruler",this.renderType=ct.SVG,this.isXGridEnabled=T(this.getOptions(),"grid","x","enabled"),this.isYGridEnabled=T(this.getOptions(),"grid","y","enabled"),this.isEventListenerAdded=!1}render(e=!1){const n=T(this.getOptions(),"ruler","enabled");this.drawBackdrop(),n&&!this.isEventListenerAdded?this.addBackdropEventListeners():!n&&this.isEventListenerAdded&&this.removeBackdropEventListeners()}removeBackdropEventListeners(){this.isEventListenerAdded=!1,this.backdrop.on("mousemove mouseover mouseout",null)}formatTooltipData(e){return e}showRuler(e,[n,r]){const i=this.parent,o=this.services.cartesianScales.getOrientation(),a=this.model.getDisplayData(),s=this.services.cartesianScales.getRangeScale(),[l,c]=s.range(),u=o===de.HORIZONTAL?r:n,h=j.appendOrSelect(i,"g.ruler").attr("aria-label","ruler"),f=j.appendOrSelect(h,"line.ruler-line"),d=i.selectAll("[role=graphics-symbol]"),p=a.map(m=>({domainValue:this.services.cartesianScales.getDomainValue(m),originalData:m})).filter(m=>cS(m.domainValue,u));if(this.pointsWithinLine&&p.length===this.pointsWithinLine.length&&p.map(m=>m.domainValue).join()===this.pointsWithinLine.map(m=>m.domainValue).join())return this.pointsWithinLine=p,this.services.events.dispatchEvent(O.Tooltip.MOVE,{mousePosition:[n,r]});this.pointsWithinLine=p;const E=this.pointsWithinLine.reduce((m,b)=>{if(m.length===0)return m.push(b),m;const S=m[0].domainValue,_=Math.abs(u-b.domainValue),y=Math.abs(u-S);return _>y||(_<y?m=[b]:m.push(b)),m},[]);if(E.length>0){const m=E.map(y=>y.originalData).filter(y=>{const g=this.services.cartesianScales.getRangeIdentifier(y);return y[g]!=null}),b=E.map(y=>y.domainValue),S=d.filter(y=>{const g=this.services.cartesianScales.getDomainValue(y);return b.includes(g)});this.elementsToHighlight&&this.elementsToHighlight.size()>0&&!jE(this.elementsToHighlight,S)&&this.hideRuler(),S.dispatch("mouseover"),this.elementsToHighlight=S,this.services.events.dispatchEvent(O.Tooltip.SHOW,{event:e,mousePosition:[n,r],hoveredElement:f,data:this.formatTooltipData(m)}),h.attr("opacity",1);const _=E[0];o==="horizontal"?f.attr("x1",c).attr("x2",l).attr("y1",_.domainValue).attr("y2",_.domainValue):f.attr("y1",c).attr("y2",l).attr("x1",_.domainValue).attr("x2",_.domainValue)}else this.hideRuler()}hideRuler(){const e=this.parent,n=j.appendOrSelect(e,"g.ruler");e.selectAll("[role=graphics-symbol]").dispatch("mouseout"),this.services.events.dispatchEvent(O.Tooltip.HIDE),n.attr("opacity",0)}addBackdropEventListeners(){this.isEventListenerAdded=!0;const e=this,n=this.services.domUtils.getHolder(),r=this.model.getDisplayData();let i=function(o){const a=mn(o,e.parent.node());e.showRuler(o,a)};if(r.length>100){const o=r.length%50*12.5;i=z_(function(a){const{mousePosition:s}=this;e.showRuler(a,s)},o,n)}this.backdrop.on("mousemove mouseover",i).on("mouseout",this.hideRuler.bind(this))}drawBackdrop(){const e=this.parent;this.backdrop=j.appendOrSelect(e,"svg.chart-grid-backdrop")}}class kr extends At{constructor(){super(...arguments),this.type="scatter",this.renderType=ct.SVG,this.handleChartHolderOnHover=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-hover-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-hover-scatter"})}).attr("opacity",1)},this.handleChartHolderOnMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("chart-holder-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"chart-holder-mouseout-scatter"})}).attr("opacity",0)},this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-hover-scatter").call(i=>{var o;return(o=this.services.transitions)==null?void 0:o.setupTransition({transition:i,name:"legend-hover-scatter"})}).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle.dot").transition("legend-mouseout-scatter").call(e=>{var n;return(n=this.services.transitions)==null?void 0:n.setupTransition({transition:e,name:"legend-mouseout-scatter"})}).attr("opacity",1)}}init(){const{events:e}=this.services;if(!e)throw new Error("Services events are undefined.");e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut);const{fadeInOnChartHolderMouseover:n}=this.configs;n&&(e.addEventListener(O.Chart.MOUSEOVER,this.handleChartHolderOnHover),e.addEventListener(O.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut))}filterBasedOnZoomDomain(e){const{cartesianScales:n}=this.services;if(!n)throw new Error("Services cartesianScales are undefined.");const r=n.getDomainIdentifier(e),i=this.model.get("zoomDomain");return i!==void 0?e.filter(o=>o[r].getTime()>=i[0].getTime()&&o[r].getTime()<=i[1].getTime()):e}getScatterData(){const e=this.getOptions(),{stacked:n}=this.configs;let r;if(n){const i=Object.keys(e.axes).some(o=>e.axes[o].percentage);r=this.model.getStackedData({groups:this.configs.groups,percentage:i})}else{const{cartesianScales:i}=this.services;if(!i)throw new Error("Services cartesianScales are undefined.");r=this.model.getDisplayData(this.configs.groups).filter(o=>{const a=i.getRangeIdentifier(o);return o[a]!==void 0&&o[a]!==null})}return this.filterBasedOnZoomDomain(r)}render(e){if(!(T(this.getOptions(),"points","enabled")||T(this.getOptions(),"bubble","enabled")))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,{cartesianScales:o}=this.services;if(!o)throw new Error("Services cartesianScales are undefined.");const a=o.getDomainIdentifier(),s=n.selectAll("circle.dot").data(this.getScatterData(),c=>`${c[i]}-${c[a]}`);s.exit().attr("opacity",0).remove();const l=s.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(s);this.styleCircles(l,e),this.addEventListeners()}isDatapointThresholdAnomaly(e){const{handleThresholds:n}=this.configs;if(!n)return!1;const{cartesianScales:r}=this.services;if(!r)throw new Error("Cartesian scales service is undefined");const i=r.getOrientation(),[o,a]=Cr(r.getHighestDomainThreshold(),r.getHighestRangeThreshold(),i),[s,l]=Cr(h=>r.getDomainValue(h),h=>r.getRangeValue(h),i),c=s(e),u=l(e);return a&&o?u<=a.scaleValue&&c>=o.scaleValue:a?u<=a.scaleValue:o?c>=o.scaleValue:!1}styleCircles(e,n){const r=this.getOptions(),{filled:i,fillOpacity:o}=r.points,{cartesianScales:a}=this.services;if(!a)throw new Error("Cartesian scales service is undefined");const{groupMapsTo:s}=r.data,l=d=>a.getDomainValue(d),c=d=>a.getRangeValue(d),[u,h]=Cr(l,c,a.getOrientation()),{fadeInOnChartHolderMouseover:f}=this.configs;e.raise().classed("dot",!0).attr("class",d=>{const p=a.getDomainIdentifier(d),E=this.model.getIsFilled(d[s],d[p],d,i)?[kt.FILL,kt.STROKE]:[kt.STROKE];return this.model.getColorClassName({classNameTypes:E,dataGroupName:d[s],originalClassName:"dot"})||""}).classed("threshold-anomaly",d=>this.isDatapointThresholdAnomaly(d)).classed("filled",d=>{const p=a.getDomainIdentifier(d);return this.model.getIsFilled(d[s],d[p],d,i)}).classed("unfilled",d=>{const p=a.getDomainIdentifier(d);return!this.model.getIsFilled(d[s],d[p],d,i)}).transition().call(d=>{var p;return(p=this.services.transitions)==null?void 0:p.setupTransition({transition:d,name:"scatter-update-enter",animate:n})}).attr("cx",u).attr("cy",h).attr("r",r.points.radius).style("fill",d=>{const p=a.getDomainIdentifier(d);if(this.model.getIsFilled(d[s],d[p],d,i))return this.model.getFillColor(d[s],d[p],d)}).style("stroke",d=>{const p=a.getDomainIdentifier(d);return this.model.getStrokeColor(d[s],d[p],d)}).attr("fill-opacity",i?o:1).attr("opacity",f?0:1).attr("role",wt.GRAPHICS_SYMBOL).attr("aria-roledescription","point").attr("aria-label",d=>{const p=a.getRangeIdentifier(d);return d[p]}),this.addEventListeners()}getTooltipAdditionalItems(e){return null}addEventListeners(){const e=this,{groupMapsTo:n}=e.getOptions().data;if(!this.parent)throw new Error("Parent not defined");this.parent.selectAll("circle").on("mouseover",function(r,i){var o,a;const s=I(this);s.classed("hovered",!0).attr("class",l=>e.model.getColorClassName({classNameTypes:[kt.FILL],dataGroupName:l[n],originalClassName:s.attr("class")})).style("fill",l=>{var c;const u=(c=e.services.cartesianScales)==null?void 0:c.getDomainIdentifier(l);return e.model.getFillColor(l[n],l[u],l)}).classed("unfilled",!1),(o=e.services.events)==null||o.dispatchEvent(O.Tooltip.SHOW,{event:r,hoveredElement:s,data:[i],additionalItems:e.getTooltipAdditionalItems(i)}),(a=e.services.events)==null||a.dispatchEvent(O.Scatter.SCATTER_MOUSEOVER,{event:r,element:s,datum:i})}).on("mousemove",function(r,i){var o,a;const s=I(this);(o=e.services.events)==null||o.dispatchEvent(O.Scatter.SCATTER_MOUSEMOVE,{event:r,element:s,datum:i}),(a=e.services.events)==null||a.dispatchEvent(O.Tooltip.MOVE,{event:r})}).on("click",function(r,i){var o;(o=e.services.events)==null||o.dispatchEvent(O.Scatter.SCATTER_CLICK,{event:r,element:I(this),datum:i})}).on("mouseout",function(r,i){var o,a,s;const l=I(this);if(l.classed("hovered",!1),!e.configs.filled){const{filled:c}=e.getOptions().points,u=(o=e.services.cartesianScales)==null?void 0:o.getDomainIdentifier(i),h=e.model.getIsFilled(i[n],i[u],i,c);l.classed("unfilled",!h).style("fill",f=>h||c?e.model.getFillColor(f[n],f[u],f):null)}(a=e.services.events)==null||a.dispatchEvent(O.Scatter.SCATTER_MOUSEOUT,{event:r,element:l,datum:i}),(s=e.services.events)==null||s.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:l})})}destroy(){var e;(e=this.parent)==null||e.selectAll("circle").on("mousemove",null).on("mouseout",null);const{events:n}=this.services;if(!n)throw new Error("Services events undefined");n.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),n.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut),n.removeEventListener(O.Chart.MOUSEOVER,this.handleChartHolderOnHover),n.removeEventListener(O.Chart.MOUSEOUT,this.handleChartHolderOnMouseOut)}}class hS extends At{constructor(){super(...arguments),this.type="zero-line",this.renderType=ct.SVG}render(e){const n=this.services.cartesianScales.getRangeAxisPosition({groups:this.configs.groups}),r=this.services.cartesianScales.getScaleByPosition(n),[i,o]=r.domain(),a=i>0&&o<0||i<0&&o>0,s=this.getComponentContainer({isPresentational:!0});if(!a){s.selectAll("line.domain").remove();return}const[l,c]=this.services.cartesianScales.getDomainScale().range();let u=+r(0)+.5;u||(u=r.range()[0]);const h=Yu({x0:l,x1:c,y0:u,y1:u},this.services.cartesianScales.getOrientation());j.appendOrSelect(s,"line.domain").transition().call(f=>this.services.transitions.setupTransition({transition:f,name:"zero-line-update",animate:e})).attr("y1",h.y0).attr("y2",h.y1).attr("x1",h.x0).attr("x2",h.x1)}}class Nl extends uS{formatTooltipData(e){return e.reverse()}}class dS extends Ih{constructor(){super(...arguments),this.type="meter-title",this.renderType=ct.SVG}render(e=!1){const n=T(this.model.getDisplayData(),0),r=this.getOptions(),i=this.getComponentContainer({ariaLabel:"meter title"}),{groupMapsTo:o}=r.data,a=r.locale.translations.meter.title;if(T(r,"meter","proportional"))this.displayTotal(),this.displayBreakdownTitle();else{const c=i.selectAll("text.meter-title").data(a?[a]:[n[o]]);c.enter().append("text").classed("meter-title",!0).merge(c).attr("x",0).attr("y","1em").text(u=>u),c.exit().remove(),this.appendPercentage()}this.displayStatus();const s=this.getMaxTitleWidth(),l=j.appendOrSelect(i,"text.meter-title");s>0&&l.node().getComputedTextLength()>s&&this.truncateTitle(l,s)}displayBreakdownTitle(){const e=this.getComponentContainer(),n=this.getOptions(),r=this.model.getMaximumDomain(this.model.getDisplayData()),i=T(n,"meter","proportional","total"),o=T(n,"meter","proportional","unit")?T(n,"meter","proportional","unit"):"";let a;if(r===i)a=null;else{const u=i!==null?i-r:r,h=T(n,"meter","proportional","breakdownFormatter"),{code:f,number:d}=T(n,"locale");a=h!==null?h({datasetsTotal:r,total:i}):`${d(r,f)} ${o} used (${d(u,f)} ${o} available)`}const s=e.selectAll("text.proportional-meter-title").data([a]);s.enter().append("text").classed("proportional-meter-title",!0).merge(s).attr("x",0).attr("y","1em").text(u=>u),s.exit().remove();const l=this.getMaxTitleWidth(),c=j.appendOrSelect(e,"text.proportional-meter-title");l>0&&c.node().getComputedTextLength()>l&&this.truncateTitle(c,l)}displayTotal(){const e=this.getComponentContainer(),n=this.getOptions(),r=T(n,"meter","proportional","total"),i=r?T(n,"meter","proportional","total"):this.model.getMaximumDomain(this.model.getDisplayData()),o=T(n,"meter","proportional","unit")?T(n,"meter","proportional","unit"):"",a=T(n,"meter","proportional","totalFormatter"),{code:s,number:l}=T(n,"locale"),c=a!==null?a(i):`${l(r,s)} ${o} total`,u=j.getHTMLElementSize(this.parent.node()).width,h=e.selectAll("text.proportional-meter-total").data([c]);h.enter().append("text").classed("proportional-meter-total",!0).merge(h).attr("x",this.model.getStatus()&&typeof u!="string"?u-$t.total.paddingRight:u).attr("y","1em").attr("text-anchor","end").text(f=>f),h.exit().remove()}displayStatus(){const e=this,n=this.getComponentContainer(),r=j.getHTMLElementSize(this.parent.node()).width||0,i=this.model.getStatus(),o=$t.status.indicatorSize/2,a=j.appendOrSelect(n,"g.status-indicator").attr("class",i!==null?`status-indicator status--${i}`:"").attr("transform",`translate(${r-o}, 0)`),s=i?[i]:[],l=a.selectAll("circle.status").data(s);l.enter().append("circle").merge(l).attr("class","status").attr("r",o).attr("cx",0).attr("cy",8);const c=a.selectAll("path.innerFill").data(s);c.enter().append("path").merge(c).attr("d",e.getStatusIconPathString(i)).attr("transform",`translate(-${o}, 0)`).attr("class","innerFill"),c.exit().remove(),l.exit().remove()}appendPercentage(){const e=T(this.model.getDisplayData(),0,"value"),{code:n,number:r}=T(this.getOptions(),"locale"),i=this.getComponentContainer(),o=j.appendOrSelect(i,"text.meter-title"),a=T(this.getOptions(),"meter","statusBar","percentageIndicator","enabled")===!0?[e]:[],s=i.selectAll("text.percent-value").data(a),l=$t.statusBar.paddingRight;s.enter().append("text").classed("percent-value",!0).merge(s).text(c=>`${c!=null?r(c,n):0}%`).attr("x",+o.attr("x")+o.node().getComputedTextLength()+l).attr("y",o.attr("y")),s.exit().remove()}truncateTitle(e,n){super.truncateTitle(e,n);const r=j.appendOrSelect(this.parent,"tspan"),i=$t.statusBar.paddingRight,o=Math.ceil(r.node().getComputedTextLength());j.appendOrSelect(this.parent,"text.percent-value").attr("x",+e.attr("x")+e.node().getComputedTextLength()+o+i)}getMaxTitleWidth(){const e=T(this.getOptions(),"meter","proportional"),n=j.getHTMLElementSize(this.parent.node()).width;if(e!==null){const r=j.appendOrSelect(this.parent,"text.proportional-meter-total").node(),i=j.getSVGElementSize(r,{useBBox:!0}).width;return n-i-$t.total.paddingLeft}else{const r=j.appendOrSelect(this.parent,"text.percent-value"),i=$t.statusBar.paddingRight,o=r.node().getComputedTextLength(),a=j.appendOrSelect(this.parent,"g.status-indicator").node(),s=j.getSVGElementSize(a,{useBBox:!0}).width+$t.status.paddingLeft;return n-o-i-s}}getStatusIconPathString(e){switch(e){case Tr.SUCCESS:return"M6.875 11.3125 3.75 8.1875 4.74375 7.25 6.875 9.34375 11.50625 4.75 12.5 5.7375 Z";case Tr.DANGER:return"M10.7 11.5 4.5 5.3 5.3 4.5 11.5 10.7 Z";case Tr.WARNING:return"M7.9375,11.125 C7.41973305,11.125 7,11.544733 7,12.0625 C7,12.580267 7.41973305,13 7.9375,13 C8.45526695,13 8.875,12.580267 8.875,12.0625 C8.875,11.544733 8.45526695,11.125 7.9375,11.125 M7.3125, 3 8.5625, 3 8.5625, 9.875 7.3125, 9.875, 7.3125, 3 Z"}}}class _a extends At{getBarWidth(){const e=this.getOptions();if(e.bars.width)return e.bars.width;const n=this.model.getDisplayData().length,r=this.services.cartesianScales.getMainXScale(),i=j.getSVGElementSize(this.parent,{useAttrs:!0}).width;if(!r.step){const o=T(e,"bars","spacingFactor");return Math.min(e.bars.maxWidth,i*o/n)}return Math.min(e.bars.maxWidth,r.step()/2)}isOutsideZoomedDomain(e,n){if(this.model.getDisplayData().length<=1)return!1;const r=this.model.get("zoomDomain");if(r!==void 0){const i=this.services.cartesianScales.getDomainScale();return e<i(r[0])||n>i(r[1])}return!1}}class fS extends _a{constructor(){super(...arguments),this.type="grouped-bar",this.renderType=ct.SVG,this.padding=5,this.defaultStepFactor=70,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.model.getDisplayData(this.configs.groups),r=this.getOptions(),{groupMapsTo:i}=r.data;this.setGroupScale();const o=this.getComponentContainer({ariaLabel:"grouped bar graphs",withinChartClip:!0}),a=lo(n.map(u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return u[h]&&typeof u[h].toString=="function"?u[h].toString():u[h]})),s=o.selectAll("g.bars").data(a,u=>u);s.exit().attr("opacity",0).remove();const l=s.enter().append("g").classed("bars",!0).attr("role",wt.GROUP).attr("data-name","bars").merge(s);l.transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-group-update-enter",animate:e})).attr("transform",u=>{const h=this.services.cartesianScales.getDomainValue(u)-this.getGroupWidth()/2;return this.services.cartesianScales.getOrientation()===de.VERTICAL?`translate(${h}, 0)`:`translate(0, ${h})`});const c=l.selectAll("path.bar").data(u=>this.getDataCorrespondingToLabel(u),u=>u[i]);c.exit().attr("opacity",0).remove(),c.enter().append("path").attr("opacity",0).merge(c).classed("bar",!0).transition().call(u=>this.services.transitions.setupTransition({transition:u,name:"bar-update-enter",animate:e})).attr("class",u=>this.model.getColorClassName({classNameTypes:[kt.FILL],dataGroupName:u[i],originalClassName:"bar"})).style("fill",u=>{const h=this.services.cartesianScales.getDomainIdentifier(u);return this.model.getFillColor(u[i],u[h],u)}).attr("d",u=>{const h=this.groupScale(u[i]),f=this.getBarWidth(),d=h,p=h+f,E=this.services.cartesianScales.getRangeAxisPosition({datum:u}),m=this.services.cartesianScales.getDomainLowerBound(E),b=this.services.cartesianScales.getValueThroughAxisPosition(E,m),S=this.services.cartesianScales.getRangeValue(u),_=this.services.cartesianScales.getDomainValue(u)-f/2,y=_+f;if(!this.isOutsideZoomedDomain(_,y))return ca({x0:d,x1:p,y0:b,y1:S},this.services.cartesianScales.getOrientation())}).attr("opacity",1).attr("role",wt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",u=>u.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=I(this);i.classed("hovered",!0),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){const i=I(this);e.services.events.dispatchEvent(O.Bar.BAR_MOUSEMOVE,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(O.Bar.BAR_CLICK,{event:n,element:I(this),datum:r})}).on("mouseout",function(n,r){const i=I(this);i.classed("hovered",!1),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}getDataCorrespondingToLabel(e){return this.model.getDisplayData(this.configs.groups).filter(n=>{const r=this.services.cartesianScales.getDomainIdentifier(n);return n[r].toString()===e})}getGroupWidth(){const e=this.model.getGroupedData(this.configs.groups),n=this.getTotalGroupPadding();return this.getBarWidth()*e.length+n}getDomainScaleStep(){const e=this.services.cartesianScales.getDomainScale(),n=this.model.getGroupedData(this.configs.groups);let r=this.defaultStepFactor;if(typeof e.step=="function")r=e.step();else if(n.length>0){const i=n.find(o=>{var a;return((a=o.data)==null?void 0:a.length)>1});if(i){const o=this.services.cartesianScales.getDomainIdentifier(i.data[0]);r=Math.abs(e(i.data[1][o])-e(i.data[0][o]))}}return r}getTotalGroupPadding(){const e=this.model.getGroupedData(this.configs.groups);return e.length===1?0:Math.min(5,5*(this.getDomainScaleStep()/this.defaultStepFactor))*(e.length-1)}getBarWidth(){const e=this.getOptions(),n=T(e,"bars","width"),r=T(e,"bars","maxWidth");if(n!==null&&(r===null||n<=r))return n;const i=this.model.getGroupedData(this.configs.groups).length,o=this.getTotalGroupPadding();return Math.min(r,(this.getDomainScaleStep()-o)/i)}setGroupScale(){const e=this.model.getActiveDataGroupNames(this.configs.groups);this.groupScale=Ku().domain(e).rangeRound([0,this.getGroupWidth()])}}class pS extends At{constructor(){super(...arguments),this.type="meter",this.renderType=ct.SVG}getStackedBounds(e,n){let r=0;return e.map((i,o)=>o!==0?(r+=n(i.value),{...i,width:Math.abs(n(i.value)-$t.dividerWidth),x:r-n(i.value)}):(r=n(i.value),{...i,width:Math.abs(n(i.value)-$t.dividerWidth),x:0}))}render(e=!0){const n=this,r=this.getComponentContainer({ariaLabel:"meter lines"}),i=this.getOptions(),o=T(i,"meter","proportional"),a=this.model.getDisplayData(),s=this.model.getStatus(),{width:l}=j.getSVGElementSize(r,{useAttrs:!0}),{groupMapsTo:c}=i.data;let u;T(i,"meter","proportional")===null?u=100:u=T(i,"meter","proportional","total")||this.model.getMaximumDomain(this.model.getDisplayData());const h=ju().domain([0,u]).range([0,l]),f=this.getStackedBounds(a,h),d=T(i,"meter","height");j.appendOrSelect(r,"rect.container").attr("x",0).attr("y",0).attr("width",l).attr("height",d||(o?$t.height.proportional:$t.height.default)),j.appendOrSelect(r,"line.rangeIndicator").attr("x1",l).attr("x2",l).attr("y1",0).attr("y2",d||(o?$t.height.proportional:$t.height.default));const p=r.selectAll("rect.value").data(f),E=s!=null&&!n.model.isUserProvidedColorScaleValid()&&!o?`value status--${s}`:"value";p.enter().append("rect").classed("value",!0).merge(p).attr("x",_=>_.x).attr("y",0).attr("height",()=>d||(o?$t.height.proportional:$t.height.default)).attr("class",_=>this.model.getColorClassName({classNameTypes:[kt.FILL],dataGroupName:_[c],originalClassName:E})).transition().call(_=>this.services.transitions.setupTransition({transition:_,name:"meter-bar-update",animate:e})).attr("width",_=>_.value>u?h(u):Math.max(_.width,2)).style("fill",_=>n.model.getFillColor(_[c],null,_)).attr("role",wt.GRAPHICS_SYMBOL).attr("aria-roledescription","value").attr("aria-label",_=>_.value),p.exit().remove();const m=T(i,"meter","peak");let b=m;m!==null&&(m>u?b=u:m<0&&(b=0));const S=r.selectAll("line.peak").data(b==null?[]:[b]);S.enter().append("line").classed("peak",!0).merge(S).attr("y1",0).attr("y2",()=>d||(o?$t.height.proportional:$t.height.default)).transition().call(_=>this.services.transitions.setupTransition({transition:_,name:"peak-line-update",animate:e})).attr("x1",_=>h(_)).attr("x2",_=>h(_)).attr("role",wt.GRAPHICS_SYMBOL).attr("aria-roledescription","peak").attr("aria-label",_=>_),S.exit().remove(),this.services.domUtils.setSVGMaxHeight(),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this,i=T(e,"meter","proportional");this.parent.selectAll("rect.value").on("mouseover",function(o,a){const s=I(this);r.services.events.dispatchEvent(O.Meter.METER_MOUSEOVER,{event:o,element:s,datum:a}),i&&(s.classed("hovered",!0),r.services.events.dispatchEvent(O.Tooltip.SHOW,{event:o,hoveredElement:s,items:[{label:a[n],value:a.value}]}))}).on("mousemove",function(o,a){const s=I(this);r.services.events.dispatchEvent(O.Meter.METER_MOUSEMOVE,{event:o,element:s,datum:a}),i&&r.services.events.dispatchEvent(O.Tooltip.MOVE,{event:o})}).on("click",function(o,a){r.services.events.dispatchEvent(O.Meter.METER_CLICK,{event:o,element:I(this),datum:a})}).on("mouseout",function(o,a){const s=I(this);r.services.events.dispatchEvent(O.Meter.METER_MOUSEOUT,{event:o,element:s,datum:a}),i&&(s.classed("hovered",!1),r.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:s}))})}destroy(){this.parent.selectAll("rect.value").on("mouseover",null).on("mousemove",null).on("mouseout",null).on("click",null)}}class gS extends _a{constructor(){super(...arguments),this.type="simple-bar",this.renderType=ct.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-simple-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-simple-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-simple-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-simple-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getOptions(),{groupMapsTo:r}=n.data,i=this.getComponentContainer({ariaLabel:"bar graphs",withinChartClip:!0}),o=this.model.getDisplayData(this.configs.groups),a=this.services.cartesianScales.getOrientation(),s=i.selectAll("path.bar").data(o,l=>l[r]);s.exit().attr("opacity",0).remove(),s.enter().append("path").attr("opacity",0).merge(s).classed("bar",!0).attr("width",this.getBarWidth.bind(this)).transition().call(l=>this.services.transitions.setupTransition({transition:l,name:"bar-update-enter",animate:e})).attr("class",l=>this.model.getColorClassName({classNameTypes:[kt.FILL],dataGroupName:l[r],originalClassName:"bar"})).style("fill",l=>{const c=this.services.cartesianScales.getDomainIdentifier(l);return this.model.getFillColor(l[r],l[c],l)}).attr("d",l=>{const c=this.services.cartesianScales.getRangeIdentifier(),u=this.getBarWidth(),h=l[c],f=this.services.cartesianScales.getDomainValue(l)-u/2,d=f+u;let p,E;if(Array.isArray(h)&&h.length===2)p=this.services.cartesianScales.getRangeValue(h[0]),E=this.services.cartesianScales.getRangeValue(h[1]);else{const b=this.services.cartesianScales.getRangeScale().domain()[0];p=this.services.cartesianScales.getRangeValue(Math.max(0,b)),E=this.services.cartesianScales.getRangeValue(l)}const m=Math.abs(E-p);if(m!==0&&m<2&&(h>0&&a===de.VERTICAL||h<0&&a===de.HORIZONTAL?E=p-2:E=p+2),!this.isOutsideZoomedDomain(f,d))return ca({x0:f,x1:d,y0:p,y1:E},a)}).attr("opacity",1).attr("role",wt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",l=>l.value),this.addEventListeners()}addEventListeners(){const e=this;this.parent.selectAll("path.bar").on("mouseover",function(n,r){const i=I(this);i.classed("hovered",!0),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOVER,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.SHOW,{event:n,hoveredElement:i,data:[r]})}).on("mousemove",function(n,r){e.services.events.dispatchEvent(O.Bar.BAR_MOUSEMOVE,{event:n,element:I(this),datum:r}),e.services.events.dispatchEvent(O.Tooltip.MOVE,{event:n})}).on("click",function(n,r){e.services.events.dispatchEvent(O.Bar.BAR_CLICK,{event:n,element:I(this),datum:r})}).on("mouseout",function(n,r){const i=I(this);i.classed("hovered",!1),e.services.events.dispatchEvent(O.Bar.BAR_MOUSEOUT,{event:n,element:i,datum:r}),e.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:i})})}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class mS extends At{constructor(){super(...arguments),this.type="area-stacked",this.renderType=ct.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,r=this.getOptions(),{groupMapsTo:i}=r.data;this.parent.selectAll("path.area").transition("legend-hover-area").call(o=>this.services.transitions.setupTransition({transition:o,name:"legend-hover-area"})).attr("opacity",o=>T(o,0,i)!==n.datum().name?we.opacity.unselected:we.opacity.selected)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.area").transition("legend-mouseout-area").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-area"})).attr("opacity",we.opacity.selected)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e=!0){const n=this.getComponentContainer({ariaLabel:"stacked area graphs",withinChartClip:!0}),r=this,i=this.getOptions(),{groupMapsTo:o}=i.data,a=Object.keys(i.axes).some(d=>i.axes[d].percentage),s=this.model.getStackedData({percentage:a,groups:this.configs.groups}),l=T(s,0,0),c=this.services.cartesianScales.getDomainAxisPosition({datum:l}),u=this.services.cartesianScales.getRangeAxisPosition({datum:l}),h=this.services.cartesianScales.getScaleByPosition(u),f=n.selectAll("path.area").data(s,d=>T(d,0,o));this.areaGenerator=Sh().x(d=>this.services.cartesianScales.getValueThroughAxisPosition(c,d.data.sharedStackKey)).y0(d=>h(d[0])).y1(d=>h(d[1])).curve(this.services.curves.getD3Curve()),f.exit().attr("opacity",0).remove(),f.enter().append("path").attr("opacity",0).merge(f).data(s,d=>T(d,0,o)).attr("class","area").attr("class",d=>this.model.getColorClassName({classNameTypes:[kt.FILL],dataGroupName:T(d,0,o),originalClassName:"area"})).style("fill",d=>r.model.getFillColor(T(d,0,o),null,d)).attr("role",wt.GRAPHICS_SYMBOL).attr("aria-roledescription","area").attr("aria-label",d=>T(d,0,o)).transition().call(d=>this.services.transitions.setupTransition({transition:d,name:"area-update-enter",animate:e})).attr("opacity",we.opacity.selected).attr("d",this.areaGenerator)}}class vS extends _a{constructor(){super(...arguments),this.type="stacked-bar",this.renderType=ct.SVG,this.handleLegendOnHover=e=>{const{hoveredElement:n}=e.detail,{groupMapsTo:r}=this.model.getOptions().data;this.parent.selectAll("path.bar").transition("legend-hover-bar").call(i=>this.services.transitions.setupTransition({transition:i,name:"legend-hover-bar"})).attr("opacity",i=>i[r]!==n.datum().name?.3:1)},this.handleLegendMouseOut=()=>{this.parent.selectAll("path.bar").transition("legend-mouseout-bar").call(e=>this.services.transitions.setupTransition({transition:e,name:"legend-mouseout-bar"})).attr("opacity",1)}}init(){const e=this.services.events;e.addEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.addEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}render(e){const n=this.getComponentContainer({ariaLabel:"stacked bar graphs",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,o=this.model.getStackedData({groups:this.configs.groups,divergent:!0}),a=this.model.getActiveDataGroupNames(),s=n.selectAll("g.bars").data(o,c=>T(c,0,i));s.exit().attr("opacity",0).remove(),s.enter().append("g").classed("bars",!0).attr("role",wt.GROUP).attr("data-name","bars");const l=n.selectAll("g.bars").selectAll("path.bar").data(c=>c,c=>c.data.sharedStackKey);l.exit().remove(),l.enter().append("path").merge(l).classed("bar",!0).transition().call(c=>this.services.transitions.setupTransition({transition:c,name:"bar-update-enter",animate:e})).attr("class",c=>this.model.getColorClassName({classNameTypes:[kt.FILL],dataGroupName:c[i],originalClassName:"bar"})).style("fill",c=>this.model.getFillColor(c[i],c.data.sharedStackKey,c.data)).attr("d",c=>{const u=c.data.sharedStackKey,h=this.getBarWidth(),f=this.services.cartesianScales.getDomainValue(u)-h/2,d=f+h,p=this.services.cartesianScales.getRangeValue(c[0]);let E=this.services.cartesianScales.getRangeValue(c[1]);if(!this.isOutsideZoomedDomain(f,d)){if(Math.abs(E-p)>0&&Math.abs(E-p)>r.bars.dividerSize){const m=c[0]<0&&c[1]<=0;m&&a.length>1?this.services.cartesianScales.getOrientation()===de.VERTICAL?E+=c[1]===0?2:1:E-=1:m||(this.services.cartesianScales.getOrientation()===de.VERTICAL?E+=1:E-=1)}return ca({x0:f,x1:d,y0:p,y1:E},this.services.cartesianScales.getOrientation())}}).attr("opacity",1).attr("role",wt.GRAPHICS_SYMBOL).attr("aria-roledescription","bar").attr("aria-label",c=>c[1]-c[0]),this.addEventListeners()}addEventListeners(){const e=this.getOptions(),{groupMapsTo:n}=e.data,r=this;this.parent.selectAll("path.bar").on("mouseover",function(i,o){const a=I(this);a.classed("hovered",!0),r.services.events.dispatchEvent(O.Bar.BAR_MOUSEOVER,{event:i,element:a,datum:o});let s=r.model.getDisplayData(r.configs.groups).find(l=>{const c=r.services.cartesianScales.getDomainIdentifier(l),u=r.services.cartesianScales.getRangeIdentifier(l);return l[u]===o.data[o[n]]&&l[c].toString()===o.data.sharedStackKey&&l[n]===o[n]});if(s===void 0){const l=r.services.cartesianScales.getDomainIdentifier(),c=r.services.cartesianScales.getRangeIdentifier();s={[l]:o.data.sharedStackKey,[c]:o.data[o[n]],[n]:o[n]}}r.services.events.dispatchEvent(O.Tooltip.SHOW,{event:i,hoveredElement:a,data:[s]})}).on("mousemove",function(i,o){const a=I(this);r.services.events.dispatchEvent(O.Bar.BAR_MOUSEMOVE,{event:i,element:a,datum:o}),r.services.events.dispatchEvent(O.Tooltip.MOVE,{event:i})}).on("click",function(i,o){r.services.events.dispatchEvent(O.Bar.BAR_CLICK,{event:i,element:I(this),datum:o})}).on("mouseout",function(i,o){const a=I(this);a.classed("hovered",!1),r.services.events.dispatchEvent(O.Bar.BAR_MOUSEOUT,{event:i,element:a,datum:o}),r.services.events.dispatchEvent(O.Tooltip.HIDE,{hoveredElement:a})})}getBarWidth(){const e=this.getOptions();if(T(e,"bars","width"))return e.bars.width;const n=this.services.cartesianScales.getMainXScale(),r=j.getSVGElementSize(this.parent,{useAttrs:!0}).width,i=this.model.getStackKeys().length,o=T(e,"bars","spacingFactor");return n.step?Math.min(e.bars.maxWidth,n.step()/2):Math.min(e.bars.maxWidth,r*o/i)}destroy(){this.parent.selectAll("path.bar").on("mouseover",null).on("mousemove",null).on("mouseout",null);const e=this.services.events;e.removeEventListener(O.Legend.ITEM_HOVER,this.handleLegendOnHover),e.removeEventListener(O.Legend.ITEM_MOUSEOUT,this.handleLegendMouseOut)}}class yS extends kr{constructor(){super(...arguments),this.type="scatter-stacked",this.renderType=ct.SVG}render(e){if(!T(this.getOptions(),"points","enabled"))return;const n=this.getComponentContainer({ariaLabel:"scatter points",withinChartClip:!0}),r=this.getOptions(),{groupMapsTo:i}=r.data,o=Object.keys(r.axes).some(u=>r.axes[u].percentage),a=this.model.getStackedData({groups:this.configs.groups,percentage:o}),s=n.selectAll("g.dots").data(a,u=>T(u,0,i));s.exit().attr("opacity",0).remove();const l=s.enter().append("g").classed("dots",!0).attr("role",wt.GROUP).merge(s).selectAll("circle.dot").data(u=>u);l.exit().attr("opacity",0).remove();const c=l.enter().append("circle").classed("dot",!0).attr("opacity",0).merge(l).datum(u=>{const h=u[i],f=this.services.cartesianScales.getDomainIdentifier(u),d=this.services.cartesianScales.getRangeIdentifier(u);return{[i]:h,[f]:u.data.sharedStackKey,[d]:u[1]}});this.styleCircles(c,e),this.addEventListeners()}getTooltipData(e,n){const r=this.getOptions(),{groupMapsTo:i}=r.data,o=Object.keys(r.axes).some(l=>r.axes[l].percentage),a=this.model.getStackedData({groups:this.configs.groups,percentage:o}),s=[];return a.forEach((l,c)=>{l.forEach((u,h)=>{const f=u[i],d=u.data.sharedStackKey;let p=u.data[f];const E=u[1],m=this.services.cartesianScales.getDomainIdentifier(u),b=this.services.cartesianScales.getRangeIdentifier(u);p!=null&&e===this.services.cartesianScales.getDomainValue(d)&&n===this.services.cartesianScales.getRangeValue(E)&&(o&&(p=this.model.getStackedData({groups:this.configs.groups})[c][h].data[f]),p!==null&&s.push({[i]:f,[m]:d,[b]:p}))})}),this.model.getDisplayData(this.configs.groups).filter(l=>{const c=this.services.cartesianScales.getDomainIdentifier(l),u=this.services.cartesianScales.getRangeIdentifier(l);return s.find(h=>h[i]==l[i]&&h[c]==l[c]&&h[u]==l[u])!==void 0})}}function _S(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var bS={value:function(){}};function Nh(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ir(n)}function Ir(t){this._=t}function wS(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ir.prototype=Nh.prototype={constructor:Ir,on:function(t,e){var n=this._,r=wS(t+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(t=r[o]).type)&&(i=ES(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=Ul(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Ul(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ir(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};function ES(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Ul(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=bS,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const TS=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Nh},Symbol.toStringTag,{value:"Module"})),SS=_S(TS);var Ki,Pl;function OS(){if(Pl)return Ki;Pl=1;const t=SS.dispatch,e=Math.PI/180,n={archimedean:E,rectangular:m},r=64,i=2048;Ki=function(){var y=[256,256],g=o,w=a,M=l,$=s,G=s,F=c,C=u,tt=E,V=[],q=1/0,nt=t("word","end"),W=null,Q=Math.random,U={},X=S;U.canvas=function(D){return arguments.length?(X=_(D),U):X},U.start=function(){var D=rt(X()),H=b((y[0]>>5)*y[1]),lt=null,Y=V.length,gt=-1,st=[],mt=V.map(function(R,k){return R.text=g.call(this,R,k),R.font=w.call(this,R,k),R.style=$.call(this,R,k),R.weight=G.call(this,R,k),R.rotate=F.call(this,R,k),R.size=~~M.call(this,R,k),R.padding=C.call(this,R,k),R}).sort(function(R,k){return k.size-R.size});return W&&clearInterval(W),W=setInterval(L,0),L(),U;function L(){for(var R=Date.now();Date.now()-R<q&&++gt<Y&&W;){var k=mt[gt];k.x=y[0]*(Q()+.5)>>1,k.y=y[1]*(Q()+.5)>>1,h(D,k,mt,gt),k.hasText&&z(H,k,lt)&&(st.push(k),nt.call("word",U,k),lt?d(lt,k):lt=[{x:k.x+k.x0,y:k.y+k.y0},{x:k.x+k.x1,y:k.y+k.y1}],k.x-=y[0]>>1,k.y-=y[1]>>1)}gt>=Y&&(U.stop(),nt.call("end",U,st,lt))}},U.stop=function(){W&&(clearInterval(W),W=null);for(const D of V)delete D.sprite;return U};function rt(D){const H=D.getContext("2d",{willReadFrequently:!0});D.width=D.height=1;const lt=Math.sqrt(H.getImageData(0,0,1,1).data.length>>2);return D.width=(r<<5)/lt,D.height=i/lt,H.fillStyle=H.strokeStyle="red",{context:H,ratio:lt}}function z(D,H,lt){y[0],y[1];for(var Y=H.x,gt=H.y,st=Math.sqrt(y[0]*y[0]+y[1]*y[1]),mt=tt(y),L=Q()<.5?1:-1,R=-L,k,x,Z;(k=mt(R+=L))&&(x=~~k[0],Z=~~k[1],!(Math.min(Math.abs(x),Math.abs(Z))>=st));)if(H.x=Y+x,H.y=gt+Z,!(H.x+H.x0<0||H.y+H.y0<0||H.x+H.x1>y[0]||H.y+H.y1>y[1])&&(!lt||p(H,lt))&&!f(H,D,y[0])){for(var B=H.sprite,pt=H.width>>5,vt=y[0]>>5,P=H.x-(pt<<4),it=P&127,Yt=32-it,Gt=H.y1-H.y0,Tn=(H.y+H.y0)*vt+(P>>5),Sn,ke=0;ke<Gt;ke++){Sn=0;for(var te=0;te<=pt;te++)D[Tn+te]|=Sn<<Yt|(te<pt?(Sn=B[ke*pt+te])>>>it:0);Tn+=vt}return!0}return!1}return U.timeInterval=function(D){return arguments.length?(q=D??1/0,U):q},U.words=function(D){return arguments.length?(V=D,U):V},U.size=function(D){return arguments.length?(y=[+D[0],+D[1]],U):y},U.font=function(D){return arguments.length?(w=_(D),U):w},U.fontStyle=function(D){return arguments.length?($=_(D),U):$},U.fontWeight=function(D){return arguments.length?(G=_(D),U):G},U.rotate=function(D){return arguments.length?(F=_(D),U):F},U.text=function(D){return arguments.length?(g=_(D),U):g},U.spiral=function(D){return arguments.length?(tt=n[D]||D,U):tt},U.fontSize=function(D){return arguments.length?(M=_(D),U):M},U.padding=function(D){return arguments.length?(C=_(D),U):C},U.random=function(D){return arguments.length?(Q=D,U):Q},U.on=function(){var D=nt.on.apply(nt,arguments);return D===nt?U:D},U};function o(y){return y.text}function a(){return"serif"}function s(){return"normal"}function l(y){return Math.sqrt(y.value)}function c(){return(~~(random()*6)-3)*30}function u(){return 1}function h(y,g,w,M){if(!g.sprite){var $=y.context,G=y.ratio;$.clearRect(0,0,(r<<5)/G,i/G);var F=0,C=0,tt=0,V=w.length;for(--M;++M<V;){g=w[M],$.save(),$.font=g.style+" "+g.weight+" "+~~((g.size+1)/G)+"px "+g.font;const k=$.measureText(g.text),x=-Math.floor(k.width/2);let Z=(k.width+1)*G,B=g.size<<1;if(g.rotate){var q=Math.sin(g.rotate*e),nt=Math.cos(g.rotate*e),W=Z*nt,Q=Z*q,U=B*nt,X=B*q;Z=Math.max(Math.abs(W+X),Math.abs(W-X))+31>>5<<5,B=~~Math.max(Math.abs(Q+U),Math.abs(Q-U))}else Z=Z+31>>5<<5;if(B>tt&&(tt=B),F+Z>=r<<5&&(F=0,C+=tt,tt=0),C+B>=i)break;$.translate((F+(Z>>1))/G,(C+(B>>1))/G),g.rotate&&$.rotate(g.rotate*e),$.fillText(g.text,x,0),g.padding&&($.lineWidth=2*g.padding,$.strokeText(g.text,x,0)),$.restore(),g.width=Z,g.height=B,g.xoff=F,g.yoff=C,g.x1=Z>>1,g.y1=B>>1,g.x0=-g.x1,g.y0=-g.y1,g.hasText=!0,F+=Z}for(var rt=$.getImageData(0,0,(r<<5)/G,i/G).data,z=[];--M>=0;)if(g=w[M],!!g.hasText){for(var D=g.width,H=D>>5,lt=g.y1-g.y0,Y=0;Y<lt*H;Y++)z[Y]=0;if(F=g.xoff,F==null)return;C=g.yoff;for(var gt=0,st=-1,mt=0;mt<lt;mt++){for(var Y=0;Y<D;Y++){var L=H*mt+(Y>>5),R=rt[(C+mt)*(r<<5)+(F+Y)<<2]?1<<31-Y%32:0;z[L]|=R,gt|=R}gt?st=mt:(g.y0++,lt--,mt--,C++)}g.y1=g.y0+st,g.sprite=z.slice(0,(g.y1-g.y0)*H)}}}function f(y,g,w){w>>=5;for(var M=y.sprite,$=y.width>>5,G=y.x-($<<4),F=G&127,C=32-F,tt=y.y1-y.y0,V=(y.y+y.y0)*w+(G>>5),q,nt=0;nt<tt;nt++){q=0;for(var W=0;W<=$;W++)if((q<<C|(W<$?(q=M[nt*$+W])>>>F:0))&g[V+W])return!0;V+=w}return!1}function d(y,g){var w=y[0],M=y[1];g.x+g.x0<w.x&&(w.x=g.x+g.x0),g.y+g.y0<w.y&&(w.y=g.y+g.y0),g.x+g.x1>M.x&&(M.x=g.x+g.x1),g.y+g.y1>M.y&&(M.y=g.y+g.y1)}function p(y,g){return y.x+y.x1>g[0].x&&y.x+y.x0<g[1].x&&y.y+y.y1>g[0].y&&y.y+y.y0<g[1].y}function E(y){var g=y[0]/y[1];return function(w){return[g*(w*=.1)*Math.cos(w),w*Math.sin(w)]}}function m(y){var g=4,w=g*y[0]/y[1],M=0,$=0;return function(G){var F=G<0?-1:1;switch(Math.sqrt(1+4*F*G)-F&3){case 0:M+=w;break;case 1:$+=g;break;case 2:M-=w;break;default:$-=g;break}return[M,$]}}function b(y){for(var g=[],w=-1;++w<y;)g[w]=0;return g}function S(){return document.createElement("canvas")}function _(y){return typeof y=="function"?y:function(){return y}}return Ki}OS();function xS(t){var e=t==null?0:t.length;return e?Fc(t):[]}function MS(t){return Lc(kc(t,void 0,xS),t+"")}function CS(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function $S(t,e){return e.length<2?t:zo(t,CS(e,0,-1))}function AS(t,e){return e=ai(e,t),t=$S(t,e),t==null||delete t[ir(su(e))]}function LS(t){return Bc(t)?void 0:t}var DS=1,kS=2,IS=4;MS(function(t,e){var n={};if(t==null)return n;var r=!1;e=Cc(e,function(o){return o=ai(o,t),r||(r=o.length>1),o}),wn(t,Yc(t),n),r&&(n=jn(n,DS|kS|IS,LS));for(var i=e.length;i--;)AS(n,e[i]);return n});function Hl(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ba(t){this._context=t}ba.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Hl(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hl(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Uh(t,e){this._basis=new ba(t),this._beta=e}Uh.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r=t[0],i=e[0],o=t[n]-r,a=e[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(r+l*o),this._beta*e[s]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(r){return e===1?new ba(r):new Uh(r,e)}return n.beta=function(r){return t(+r)},n})(.85);function ei(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function wa(t,e){this._context=t,this._k=(1-e)/6}wa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ei(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ei(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new wa(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Ea(t,e){this._context=t,this._k=(1-e)/6}Ea.prototype={areaStart:Qr,areaEnd:Qr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ei(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Ea(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Ta(t,e){this._context=t,this._k=(1-e)/6}Ta.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ei(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return new Ta(r,e)}return n.tension=function(r){return t(+r)},n})(0);function Sa(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>ol){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>ol){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/u,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Ph(t,e){this._context=t,this._alpha=e}Ph.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Sa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new Ph(r,e):new wa(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function Hh(t,e){this._context=t,this._alpha=e}Hh.prototype={areaStart:Qr,areaEnd:Qr,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Sa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new Hh(r,e):new Ea(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function Fh(t,e){this._context=t,this._alpha=e}Fh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Sa(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(r){return e?new Fh(r,e):new Ta(r,0)}return n.alpha=function(r){return t(+r)},n})(.5);function Fl(t){return t<0?-1:1}function Vl(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Fl(o)+Fl(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Bl(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Qi(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Do(t){this._context=t}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qi(this,this._t0,Bl(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Qi(this,Bl(this,n=Vl(this,t,e)),n);break;default:Qi(this,this._t0,n=Vl(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(Do.prototype).point=function(t,e){Do.prototype.point.call(this,e,t)};class RS extends En{zoomIn(e,n,r){let i,o,a;const s=r||Ps;e&&(i=e.x,o=e.y,a=2);const{width:l,height:c}=j.getSVGElementSize(this.services.domUtils.getHolder(),{useClientDimensions:!0});n.transition().duration(s.duration).ease(s.ease).attr("transform",`translate(${l/2}, ${c/2}) scale(${a}) translate(${-i},${-o})`),this.services.events.dispatchEvent(O.CanvasZoom.CANVAS_ZOOM_IN,{element:I(e)})}zoomOut(e,n){const r=n||Ps;e.transition().duration(r.duration).ease(r.ease).attr("transform",""),this.services.events.dispatchEvent(O.CanvasZoom.CANVAS_ZOOM_OUT)}}class NS extends En{init(){this.documentFragment=document.createDocumentFragment()}addEventListener(e,n){this.documentFragment.addEventListener(e,n)}removeEventListener(e,n){this.documentFragment.removeEventListener(e,n)}dispatchEvent(e,n){let r;n?r=new CustomEvent(e,{detail:n}):(r=document.createEvent("Event"),r.initEvent(e,!1,!0)),this.documentFragment.dispatchEvent(r)}}class US extends En{constructor(e,n){super(e,n)}downloadCSV(e,n){const r=document.createElement("a"),i="text/csv;encoding:utf-8";if(navigator.msSaveBlob)navigator.msSaveBlob(new Blob([e],{type:i}),n);else if(URL&&"download"in r){const o=URL.createObjectURL(new Blob([e],{type:i}));r.href=o,r.setAttribute("download",n),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o)}else location.href=`data:application/octet-stream,${encodeURIComponent(e)}`}downloadImage(e,n){const r=document.createElement("a");r.download=n,r.href=e,document.body.appendChild(r),r.click(),document.body.removeChild(r)}}class PS extends En{constructor(){super(...arguments),this.pendingTransitions={}}init(){var e;(e=this.services.events)==null||e.addEventListener(O.Model.UPDATE,()=>{this.pendingTransitions={}})}setupTransition({transition:e,name:n,animate:r}){return this.pendingTransitions[e._id]=e,e.on("end interrupt cancel",()=>{delete this.pendingTransitions[e._id]}),this.model.getOptions().animations===!1||r===!1?e.duration(0):e.duration(T(Vs,n,"duration")||Vs.default.duration)}getPendingTransitions(){return this.pendingTransitions}}class HS{constructor(e,n){this.components=[],this.services={canvasZoom:RS,domUtils:j,events:NS,files:US,gradientUtils:Qn,transitions:PS},this.model=new Zu(this.services)}init(e,n){this.model.set({holder:e},{skipUpdate:!0}),Object.keys(this.services).forEach(r=>{const i=this.services[r];this.services[r]=new i(this.model,this.services)}),this.services.events.addEventListener(O.Model.UPDATE,r=>{const i=!!T(r,"detail","animate");this.update(i)}),this.model.setData(n.data),this.services.events.addEventListener(O.Chart.RESIZE,()=>{this.update(!1)}),this.components=this.getComponents(),this.update()}getComponents(){return console.error("getComponents() method is not implemented"),[]}update(e=!0){if(!this.components)return;Object.keys(this.services).forEach(i=>{this.services[i].update()}),this.components.forEach(i=>i.render(e));const n=this.services.transitions.getPendingTransitions(),r=Object.keys(n).map(i=>n[i].end().catch(o=>o));Promise.all(r).then(()=>this.services.events.dispatchEvent(O.Chart.RENDER_FINISHED))}destroy(){this.components.forEach(e=>e.destroy()),this.services.domUtils.getHolder().remove(),this.model.set({destroyed:!0},{skipUpdate:!0})}getChartComponents(e,n){const r=this.model.getOptions(),i=T(r,"toolbar","enabled"),o={id:"legend",components:[new nS(this.model,this.services)],growth:bt.PREFERRED},a=T(r,"canvasZoom","enabled");a&&a===!0&&e.push(new iS(this.model,this.services));const s=!!this.model.getOptions().title,l={id:"title",components:[new Ih(this.model,this.services)],growth:bt.STRETCH},c={id:"toolbar",components:[new tS(this.model,this.services)],growth:bt.PREFERRED},u={id:"header",components:[new Lr(this.model,this.services,[l,...i?[c]:[]],{direction:Vt.ROW,alignItems:Io.CENTER})],growth:bt.PREFERRED},h={id:"graph-frame",components:e,growth:bt.STRETCH,renderType:T(n,"graphFrameRenderType")||ct.SVG},f=T(n,"excludeLegend")!==!0&&r.legend.enabled!==!1;let d=Vt.COLUMN;if(f){const b=T(r,"legend","position");b==="left"?(d=Vt.ROW,r.legend.orientation||(r.legend.orientation=Ji.VERTICAL)):b==="right"?(d=Vt.ROW_REVERSE,r.legend.orientation||(r.legend.orientation=Ji.VERTICAL)):b==="bottom"&&(d=Vt.COLUMN_REVERSE)}const p={id:"spacer",components:[new $o(this.model,this.services)],growth:bt.PREFERRED},E={id:"full-frame",components:[new Lr(this.model,this.services,[...f?[o]:[],...f?[p]:[],h],{direction:d})],growth:bt.STRETCH},m=[];if(s||i){m.push(u);const b={id:"spacer",components:[new $o(this.model,this.services,i?{size:15}:void 0)],growth:bt.PREFERRED};m.push(b)}return m.push(E),[new oS(this.model,this.services),new eS(this.model,this.services),new Lr(this.model,this.services,m,{direction:Vt.COLUMN})]}}Ae.LINE+"",Ae.SCATTER+"",Ae.AREA+"",Ae.STACKED_AREA+"",Ae.SIMPLE_BAR+"",Ae.GROUPED_BAR+"",Ae.STACKED_BAR+"";class FS extends HS{constructor(e,n){var r;super(e,n),this.model=new fb(this.services);const i=(r=n.options.meter)!=null&&r.proportional?K(io(js.proportionalMeterChart),n.options):K(io(js.meterChart),n.options);this.model.setOptions(i),this.init(e,n)}getComponents(){const e=[...T(this.model.getOptions(),"meter","showLabels")?[{id:"meter-title",components:[new dS(this.model,this.services)],growth:bt.STRETCH,renderType:ct.SVG},{id:"spacer",components:[new $o(this.model,this.services,{size:8})],growth:bt.STRETCH}]:[],{id:"meter-graph",components:[new pS(this.model,this.services)],growth:bt.STRETCH,renderType:ct.SVG}],n=[new Lr(this.model,this.services,e,{direction:Vt.COLUMN})];return this.getChartComponents(n,{graphFrameRenderType:ct.HTML})}}var VS=Gl("<div></div>");function BS(t,e){const n=Rr(e,["children","$$slots","$$events","$$legacy"]),r=Rr(n,["data","options","Chart","chart","ref","id"]);Kh(e,!1);const i="cds--chart-holder";let o=ce(e,"data",24,()=>[]),a=ce(e,"options",24,()=>({})),s=ce(e,"Chart",8),l=ce(e,"chart",12),c=ce(e,"ref",12),u=ce(e,"id",24,()=>`chart-${Math.random().toString(36)}`);const h=ld();cd(()=>{try{l(new(s())(c(),{data:o(),options:a()})),h("load")}catch(d){console.error("Failed to initialize chart:",d)}}),ud(()=>{if(l())try{l().model.setData(o()),l().model.setOptions(a()),h("update",{data:o(),options:a()})}catch(d){console.error("Failed to update chart:",d)}}),hd(()=>{l()&&(h("destroy"),l().components.forEach(d=>d.destroy()),l().model.set({destroyed:!0},{skipUpdate:!0}),l(void 0))}),Xh();var f=VS();od(f,()=>({id:u(),class:i,...r})),ad(f,d=>c(d),()=>c()),zl(t,f),Qh()}function jl(t,e){const n=Rr(e,["children","$$slots","$$events","$$legacy"]),r=Rr(n,["options","data","chart","ref"]);let i=ce(e,"options",8),o=ce(e,"data",8),a=ce(e,"chart",12,void 0),s=ce(e,"ref",12,void 0);BS(t,sd(()=>r,{get Chart(){return FS},get options(){return i()},get data(){return o()},get ref(){return s()},set ref(l){s(l)},get chart(){return a()},set chart(l){a(l)},$$events:{load(l){Ei.call(this,e,l)},update(l){Ei.call(this,e,l)},destroy(l){Ei.call(this,e,l)}},$$legacy:!0}))}function sn(t,e){Wl(e,!ko(e))}function jS(t,e){Wl(e,!ko(e))}var GS=Gl('<h3>TODO APP&nbsp;<img src="../src/lib/assets/list_alt.svg" alt="Edit"/></h3> <div role="tablist"><details open><summary role="" class="outline secondary"><b>Open tasks</b></summary> <hr/> <button class="outline"><img src="../src/lib/assets/add_notes.svg" alt="Edit"/>&nbsp;Add new task</button> <div class="grid"><div style="display: flex; flex-direction: row; flex-wrap: wrap"><div class="overflow-auto" style="flex-grow: 3;"><table><thead><tr><th>Edit</th><th scope="col">Task</th><th scope="col">Type</th><th scope="col">Notes</th><th scope="col">Date</th><th scope="col">Status</th></tr></thead><tbody><tr><td><a href="/"><img alt="Edit"/></a></td><th scope="row">Mercury</th><td>4,880</td><td>0.39</td><td>88</td><td>Done</td></tr><tr><td><a href="/"><img alt="Edit"/></a></td><th scope="row">Venus</th><td>12,104</td><td>0.72</td><td>225</td><td>In progress</td></tr><tr><td><a href="/"><img alt="Edit"/></a></td><th scope="row">Earth</th><td>12,742</td><td>1.00</td><td>365</td><td>Done</td></tr><tr><td><a href="/"><img alt="Edit"/></a></td><th scope="row">Mars</th><td>6,779</td><td>1.52</td><td>687</td><td>In progress</td></tr></tbody><tfoot><tr><th scope="row"></th><th scope="row">Average</th><td>9,126</td><td>0.91</td><td>341</td><th scope="row"></th></tr></tfoot></table></div> <!></div></div></details> <hr/> <details><summary role="button" class="outline contrast">Closed tasks</summary> <div role="tabpanel"><div style="display: flex; flex-direction: row; flex-wrap: wrap"><div class="overflow-auto" style="flex-grow: 3;"><table><thead><tr><th scope="col">Planet</th><th scope="col">Diameter (km)</th><th scope="col">Distance to Sun (AU)</th><th scope="col">Orbit (days)</th></tr></thead><tbody><tr><th scope="row">Mercury</th><td>4,880</td><td>0.39</td><td>88</td></tr><tr><th scope="row">Venus</th><td>12,104</td><td>0.72</td><td>225</td></tr><tr><th scope="row">Earth</th><td>12,742</td><td>1.00</td><td>365</td></tr><tr><th scope="row">Mars</th><td>6,779</td><td>1.52</td><td>687</td></tr></tbody><tfoot><tr><th scope="row">Average</th><td>9,126</td><td>0.91</td><td>341</td></tr></tfoot></table></div> <!></div></div></details></div> <dialog><article><header><a href="/" rel="prev" aria-label="Close"></a> <p><strong> Add new task</strong></p></header> <form><fieldset><label>Task name <input name="first_name" placeholder="Task name" autocomplete="given-name"/></label> <label>Type <input name="type" placeholder="Type" autocomplete="given-name"/></label> <label>Notes <textarea rows="4" name="type" placeholder="Additional notes..." autocomplete="given-name"></textarea></label></fieldset> <input type="submit" value="Add new task"/></form></article></dialog>',1);function JS(t){let e={theme:"g100",resizable:!0,legend:{position:"bottom"},data:{loading:!1},title:"Task Meter Chart",height:"180px",meter:{proportional:{total:350,unit:"tasks"},showLabels:!0}},n=[{group:"Done",value:200},{group:"In progress",value:65},{group:"Skipped",value:75}],r=nd(!1);var i=GS();td(lt=>{id.title="SvleteKit TODO"});var o=Ft(ed(i),2),a=ut(o),s=Ft(ut(a),4);s.__click=[sn,r];var l=Ft(s,2),c=ut(l),u=ut(c),h=ut(u),f=Ft(ut(h)),d=ut(f),p=ut(d),E=ut(p);E.__click=[sn,r];var m=ut(E);ht(E),ht(p),tn(5),ht(d);var b=Ft(d),S=ut(b),_=ut(S);_.__click=[sn,r];var y=ut(_);ht(_),ht(S),tn(5),ht(b);var g=Ft(b),w=ut(g),M=ut(w);M.__click=[sn,r];var $=ut(M);ht(M),ht(w),tn(5),ht(g);var G=Ft(g),F=ut(G),C=ut(F);C.__click=[sn,r];var tt=ut(C);ht(C),ht(F),tn(5),ht(G),ht(f),tn(),ht(h),ht(u);var V=Ft(u,2);jl(V,{get data(){return n},get options(){return e}}),ht(c),ht(l),ht(a);var q=Ft(a,4),nt=Ft(ut(q),2),W=ut(nt),Q=Ft(ut(W),2);jl(Q,{get data(){return n},get options(){return e}}),ht(W),ht(nt),ht(q),ht(o);var U=Ft(o,2),X=ut(U),rt=ut(X),z=ut(rt);z.__click=[sn,r],tn(2),ht(rt);var D=Ft(rt,2),H=Ft(ut(D),2);H.__click=[jS,r],ht(D),ht(X),ht(U),rd(()=>{fr(m,"src",pr),fr(y,"src",pr),fr($,"src",pr),fr(tt,"src",pr),U.open=ko(r)}),zl(t,i)}Jh(["click"]);export{JS as component};
